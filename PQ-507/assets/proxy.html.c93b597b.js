import{_ as c,r as t,o as i,c as l,b as a,a as s,d as n,e as o}from"./app.9a621f1c.js";const r={},u=s("h1",{id:"soporte-proxy",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#soporte-proxy","aria-hidden":"true"},"#"),n(" Soporte Proxy")],-1),d=n("grammY le permite configurar una serie de cosas sobre c\xF3mo se realizan las peticiones de red. Esto incluye inyectar un payload personalizado en cada petici\xF3n, que puede ser usado para instalar un agente proxy. Mira las "),k=s("code",null,[n("Api"),s("wbr"),n("Client"),s("wbr"),n("Options")],-1),m=n(" en la "),b={href:"https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/ApiClientOptions",target:"_blank",rel:"noopener noreferrer"},v=n("referencia de la API de grammY"),h=n("."),g=o(`<p>En Deno, as\xED es como se usar\xEDa un proxy <code>http</code>:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://deno.land/x/grammy@v1.11.1/mod.ts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> Deno<span class="token punctuation">.</span><span class="token function">createHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;http://host:port/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token constant">TOKEN</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  client<span class="token operator">:</span> <span class="token punctuation">{</span>
    baseFetchConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// @ts-ignore</span>
      client<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Note that you need to run this with the <code>-<wbr>-unstable</code> flag.</p></blockquote>`,3),_=n("En Node.js, as\xED es como usar\xEDas un proxy con el paquete "),y=s("code",null,[n("socks5"),s("wbr"),n("-https"),s("wbr"),n("-client")],-1),f=n(" ("),x={href:"https://www.npmjs.com/package/socks5-https-client",target:"_blank",rel:"noopener noreferrer"},w=n("npm"),q=n("):"),E=o(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;grammy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> SocksAgent <span class="token keyword">from</span> <span class="token string">&quot;socks5-https-client/lib/Agent&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> socksAgent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SocksAgent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  socksHost<span class="token operator">:</span> proxyHost<span class="token punctuation">,</span> <span class="token comment">// proxy host</span>
  socksPort<span class="token operator">:</span> proxyPort<span class="token punctuation">,</span> <span class="token comment">// proxy port</span>
  socksUsername<span class="token operator">:</span> proxyUser<span class="token punctuation">,</span> <span class="token comment">// nombre usuario</span>
  socksPassword<span class="token operator">:</span> proxyPassword<span class="token punctuation">,</span> <span class="token comment">// contrase\xF1a</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  client<span class="token operator">:</span> <span class="token punctuation">{</span>
    baseFetchConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
      agent<span class="token operator">:</span> socksAgent<span class="token punctuation">,</span>
      compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Tenga en cuenta que especificar <code>compress:<wbr> true</code> es una optimizaci\xF3n de rendimiento opcional. No tiene nada que ver con el soporte de proxy. Es parte del valor por defecto de <code>base<wbr>Fetch<wbr>Config</code>, as\xED que si todav\xEDa lo quieres, debes especificarlo de nuevo.</p></blockquote>`,2),A=n("Conseguir que un proxy funcione puede ser dif\xEDcil. Contacta con nosotros en el "),T={href:"https://t.me/grammyjs",target:"_blank",rel:"noopener noreferrer"},j=n("chat de Telegram"),C=n(" si tienes problemas, o si necesitas que grammY soporte m\xE1s opciones de configuraci\xF3n. Tambi\xE9n tenemos un "),N={href:"https://t.me/grammyjs_ru",target:"_blank",rel:"noopener noreferrer"},P=n("chat ruso de Telegram"),I=n(".");function z(D,Y){const p=t("AutotagPage"),e=t("ExternalLinkIcon");return i(),l("div",null,[u,a(p,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),s("p",null,[d,k,m,s("a",b,[v,a(e)]),h]),g,s("p",null,[_,y,f,s("a",x,[w,a(e)]),q]),E,s("p",null,[A,s("a",T,[j,a(e)]),C,s("a",N,[P,a(e)]),I])])}const F=c(r,[["render",z],["__file","proxy.html.vue"]]);export{F as default};
