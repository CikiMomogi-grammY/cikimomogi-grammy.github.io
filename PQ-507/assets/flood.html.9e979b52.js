import{_ as l,r as a,o as d,c,b as o,a as t,w as i,d as e,e as u}from"./app.9a621f1c.js";const h={},m=t("h1",{id:"scaling-up-iv-flood-limits",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#scaling-up-iv-flood-limits","aria-hidden":"true"},"#"),e(" Scaling Up IV: Flood Limits")],-1),p=e("Telegram restricts how many messages your bot can send per second, confer the "),_={href:"https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this",target:"_blank",rel:"noopener noreferrer"},g=e("Bot FAQ"),f=e(". You should always make sure to stay below these limits, otherwise your bot gets rate limited. If you ignore these errors, your bot may eventually be banned."),b=u('<h2 id="the-simple-solution" tabindex="-1"><a class="header-anchor" href="#the-simple-solution" aria-hidden="true">#</a> The Simple Solution</h2><div class="custom-container warning"><p class="custom-container-title">Not a Real Solution</p><p>This section solves your problem short-term, but if you are building a bot that should actually scale well, read the <a href="#the-real-solution-recommended">next subsection</a> instead.</p></div><p>There is a very simple solution to hitting rate limits: if an API request fails due to a rate limit, just wait the time Telegram tells you to wait, and repeat the request.</p>',3),y=e("If you want to do this, you can use the "),x=e("super simple "),w=t("code",null,[e("auto"),t("wbr"),e("-retry")],-1),k=e(" plugin"),v=e(". It is an "),I=e("API transformer function"),T=e(" that does exactly that."),j=t("p",null,"However, if the traffic to your bot increases rapidly, e.g. when it is added to a large group, it may run into a lot of rate limiting errors before the traffic spike settles. This could lead to a ban. Moreover, as requests might be tried several times, your server will consume more RAM and bandwidth than necessary. Instead of fixing the problem after the fact, it is much better to enqueue all API requests and only send them at the permitted speed:",-1),A=t("h2",{id:"the-real-solution-recommended",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#the-real-solution-recommended","aria-hidden":"true"},"#"),e(" The Real Solution (recommended)")],-1),E=e("grammY provides you with the "),q=e("throttler plugin"),R=e(" that automatically makes your bot respect all rate limits by enqueuing the outgoing requests of your bot in a message queue. This plugin is just as simple to set up but does a much better job at flood control. There isn\u2019t really any good reason to use "),N=e("auto"),P=t("wbr",null,null,-1),S=e("-retry"),L=e(" over the "),Y=e("throttler plugin"),z=e(". In some cases it may make sense to use both.");function D(C,F){const n=a("AutotagPage"),r=a("ExternalLinkIcon"),s=a("RouterLink");return d(),c("div",null,[m,o(n,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),t("p",null,[p,t("a",_,[g,o(r)]),f]),b,t("p",null,[y,o(s,{to:"/plugins/auto-retry.html"},{default:i(()=>[x,w,k]),_:1}),v,o(s,{to:"/advanced/transformers.html"},{default:i(()=>[I]),_:1}),T]),j,A,t("p",null,[E,o(s,{to:"/plugins/transformer-throttler.html"},{default:i(()=>[q]),_:1}),R,o(s,{to:"/plugins/auto-retry.html"},{default:i(()=>[N,P,S]),_:1}),L,o(s,{to:"/plugins/transformer-throttler.html"},{default:i(()=>[Y]),_:1}),z])])}const B=l(h,[["render",D],["__file","flood.html.vue"]]);export{B as default};
