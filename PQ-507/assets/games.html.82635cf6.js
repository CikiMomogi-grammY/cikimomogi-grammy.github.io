import{_ as l,r as o,o as u,c as r,b as a,a as s,w as i,d as n,e as c}from"./app.9837a88d.js";const d={},h=s("h1",{id:"games",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#games","aria-hidden":"true"},"#"),n(" Games")],-1),m=s("h2",{id:"introduction",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#introduction","aria-hidden":"true"},"#"),n(" Introduction")],-1),k=s("p",null,"Telegram Games is a very interesting feature and it is great fun to play with. What can you do with it? The answer is anything, any HTML5 game that you have developed you can provide to users on Telegram with the help of this feature. (Yes, this means that you will have to develop a real website-based game that is publicly accessible on the internet before you can integrate it into your Telegram bot.)",-1),g=s("h2",{id:"setting-up-a-game-with-your-bot-via-botfather",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#setting-up-a-game-with-your-bot-via-botfather","aria-hidden":"true"},"#"),n(" Setting Up a Game With Your Bot via @BotFather")],-1),b=n("For simplicity, let\u2019s assume that by now you must have set up a bot and a game associated with your bot on "),_={href:"https://t.me/BotFather",target:"_blank",rel:"noopener noreferrer"},v=n("@Bot"),y=s("wbr",null,null,-1),f=n("Father"),w=n(". If you haven\u2019t already, check out this "),x={href:"https://core.telegram.org/bots/games",target:"_blank",rel:"noopener noreferrer"},q=n("article"),G=n(" by the Telegram team."),T=s("blockquote",null,[s("p",null,"Note: We will only learn the bot side development. Developing the game is entirely up to the developer. All we need here is a link of the HTML5 game hosted on the internet.")],-1),I=s("h2",{id:"sending-the-game-via-a-bot",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#sending-the-game-via-a-bot","aria-hidden":"true"},"#"),n(" Sending the Game via a Bot")],-1),A=n("We can send the game in grammY via the "),B=s("code",null,[n("reply"),s("wbr"),n("With"),s("wbr"),n("Game")],-1),E=n(" method which takes the name of the game you created with BotFather as argument. Alternatively, we can also use the "),F=s("code",null,[n("api"),s("wbr"),n(".send"),s("wbr"),n("Game")],-1),W=n(" method (grammY provides all the official "),Y={href:"https://core.telegram.org/bots/api",target:"_blank",rel:"noopener noreferrer"},L=n("Bot API"),j=n(" methods). An advantage of using the "),N=s("code",null,[n("api"),s("wbr"),n(".send"),s("wbr"),n("Game")],-1),P=n(" method is you can specify the "),S=s("code",null,[n("chat"),s("wbr"),n(".id")],-1),C=n(" of a specific user to send it to."),R=c(`<ol><li><p>Sending Game via <code>reply<wbr>With<wbr>Game</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// We will be using the start command to invoke the game reply method.</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Pass the name of the game you created in BotFather, for example &quot;my_game&quot;.</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">replyWithGame</span><span class="token punctuation">(</span><span class="token string">&quot;my_game&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Sending a Game via <code>api<wbr>.send<wbr>Game</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// You can get the chat identifier of the user to send your game to with \`ctx.from.id\`.</span>
  <span class="token comment">// which gives you the chat identifier of the user who invoked the start command.</span>
  <span class="token keyword">const</span> chatId <span class="token operator">=</span> ctx<span class="token punctuation">.</span>from<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendGame</span><span class="token punctuation">(</span>chatid<span class="token punctuation">,</span> <span class="token string">&quot;my_game&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,1),D=n("Remember"),O=n(" that you can specify further options when sending messages by using the options object of type "),z=s("code",null,"Other",-1),V=n("."),H=n("You can also specify a custom "),K=n("inline keyboard"),M=n(" for the game to show buttons. By default, it will be sent with a button with name as "),Q=s("code",null,[n("Play my"),s("wbr"),n("_game")],-1),U=n(", where "),J=s("em",null,"my_game",-1),X=n(" is the name of your game."),Z=c(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Define a new inline keyboard. You can write any text to be shown</span>
<span class="token comment">// on the button, but make sure that the first button should always</span>
<span class="token comment">// be the play button!</span>

<span class="token keyword">const</span> keyboard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InlineKeyboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">game</span><span class="token punctuation">(</span><span class="token string">&quot;Start my_game&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Notice that we have used game() unlike a normal inline keyboard</span>
<span class="token comment">// where we use url() or text()</span>

<span class="token comment">// Via the \`replyWithGame\` method</span>
<span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">replyWithGame</span><span class="token punctuation">(</span><span class="token string">&quot;my_game&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> keyboard <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Via the \`api.sendGame\` method</span>
<span class="token keyword">await</span> ctx<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendGame</span><span class="token punctuation">(</span>chatId<span class="token punctuation">,</span> <span class="token string">&quot;my_game&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> keyboard <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="listening-to-the-callback-of-our-game-button" tabindex="-1"><a class="header-anchor" href="#listening-to-the-callback-of-our-game-button" aria-hidden="true">#</a> Listening to the Callback of Our Game Button</h2><p>For providing logic to the button when it is pressed, and to redirect our users to our game and many more, we listen to the event <code>callback<wbr>_query:<wbr>game<wbr>_short<wbr>_name</code> which tells us that a game button has been pressed by the user. All we need to do is:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Pass your game url here that should be already hosted on the web.</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;callback_query:game_short_name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">answerCallbackQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;your_game_url&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="our-final-code-should-look-something-like-this" tabindex="-1"><a class="header-anchor" href="#our-final-code-should-look-something-like-this" aria-hidden="true">#</a> Our Final Code Should Look Something Like This</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;callback_query:game_short_name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">answerCallbackQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;your_game_url&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">replyWithGame</span><span class="token punctuation">(</span><span class="token string">&quot;my_game&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    reply_markup<span class="token operator">:</span> keyboard<span class="token punctuation">,</span>
    <span class="token comment">// Or you can use the api method here, according to your needs.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),$=n("Remember to add proper "),nn=n("error handling"),sn=n(" to your bot before going live."),an=s("p",null,"We may extend this article in the future by further advanced sections and FAQ\u2019s, but this is already all you need to start your game in Telegram. Have fun playing! \u{1F47E}",-1);function en(tn,on){const p=o("AutotagPage"),e=o("ExternalLinkIcon"),t=o("RouterLink");return u(),r("div",null,[h,a(p,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),m,k,g,s("p",null,[b,s("a",_,[v,y,f,a(e)]),w,s("a",x,[q,a(e)]),G]),T,I,s("p",null,[A,B,E,F,W,s("a",Y,[L,a(e)]),j,N,P,S,C]),R,s("blockquote",null,[s("p",null,[a(t,{to:"/guide/basics.html#sending-messages"},{default:i(()=>[D]),_:1}),O,z,V])]),s("p",null,[H,a(t,{to:"/plugins/keyboard.html#inline-keyboards"},{default:i(()=>[K]),_:1}),M,Q,U,J,X]),Z,s("blockquote",null,[s("p",null,[$,a(t,{to:"/guide/errors.html"},{default:i(()=>[nn]),_:1}),sn])]),an])}const pn=l(d,[["render",en],["__file","games.html.vue"]]);export{pn as default};
