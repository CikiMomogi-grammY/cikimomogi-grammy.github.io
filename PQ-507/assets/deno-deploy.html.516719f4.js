import{_ as p,r as t,o as c,c as d,b as e,a as n,w as u,d as a,e as o}from"./app.9a621f1c.js";const r={},k=n("h1",{id:"hosting-deno-deploy",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#hosting-deno-deploy","aria-hidden":"true"},"#"),a(" Hosting: Deno Deploy")],-1),h=a("Halaman ini berisi panduan mengenai cara-cara meng-hosting bot di "),m={href:"https://deno.com/deploy",target:"_blank",rel:"noopener noreferrer"},b=a("Deno Deploy"),g=a("."),_=a("Perlu diperhatikan bahwa panduan ini hanya berlaku untuk pengguna Deno. Kamu diharuskan memiliki akun "),y={href:"https://github.com",target:"_blank",rel:"noopener noreferrer"},v=a("Git"),f=n("wbr",null,null,-1),w=a("Hub"),D=a(" untuk membuat akun "),j={href:"https://deno.com/deploy",target:"_blank",rel:"noopener noreferrer"},x=a("Deno Deploy"),q=a("."),P=n("p",null,"Deno Deploy cocok dipakai untuk bot yang sederhana. Selain itu, kamu harus tahu bahwa tidak semua fitur Deno tersedia untuk beberapa aplikasi\u2014termasuk bot kamu\u2014yang berjalan di Deno Deploy. Contohnya, file system di Deno Deploy tidak tersedia. Deno Deploy mirip seperti platform serverless lainnya, tetapi hanya didedikasikan untuk aplikasi Deno saja.",-1),R=a("Hasil dari tutorial disini dapat dilihat di "),E={href:"https://github.com/grammyjs/examples/tree/main/deno-deploy",target:"_blank",rel:"noopener noreferrer"},K=a("repositori bot kami"),L=a("."),M=n("h2",{id:"menyiapkan-kode",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#menyiapkan-kode","aria-hidden":"true"},"#"),a(" Menyiapkan Kode")],-1),H=a("Ingat! Kamu perlu "),I=a("menjalankan bot dengan webhooks"),T=a(", jadi kamu harus menggunakan "),U=n("code",null,[a("webhook"),n("wbr"),a("Callback")],-1),A=a(" alih-alih memanggil "),C=n("code",null,[a("bot"),n("wbr"),a(".start()")],-1),N=a(" di kodemu."),B=o(`<ol><li>Pastikan kamu meng-export object <code>Bot</code> di dalam sebuah file agar nantinya bisa di-import ketika ingin menjalankannya.</li><li>Buat sebuah file dengan nama <code>mod<wbr>.ts</code> atau <code>mod<wbr>.js</code>, ataupun nama lainnya sesuai dengan keinginanmu (tetapi kamu harus mengingatnya karena nanti file tersebut akan digunakan sebagai file deploy utama). File tersebut berisikan:</li></ol><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> serve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://deno.land/std@0.158.0/http/server.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> webhookCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://deno.land/x/grammy@v1.11.1/mod.ts&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Kamu mungkin perlu mengubah ini agar object bot-mu bisa di-import</span>
<span class="token keyword">import</span> bot <span class="token keyword">from</span> <span class="token string">&quot;./bot.ts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> handleUpdate <span class="token operator">=</span> <span class="token function">webhookCallback</span><span class="token punctuation">(</span>bot<span class="token punctuation">,</span> <span class="token string">&quot;std/http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">serve</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span>pathname<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> bot<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">handleUpdate</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kami menganjurkan kamu untuk menaruh handler di direktori rahasia alih-alih menempatkanya di root (<code>/</code>). Di contoh kali ini, kita menggunakan token bot (<code>/&lt;token bot&gt;</code>) sebagai direktori rahasianya.</p><h2 id="men-deploy-bot" tabindex="-1"><a class="header-anchor" href="#men-deploy-bot" aria-hidden="true">#</a> Men-deploy Bot</h2><h3 id="metode-1-menggunakan-github" tabindex="-1"><a class="header-anchor" href="#metode-1-menggunakan-github" aria-hidden="true">#</a> Metode 1: Menggunakan GitHub</h3><blockquote><p>Metode ini sangat direkomendasikan karena mudah untuk digunakan. Kelebihannya adalah Deno Deploy akan selalu memantau perubahan di repositori tempat kamu menaruh kode bot. Ketika terjadi perubahan, kode tersebut akan di-deploy secara otomatis ke versi yang lebih baru.</p></blockquote><ol><li>Buat sebuah repositori di GitHub, bisa dalam bentuk private ataupun publik.</li><li>Taruh kodemu di dalam repositori tersebut.</li></ol><blockquote><p>Direkomendasikan untuk mempunyai satu branch stabil dan branch lain untuk pengetesan supaya branch utama kamu terhindar dari hal-hal yang tidak diinginkan.</p></blockquote>`,8),G={start:"3"},z=a("Kunjungi "),S={href:"https://dash.deno.com/projects",target:"_blank",rel:"noopener noreferrer"},Y=a("dashboard Deno Deploy"),F=a("."),O=n("li",null,"Pilih \u201CNew Project\u201D, lalu pergi ke bagian \u201CDeploy from GitHub repository\u201D.",-1),V=n("li",null,"Pasang aplikasi GitHub di akun atau organisasimu, kemudian pilih repositori kode bot kamu berada.",-1),J=n("li",null,[a("Pilih branch dan file "),n("code",null,[a("mod"),n("wbr"),a(".ts")]),a(" yang akan di-deploy.")],-1),W=n("h3",{id:"metode-2-menggunakan-deployctl",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#metode-2-menggunakan-deployctl","aria-hidden":"true"},"#"),a(" Metode 2: Menggunakan "),n("code",null,"deployctl")],-1),Q=n("blockquote",null,[n("p",null,"Metode ini diperuntukkan kepada pengguna tingkat lanjut yang nantinya proyek akan di-deploy melalui command line atau GitHub Actions.")],-1),X=a("Kunjungi "),Z={href:"https://dash.deno.com/projects",target:"_blank",rel:"noopener noreferrer"},$=a("dashboard Deno Deploy"),nn=a("."),an=n("li",null,"Pilih \u201CNew Project\u201D, kemudian pilih \u201CEmpty Project\u201D.",-1),en=a("Pasang "),sn={href:"https://github.com/denoland/deployctl",target:"_blank",rel:"noopener noreferrer"},tn=n("code",null,"deployctl",-1),on=a("."),ln=a("Buat "),pn={href:"https://dash.deno.com/user/access-tokens",target:"_blank",rel:"noopener noreferrer"},cn=a("token akses"),dn=a(" baru."),un=n("li",null,"Jalankan dengan perintah:",-1),rn=o(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>deployctl deploy <span class="token parameter variable">--project</span> <span class="token operator">&lt;</span>project<span class="token operator">&gt;</span> ./mod.ts <span class="token parameter variable">--prod</span> <span class="token parameter variable">--token</span> <span class="token operator">&lt;</span>token<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),kn={start:"6"},hn=a("Untuk menyiapkan GitHub Actions, dapat merujuk ke "),mn={href:"https://github.com/denoland/deployctl/blob/main/action/README.md",target:"_blank",rel:"noopener noreferrer"},bn=a("sini"),gn=a("."),_n=o(`<h3 id="metode-3-menggunakan-url" tabindex="-1"><a class="header-anchor" href="#metode-3-menggunakan-url" aria-hidden="true">#</a> Metode 3: Menggunakan URL</h3><blockquote><p>Kamu memerlukan URL publik yang mengarah ke file <code>mod<wbr>.ts</code>-mu untuk menggunakan metode ini.</p></blockquote><ol><li>Buat proyek baru di Deno Deploy.</li><li>Pilih \u201CDeploy URL\u201D</li><li>Masukkan URL publik file <code>mod<wbr>.ts</code>-mu, lalu pilih \u201CDeploy\u201D.</li></ol><h3 id="catatan" tabindex="-1"><a class="header-anchor" href="#catatan" aria-hidden="true">#</a> Catatan</h3><p>Setelah mendapati bot-mu dapat berjalan, kamu harus melakukan konfigurasi pada pengaturan webhook untuk menggunakan URL bot-mu yang baru. Untuk melakukannya, kirim sebuah request ke</p><div class="language-markdown ext-md"><pre class="language-markdown"><code>https://api.telegram.org/bot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>token</span><span class="token punctuation">&gt;</span></span>/setWebhook?url=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Ganti <code>&lt;token&gt;</code> dengan token bot-mu, dan <code>&lt;url&gt;</code> dengan URL lengkap bot kamu.</p>`,7);function yn(vn,fn){const i=t("AutotagPage"),s=t("ExternalLinkIcon"),l=t("RouterLink");return c(),d("div",null,[k,e(i,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),n("p",null,[h,n("a",m,[b,e(s)]),g]),n("p",null,[_,n("a",y,[v,f,w,e(s)]),D,n("a",j,[x,e(s)]),q]),P,n("p",null,[R,n("a",E,[K,e(s)]),L]),M,n("blockquote",null,[n("p",null,[H,e(l,{to:"/id/guide/deployment-types.html#bagaimana-cara-menggunakan-webhook"},{default:u(()=>[I]),_:1}),T,U,A,C,N])]),B,n("ol",G,[n("li",null,[z,n("a",S,[Y,e(s)]),F]),O,V,J]),W,Q,n("ol",null,[n("li",null,[X,n("a",Z,[$,e(s)]),nn]),an,n("li",null,[en,n("a",sn,[tn,e(s)]),on]),n("li",null,[ln,n("a",pn,[cn,e(s)]),dn]),un]),rn,n("ol",kn,[n("li",null,[hn,n("a",mn,[bn,e(s)]),gn])]),_n])}const Dn=p(r,[["render",yn],["__file","deno-deploy.html.vue"]]);export{Dn as default};
