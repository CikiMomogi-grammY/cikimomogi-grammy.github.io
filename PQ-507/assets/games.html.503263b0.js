import{_ as u,r as t,o as l,c as r,b as s,a as n,w as c,d as a,e as i}from"./app.9837a88d.js";const d={},m=n("h1",{id:"juegos",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#juegos","aria-hidden":"true"},"#"),a(" Juegos")],-1),k=n("h2",{id:"introduccion",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#introduccion","aria-hidden":"true"},"#"),a(" Introducci\xF3n")],-1),b=n("p",null,"Telegram Games es una funci\xF3n muy interesante y muy divertida para jugar. \xBFQu\xE9 puedes hacer con ella? La respuesta es cualquier cosa, cualquier juego HTML5 que hayas desarrollado puedes ofrecerlo a los usuarios en Telegram con la ayuda de esta funci\xF3n. (S\xED, esto significa que tendr\xE1s que desarrollar un juego real basado en un sitio web que sea accesible p\xFAblicamente en Internet antes de poder integrarlo en tu bot de Telegram).",-1),g=n("h2",{id:"configurar-un-juego-con-tu-bot-via-botfather",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#configurar-un-juego-con-tu-bot-via-botfather","aria-hidden":"true"},"#"),a(" Configurar un juego con tu bot v\xEDa @BotFather")],-1),h=a("Para simplificar, vamos a suponer que a estas alturas debes haber configurado un bot y un juego asociado a tu bot en "),v={href:"https://t.me/BotFather",target:"_blank",rel:"noopener noreferrer"},_=a("@Bot"),y=n("wbr",null,null,-1),f=a("Father"),q=a(". Si a\xFAn no lo has hecho, consulta este "),j={href:"https://core.telegram.org/bots/games",target:"_blank",rel:"noopener noreferrer"},w=a("art\xEDculo"),x=a(" del equipo de Telegram."),T=n("blockquote",null,[n("p",null,"Nota: S\xF3lo aprenderemos el desarrollo del lado del bot. El desarrollo del juego depende enteramente del desarrollador. Todo lo que necesitamos aqu\xED es un enlace del juego HTML5 alojado en internet.")],-1),E=n("h2",{id:"enviando-el-juego-a-traves-de-un-bot",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#enviando-el-juego-a-traves-de-un-bot","aria-hidden":"true"},"#"),a(" Enviando el juego a trav\xE9s de un bot")],-1),P=a("Podemos enviar el juego en grammY a trav\xE9s del m\xE9todo "),I=n("code",null,[a("reply"),n("wbr"),a("With"),n("wbr"),a("Game")],-1),G=a(" que toma como argumento el nombre del juego creado con BotFather. Alternativamente, tambi\xE9n podemos utilizar el m\xE9todo "),z=n("code",null,[a("api"),n("wbr"),a(".send"),n("wbr"),a("Game")],-1),A=a(" (grammY proporciona todos los m\xE9todos oficiales de la "),C={href:"https://core.telegram.org/bots/api",target:"_blank",rel:"noopener noreferrer"},N=a("API del Bot"),B=a("). Una ventaja de usar el m\xE9todo "),D=n("code",null,[a("api"),n("wbr"),a(".send"),n("wbr"),a("Game")],-1),L=a(" es que puedes especificar el "),R=n("code",null,[a("chat"),n("wbr"),a(".id")],-1),F=a(" de un usuario espec\xEDfico al que enviarlo."),S=i(`<ol><li><p>Env\xEDo del juego a trav\xE9s de <code>reply<wbr>With<wbr>Game</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Usaremos el comando start para invocar el m\xE9todo de respuesta del juego.</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Pasa el nombre del juego que has creado en BotFather, por ejemplo &quot;my_game&quot;.</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">replyWithGame</span><span class="token punctuation">(</span><span class="token string">&quot;my_game&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Env\xEDo de un juego por medio de <code>api<wbr>.send<wbr>Game</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Puedes obtener el identificador de chat del usuario al que enviar tu juego con \`ctx.from.id\`.</span>
  <span class="token comment">// que te da el identificador de chat del usuario que invoc\xF3 el comando de inicio.</span>
  <span class="token keyword">const</span> chatId <span class="token operator">=</span> ctx<span class="token punctuation">.</span>from<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendGame</span><span class="token punctuation">(</span>chatid<span class="token punctuation">,</span> <span class="token string">&quot;my_game&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,1),Y=a("Recuerde"),O=a(" que puede especificar m\xE1s opciones al enviar mensajes utilizando el objeto de opciones de tipo "),W=n("code",null,"Other",-1),K=a("."),H=i(`<p>Tambi\xE9n puedes especificar un [inline keyboard] personalizado (/plugins/keyboard.md#inline-keyboards) para que el juego muestre los botones. Por defecto, se enviar\xE1 con un bot\xF3n con nombre como <code>Play my<wbr>_game</code>, donde <em>my_game</em> es el nombre de su juego.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Definir un nuevo teclado en l\xEDnea. Puedes escribir cualquier texto que se muestre</span>
<span class="token comment">// en el bot\xF3n, \xA1pero aseg\xFArese de que el primer bot\xF3n debe ser siempre</span>
<span class="token comment">// sea el bot\xF3n de jugar!</span>

<span class="token keyword">const</span> keyboard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InlineKeyboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">game</span><span class="token punctuation">(</span><span class="token string">&quot;Start my_game&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Observa que hemos utilizado game() a diferencia de un teclado en l\xEDnea normal</span>
<span class="token comment">// donde usamos url() o text()</span>

<span class="token comment">// A trav\xE9s del m\xE9todo \`replyWithGame\`</span>
<span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">replyWithGame</span><span class="token punctuation">(</span><span class="token string">&quot;my_game&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> keyboard <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A trav\xE9s del m\xE9todo \`api.sendGame\`</span>
<span class="token keyword">await</span> ctx<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendGame</span><span class="token punctuation">(</span>chatId<span class="token punctuation">,</span> <span class="token string">&quot;my_game&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> keyboard <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="escuchando-el-callback-de-nuestro-boton-de-juego" tabindex="-1"><a class="header-anchor" href="#escuchando-el-callback-de-nuestro-boton-de-juego" aria-hidden="true">#</a> Escuchando el Callback de nuestro bot\xF3n de juego</h2><p>Para dotar de l\xF3gica al bot\xF3n cuando es pulsado, y para redirigir a nuestros usuarios a nuestro juego y muchas cosas m\xE1s, escuchamos el evento <code>callback<wbr>_query:<wbr>game<wbr>_short<wbr>_name</code> que nos indica que un bot\xF3n de juego ha sido pulsado por el usuario. Todo lo que tenemos que hacer es</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Pasa aqu\xED la url de tu juego que debe estar ya alojado en la web.</span>

bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;callback_query:game_short_name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">answerCallbackQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;your_game_url&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="nuestro-codigo-final-deberia-ser-algo-asi" tabindex="-1"><a class="header-anchor" href="#nuestro-codigo-final-deberia-ser-algo-asi" aria-hidden="true">#</a> Nuestro c\xF3digo final deber\xEDa ser algo as\xED</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;callback_query:game_short_name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">answerCallbackQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;your_game_url&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">replyWithGame</span><span class="token punctuation">(</span><span class="token string">&quot;my_game&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    reply_markup<span class="token operator">:</span> keyboard<span class="token punctuation">,</span>
    <span class="token comment">// O puede utilizar el m\xE9todo api aqu\xED, seg\xFAn sus necesidades.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),V=a("Recuerda a\xF1adir un adecuado "),M=a("manejo de errores"),Q=a(" a tu bot antes de ponerlo en marcha."),U=n("p",null,"Puede que ampliemos este art\xEDculo en el futuro con m\xE1s secciones avanzadas y preguntas frecuentes, pero esto es ya todo lo que necesitas para empezar tu juego en Telegram. \xA1Divi\xE9rtete jugando! \u{1F47E}",-1);function J(X,Z){const p=t("AutotagPage"),e=t("ExternalLinkIcon"),o=t("RouterLink");return l(),r("div",null,[m,s(p,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),k,b,g,n("p",null,[h,n("a",v,[_,y,f,s(e)]),q,n("a",j,[w,s(e)]),x]),T,E,n("p",null,[P,I,G,z,A,n("a",C,[N,s(e)]),B,D,L,R,F]),S,n("blockquote",null,[n("p",null,[s(o,{to:"/es/guide/basics.html#env%C3%ADo-de-mensajes"},{default:c(()=>[Y]),_:1}),O,W,K])]),H,n("blockquote",null,[n("p",null,[V,s(o,{to:"/es/guide/errors.html"},{default:c(()=>[M]),_:1}),Q])]),U])}const nn=u(d,[["render",J],["__file","games.html.vue"]]);export{nn as default};
