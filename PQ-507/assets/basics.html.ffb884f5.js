import{_ as l,r as c,o as r,c as u,b as e,a as s,w as i,d as n,e as t}from"./app.9837a88d.js";const d={},m=s("h1",{id:"envio-y-recepcion-de-mensajes",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#envio-y-recepcion-de-mensajes","aria-hidden":"true"},"#"),n(" Env\xEDo y recepci\xF3n de mensajes")],-1),_=t(`<p>Tan pronto como inicies tu bot con <code>bot<wbr>.start()</code>, grammY suministrar\xE1 a tus oyentes los mensajes que los usuarios env\xEDen a tu bot. grammY tambi\xE9n proporciona m\xE9todos para responder f\xE1cilmente a estos mensajes.</p><h2 id="recepcion-de-mensajes" tabindex="-1"><a class="header-anchor" href="#recepcion-de-mensajes" aria-hidden="true">#</a> Recepci\xF3n de mensajes</h2><p>La forma m\xE1s f\xE1cil de escuchar los mensajes es a trav\xE9s de:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> ctx<span class="token punctuation">.</span>message<span class="token punctuation">;</span> <span class="token comment">// el mensaje</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sin embargo, tambi\xE9n hay otras opciones:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Maneja comandos, como /start.</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Compara el texto del mensaje con una cadena o una expresi\xF3n regular.</span>
bot<span class="token punctuation">.</span><span class="token function">hears</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">echo *(.+)?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),k=n("Puedes utilizar la funci\xF3n de autocompletar en tu editor de c\xF3digo para ver todas las opciones disponibles, o consultar "),h={href:"https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Composer",target:"_blank",rel:"noopener noreferrer"},b=n("todos los m\xE9todos"),g=n(" de la clase "),v=s("code",null,"Composer",-1),f=n("."),y=n("Leer m\xE1s"),x=n(" sobre el filtrado de tipos de mensajes espec\xEDficos con "),w=s("code",null,[n("bot"),s("wbr"),n(".on()")],-1),q=n("."),j=s("h2",{id:"envio-de-mensajes",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#envio-de-mensajes","aria-hidden":"true"},"#"),n(" Env\xEDo de mensajes")],-1),E=n("Todos los m\xE9todos que los bots pueden utilizar ("),T={href:"https://core.telegram.org/bots/api#available-methods",target:"_blank",rel:"noopener noreferrer"},M=n("lista importante"),z=n(") est\xE1n disponibles en el objeto "),L=s("code",null,[n("bot"),s("wbr"),n(".api")],-1),H=n("."),I=t(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Enviar un mensaje de texto al usuario 12345.</span>
<span class="token keyword">await</span> bot<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token number">12345</span><span class="token punctuation">,</span> <span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Opcionalmente, puedes pasar un objeto de opciones.</span>
<span class="token keyword">await</span> bot<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token number">12345</span><span class="token punctuation">,</span> <span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token comment">/* m\xE1s opciones */</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Obtener informaci\xF3n sobre el propio bot.</span>
<span class="token keyword">const</span> me <span class="token operator">=</span> <span class="token keyword">await</span> bot<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// etc</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),P=n("Cada m\xE9todo toma un objeto opcional de opciones de tipo "),R=s("code",null,"Other",-1),A=n(", que le permite establecer otras opciones para sus llamadas a la API. Estos objetos de opciones se corresponden exactamente con las opciones que puedes encontrar en la lista de m\xE9todos enlazada anteriormente. Tambi\xE9n puedes utilizar el autocompletado en tu editor de c\xF3digo para ver todas las opciones disponibles, o consultar "),C={href:"https://doc.deno.land/https://deno.land/x/grammy/mod.ts/~/Api",target:"_blank",rel:"noopener noreferrer"},Y=n("todos los m\xE9todos"),N=n(" de la clase "),V=s("code",null,"Api",-1),B=n(". El resto de esta p\xE1gina muestra algunos ejemplos para esto."),D=n("Tambi\xE9n, revisa la "),O=n("siguiente secci\xF3n"),S=n(" para aprender c\xF3mo el objeto context de un listener hace que el env\xEDo de mensajes sea un juego de ni\xF1os."),F=t(`<h2 id="enviando-mensajes-con-respuesta" tabindex="-1"><a class="header-anchor" href="#enviando-mensajes-con-respuesta" aria-hidden="true">#</a> Enviando Mensajes con Respuesta</h2><p>Puedes usar la funci\xF3n de respuesta de Telegram especificando el identificador del mensaje al que se va a responder usando <code>reply<wbr>_to<wbr>_message<wbr>_id</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">hears</span><span class="token punctuation">(</span><span class="token string">&quot;ping&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \`reply\` es un alias de \`sendMessage\` en el mismo chat (ver siguiente secci\xF3n).</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;pong&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// \`reply_to_message_id\` especifica la funci\xF3n de respuesta real.</span>
    reply_to_message_id<span class="token operator">:</span> ctx<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>message_id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),K=t("Tenga en cuenta que s\xF3lo el env\xEDo de un mensaje a trav\xE9s de <code>ctx<wbr>.reply</code> no **significa que usted est\xE1 respondiendo autom\xE1ticamente a cualquier cosa. En su lugar, debes especificar <code>reply<wbr>_to<wbr>_message<wbr>_id</code> para ello. La funci\xF3n <code>ctx<wbr>.reply</code> es s\xF3lo un alias de <code>ctx<wbr>.api<wbr>.send<wbr>Message</code>, ver la ",9),G=n("siguiente secci\xF3n"),U=n("."),J=s("h2",{id:"envio-de-mensajes-con-formato",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#envio-de-mensajes-con-formato","aria-hidden":"true"},"#"),n(" Env\xEDo de mensajes con formato")],-1),Q=n("Revisa la "),W={href:"https://core.telegram.org/bots/api#formatting-options",target:"_blank",rel:"noopener noreferrer"},X=n("secci\xF3n sobre opciones de formato"),Z=n(" en la Referencia de la API de Telegram Bot escrita por el equipo de Telegram."),$=n("Puedes enviar mensajes con texto en "),nn=s("strong",null,"negrita",-1),sn=n(" o "),en=s("em",null,"cursiva",-1),an=n(", usar URLs, y m\xE1s. Hay dos formas de hacerlo, como se describe en la "),tn={href:"https://core.telegram.org/bots/api#formatting-options",target:"_blank",rel:"noopener noreferrer"},on=n("secci\xF3n sobre opciones de formato"),cn=n(", a saber, Markdown y HTML."),pn=s("h3",{id:"markdown",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#markdown","aria-hidden":"true"},"#"),n(" Markdown")],-1),ln=n("Ver tambi\xE9n "),rn={href:"https://core.telegram.org/bots/api#markdownv2-style",target:"_blank",rel:"noopener noreferrer"},un=n("https://"),dn=s("wbr",null,null,-1),mn=n("core"),_n=s("wbr",null,null,-1),kn=n(".telegram"),hn=s("wbr",null,null,-1),bn=n(".org"),gn=s("wbr",null,null,-1),vn=n("/bots"),fn=s("wbr",null,null,-1),yn=n("/api"),xn=s("wbr",null,null,-1),wn=n("#markdownv2"),qn=s("wbr",null,null,-1),jn=n("-style"),En=t(`<p>Env\xEDa tu mensaje con markdown en el texto, y especifica <code>parse<wbr>_mode:<wbr> &quot;MarkdownV2&quot;</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> bot<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>
  <span class="token number">12345</span><span class="token punctuation">,</span>
  <span class="token string">&quot;*Hola\\\\!* Bienvenido a [grammY](https://grammy.dev)\\\\.&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> parse_mode<span class="token operator">:</span> <span class="token string">&quot;MarkdownV2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="html" tabindex="-1"><a class="header-anchor" href="#html" aria-hidden="true">#</a> HTML</h3>`,3),Tn=n("V\xE9ase tambi\xE9n "),Mn={href:"https://core.telegram.org/bots/api#html-style",target:"_blank",rel:"noopener noreferrer"},zn=n("https://"),Ln=s("wbr",null,null,-1),Hn=n("core"),In=s("wbr",null,null,-1),Pn=n(".telegram"),Rn=s("wbr",null,null,-1),An=n(".org"),Cn=s("wbr",null,null,-1),Yn=n("/bots"),Nn=s("wbr",null,null,-1),Vn=n("/api"),Bn=s("wbr",null,null,-1),Dn=n("#html"),On=s("wbr",null,null,-1),Sn=n("-style"),Fn=t(`<p>Env\xEDa tu mensaje con elementos HTML en el texto, y especifica <code>parse<wbr>_mode:<wbr> &quot;HTML&quot;</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> bot<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>
  <span class="token number">12345</span><span class="token punctuation">,</span>
  <span class="token string">&#39;&lt;b&gt;\xA1Hola!&lt;/b&gt; &lt;i&gt;Bienvenido&lt;/i&gt; to &lt;a href=&quot;https://grammy.dev&quot;&gt;grammY&lt;/a&gt;.&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> parse_mode<span class="token operator">:</span> <span class="token string">&quot;HTML&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="envio-de-archivos" tabindex="-1"><a class="header-anchor" href="#envio-de-archivos" aria-hidden="true">#</a> Env\xEDo de archivos</h2><p>El manejo de archivos se explica con mayor profundidad en una [secci\xF3n posterior] (./files.md#sending-files).</p><h2 id="forzar-respuesta" tabindex="-1"><a class="header-anchor" href="#forzar-respuesta" aria-hidden="true">#</a> Forzar respuesta</h2>`,5),Kn=n("Esto puede ser \xFAtil si tu bot est\xE1 funcionando en "),Gn={href:"https://core.telegram.org/bots#privacy-mode",target:"_blank",rel:"noopener noreferrer"},Un=n("modo privacidad"),Jn=n(" en los chats de grupo."),Qn=n("Cuando env\xEDes un mensaje, puedes hacer que el cliente de Telegram del usuario especifique autom\xE1ticamente el mensaje como respuesta. Esto significa que el usuario responder\xE1 al mensaje de tu bot autom\xE1ticamente (a menos que elimine la respuesta manualmente). Como resultado, tu bot recibir\xE1 el mensaje del usuario incluso cuando se ejecute en "),Wn={href:"https://core.telegram.org/bots#privacy-mode",target:"_blank",rel:"noopener noreferrer"},Xn=n("modo de privacidad"),Zn=n(" en los chats de grupo."),$n=t(`<p>Puedes forzar una respuesta as\xED:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>
    <span class="token string">&quot;\xA1Hola! S\xF3lo puedo leer los mensajes que me responden expl\xEDcitamente!&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// Haz que los clientes de Telegram muestren autom\xE1ticamente una interfaz de respuesta al usuario.</span>
      reply_markup<span class="token operator">:</span> <span class="token punctuation">{</span> force_reply<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function ns(ss,es){const p=c("AutotagPage"),a=c("ExternalLinkIcon"),o=c("RouterLink");return r(),u("div",null,[m,e(p,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),_,s("p",null,[k,s("a",h,[b,e(a)]),g,v,f]),s("blockquote",null,[s("p",null,[e(o,{to:"/es/guide/filter-queries.html"},{default:i(()=>[y]),_:1}),x,w,q])]),j,s("p",null,[E,s("strong",null,[s("a",T,[M,e(a)])]),z,L,H]),I,s("p",null,[P,R,A,s("a",C,[Y,e(a)]),N,V,B]),s("p",null,[D,e(o,{to:"/es/guide/context.html"},{default:i(()=>[O]),_:1}),S]),F,s("blockquote",null,[s("p",null,[K,e(o,{to:"/es/guide/context.html#acciones-disponibles"},{default:i(()=>[G]),_:1}),U])]),J,s("blockquote",null,[s("p",null,[Q,s("a",W,[X,e(a)]),Z])]),s("p",null,[$,nn,sn,en,an,s("a",tn,[on,e(a)]),cn]),pn,s("blockquote",null,[s("p",null,[ln,s("a",rn,[un,dn,mn,_n,kn,hn,bn,gn,vn,fn,yn,xn,wn,qn,jn,e(a)])])]),En,s("blockquote",null,[s("p",null,[Tn,s("a",Mn,[zn,Ln,Hn,In,Pn,Rn,An,Cn,Yn,Nn,Vn,Bn,Dn,On,Sn,e(a)])])]),Fn,s("blockquote",null,[s("p",null,[Kn,s("a",Gn,[Un,e(a)]),Jn])]),s("p",null,[Qn,s("a",Wn,[Xn,e(a)]),Zn]),$n])}const ts=l(d,[["render",ns],["__file","basics.html.vue"]]);export{ts as default};
