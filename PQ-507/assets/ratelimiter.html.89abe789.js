import{_ as r}from"./ratelimiter-role.f0e3b430.js";import{_ as k,r as i,o as d,c as m,b as s,a as n,w as t,d as a,e as c}from"./app.9a621f1c.js";const b={},g=n("h1",{id:"rate-limit-pengguna-ratelimiter",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#rate-limit-pengguna-ratelimiter","aria-hidden":"true"},"#"),a(" Rate Limit Pengguna ("),n("code",null,"ratelimiter"),a(")")],-1),h=a("ratelimiter adalah sebuah middleware yang dibuat dari framework bot grammY ataupun "),_={href:"https://github.com/telegraf/telegraf",target:"_blank",rel:"noopener noreferrer"},v=a("Telegraf"),y=a(" yang berfungsi untuk mengatur rate-limit pengguna bot. Simpelnya, plugin ini dapat membantu kamu dalam mencegah serangan spam ke bot. Supaya lebih paham, coba lihat ilustrasi berikut:"),f=c('<p><img src="'+r+'" alt="Peran ratelimiter dalam menangkis spam"></p><h2 id="bagaimana-cara-kerjanya" tabindex="-1"><a class="header-anchor" href="#bagaimana-cara-kerjanya" aria-hidden="true">#</a> Bagaimana Cara Kerjanya?</h2><p>Dalam keadaan normal, setiap request akan langsung diproses dan dijawab oleh bot kamu. Artinya, user bisa dengan mudah melakukan spam ke bot kamu. Mereka bisa saja mengirim banyak sekali request setiap detiknya, lalu bot kamu akan memproses semua request tersebut. Lantas, bagaimana cara kita menghentikannya? Solusinya adalah dengan menggunakan ratelimiter!</p><div class="custom-container warning"><p class="custom-container-title">Batasi User, Bukan Server Telegram!</p><p>Perlu diketahui, package ini <strong>TIDAK</strong> membatasi request yang datang dari server Telegram. Sebaliknya, ia memantau <code>from<wbr>.id</code> dari setiap request yang diterima lalu mengabaikannya begitu saja. Dengan begitu, server kamu tidak terbebani oleh pemrosesan pesan yang tidak perlu.</p></div><h2 id="opsi-pengaturan" tabindex="-1"><a class="header-anchor" href="#opsi-pengaturan" aria-hidden="true">#</a> Opsi Pengaturan</h2><p>Plugin ini menyediakan 5 opsi yang bisa diatur:</p>',6),w=c("<li><code>time<wbr>Frame</code>: Rentang waktu pemantauan request (bawaanya <code>1000</code> ms).</li><li><code>limit</code>: Jumlah request yang diperbolehkan untuk setiap <code>time<wbr>Frame</code> (bawaannya <code>1</code>).</li>",2),x=n("code",null,[a("storage"),n("wbr"),a("Client")],-1),j=a(": Jenis penyimpanan yang dipakai untuk menyimpan hasil pemantauan user beserta request-nya. Nilai bawaanya adalah "),R=n("code",null,[a("MEMORY"),n("wbr"),a("_STORE")],-1),S=a(" yang mana ia akan memakai in-memory "),T={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",target:"_blank",rel:"noopener noreferrer"},E=a("Map"),q=a(". Kamu juga bisa menggantinya dengan Redis, serta penyimpanan-penyimpanan lain yang telah dijelaskan di bagian "),C=n("a",{href:"#tentang-storageclient"},[a("Tentang storage"),n("wbr"),a("Client")],-1),K=a("."),M=n("li",null,[n("code",null,[a("on"),n("wbr"),a("Limit"),n("wbr"),a("Exceeded")]),a(": Sebuah function yang menentukan aksi apa yang akan dilakukan ketika user melampaui batas (bawaanya mengabaikan request tersebut).")],-1),O=n("li",null,[n("code",null,[a("key"),n("wbr"),a("Generator")]),a(": Sebuah function yang mengembalikan key unik yang dibuat untuk setiap user (bawaanya menggunakan "),n("code",null,[a("from"),n("wbr"),a(".id")]),a("). Key ini digunakan untuk mengidentifikasi user, oleh karenanya ia harus unik, spesifik untuk satu user, dan dalam format string.")],-1),B=n("h3",{id:"tentang-storageclient",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tentang-storageclient","aria-hidden":"true"},"#"),a(" Tentang "),n("code",null,[a("storage"),n("wbr"),a("Client")])],-1),D=n("code",null,[a("MEMORY"),n("wbr"),a("_STORE")],-1),I=a(" atau in-memory tracking cocok digunakan di sebagian besar bot. Namun, kalau kamu menggunakan cluster untuk bot kamu, maka kamu tidak bisa menggunakan penyimpanan in-memory secara efektif. Itulah kenapa kami juga menyediakan opsi Redis. Kamu bisa menerapkan Redis dengan "),G={href:"https://github.com/luin/ioredis",target:"_blank",rel:"noopener noreferrer"},L=a("ioredis"),P=a(" atau "),N={href:"https://deno.land/x/redis",target:"_blank",rel:"noopener noreferrer"},Y=a("redis"),A=a(" jika kamu menggunakan Deno. Semua driver Redis yang menggunakan method "),F=n("code",null,"incr",-1),z=a(" dan "),J=n("code",null,"pexpire",-1),H=a(" seharusnya juga dapat bekerja sama baiknya. ratelimiter tidak berorientasi pada driver."),V=c('<blockquote><p>Catatan: Kamu harus memiliki redis-server <strong>2.6.0</strong> ke atas untuk menggunakan penyimpanan Redis bersama dengan ratelimiter. Versi Redis yang di bawah itu tidak didukung.</p></blockquote><h2 id="cara-penggunaan" tabindex="-1"><a class="header-anchor" href="#cara-penggunaan" aria-hidden="true">#</a> Cara Penggunaan</h2><p>Ada dua cara dalam menggunakan ratelimiter:</p><ul><li>Menggunakan pengaturan bawaan (<a href="#konfigurasi-bawaan">Konfigurasi Bawaan</a>),</li><li>Menentukan object khusus yang berisi konfigurasimu (<a href="#konfigurasi-manual">Konfigurasi Manual</a>).</li></ul><h3 id="konfigurasi-bawaan" tabindex="-1"><a class="header-anchor" href="#konfigurasi-bawaan" aria-hidden="true">#</a> Konfigurasi Bawaan</h3><p>Berikut cara termudah dalam menggunakan ratelimiter dengan menerapkan perilaku bawaan:</p>',6),U=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Batasi menjadi 1 pesan per detik untuk setiap user."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),W=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Batasi menjadi 1 pesan per detik untuk setiap user."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Q=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_ratelimiter@v1.1.6/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Batasi menjadi 1 pesan per detik untuk setiap user."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),X=n("h3",{id:"konfigurasi-manual",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#konfigurasi-manual","aria-hidden":"true"},"#"),a(" Konfigurasi Manual")],-1),Z=n("p",null,[a("Seperti yang sudah disebutkan di awal, kamu bisa menentukan object "),n("code",null,"Options"),a(" ke method "),n("code",null,"limit()"),a(" untuk mengatur perilaku limiter.")],-1),$=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(" Redis "),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"ioredis"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" redis "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Redis"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// Hanya 3 pesan yang akan diproses dalam rentang waktu 2 detik."),a(`
    timeFrame`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"2000"),n("span",{class:"token punctuation"},","),a(`
    limit`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},'// "MEMORY_STORE" adalah nilai bawaanya.'),a(`
    `),n("span",{class:"token comment"},"// Kamu tidak perlu mengatur storageClient jika tidak ingin menggunakan Redis."),a(`
    storageClient`),n("span",{class:"token operator"},":"),a(" redis"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},"// Berikut akan dijalankan ketika limit terlampaui."),a(`
    `),n("span",{class:"token function-variable function"},"onLimitExceeded"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Tolong jangan kirim request berlebihan!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},'// Key ini harus berupa angka dalam format string, misal "123456".'),a(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),nn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(" Redis "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"ioredis"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" redis "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Redis"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// Hanya 3 pesan yang akan diproses dalam rentang waktu 2 detik."),a(`
    `),n("span",{class:"token literal-property property"},"timeFrame"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"2000"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token literal-property property"},"limit"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},'// "MEMORY_STORE" adalah nilai bawaanya.'),a(`
    `),n("span",{class:"token comment"},"// Kamu tidak perlu mengatur storageClient jika tidak ingin menggunakan Redis."),a(`
    `),n("span",{class:"token literal-property property"},"storageClient"),n("span",{class:"token operator"},":"),a(" redis"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},"// Berikut akan dijalankan ketika limit terlampaui."),a(`
    `),n("span",{class:"token function-variable function"},"onLimitExceeded"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Tolong jangan kirim request berlebihan!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},'// Key ini harus berupa angka dalam format string, misal "123456".'),a(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),an=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" connect "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/redis/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_ratelimiter@v1.1.6/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" redis "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token function"},"connect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// Hanya 3 pesan yang akan diproses dalam rentang waktu 2 detik."),a(`
    timeFrame`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"2000"),n("span",{class:"token punctuation"},","),a(`
    limit`),n("span",{class:"token operator"},":"),a(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},'// "MEMORY_STORE" adalah nilai bawaanya.'),a(`
    `),n("span",{class:"token comment"},"// Kamu tidak perlu mengatur storageClient jika tidak ingin menggunakan Redis."),a(`
    storageClient`),n("span",{class:"token operator"},":"),a(" redis"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},"// Berikut akan dijalankan ketika limit terlampaui."),a(`
    `),n("span",{class:"token function-variable function"},"onLimitExceeded"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Tolong jangan kirim request berlebihan!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`

    `),n("span",{class:"token comment"},'// Key ini harus berupa angka dalam format string, misal "123456".'),a(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token operator"},"?."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),sn=a("Seperti yang kamu lihat dari contoh di atas, setiap user hanya diperbolehkan mengirim 3 request setiap 2 detik. Jika user tersebut mengirim request melebihi batas yang telah kita tentukan, bot akan membalas dengan, "),tn=n("em",null,"\u201CTolong jangan kirim request berlebihan\u201D",-1),en=a(". Request tersebut kemudian akan diabaikan begitu saja karena kita tidak memanggil "),on=a("next()"),cn=a(" di middleware."),ln=n("blockquote",null,[n("p",null,[a("Catatan: Untuk menghindari flooding ke server Telegram, "),n("code",null,[a("on"),n("wbr"),a("Limit"),n("wbr"),a("Exceeded")]),a(" hanya akan dieksekusi sekali untuk setiap "),n("code",null,[a("time"),n("wbr"),a("Frame")]),a(".")])],-1),un=n("p",null,"Contoh penggunaan lainnya adalah dengan membatasi request yang datang dari sebuah chat, alih-alih dari user tertentu:",-1),pn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("type "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"group"'),a(),n("span",{class:"token operator"},"||"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("type "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"supergroup"'),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
        `),n("span",{class:"token comment"},'// Key ini harus berupa angka dalam format string, misal "123456".'),a(`
        `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
      `),n("span",{class:"token punctuation"},"}"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),rn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("type "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"group"'),a(),n("span",{class:"token operator"},"||"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("type "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"supergroup"'),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
        `),n("span",{class:"token comment"},'// Key ini harus berupa angka dalam format string, misal "123456".'),a(`
        `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
      `),n("span",{class:"token punctuation"},"}"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),kn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" limit "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_ratelimiter@v1.1.6/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),a(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
      `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("type "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"group"'),a(),n("span",{class:"token operator"},"||"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token operator"},"?."),a("type "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"supergroup"'),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
        `),n("span",{class:"token comment"},'// Key ini harus berupa angka dalam format string, misal "123456".'),a(`
        `),n("span",{class:"token keyword"},"return"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("chat"),n("span",{class:"token punctuation"},"."),a("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
      `),n("span",{class:"token punctuation"},"}"),a(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),dn=n("p",null,[a("Dari contoh di atas, kita menggunakan "),n("code",null,[a("chat"),n("wbr"),a(".id")]),a(" sebagai key unik untuk melakukan rate-limit.")],-1),mn=n("h2",{id:"ringkasan-plugin",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ringkasan-plugin","aria-hidden":"true"},"#"),a(" Ringkasan Plugin")],-1),bn=n("li",null,[a("Nama: "),n("code",null,"ratelimiter")],-1),gn=a("Sumber: "),hn={href:"https://github.com/grammyjs/ratelimiter",target:"_blank",rel:"noopener noreferrer"},_n=a("https://"),vn=n("wbr",null,null,-1),yn=a("github"),fn=n("wbr",null,null,-1),wn=a(".com"),xn=n("wbr",null,null,-1),jn=a("/grammyjs"),Rn=n("wbr",null,null,-1),Sn=a("/ratelimiter"),Tn=a("Referensi: "),En={href:"https://doc.deno.land/https://deno.land/x/grammy_ratelimiter/mod.ts",target:"_blank",rel:"noopener noreferrer"},qn=c("https://<wbr>doc<wbr>.deno<wbr>.land<wbr>/https://<wbr>deno<wbr>.land<wbr>/x<wbr>/grammy<wbr>_ratelimiter<wbr>/mod<wbr>.ts",23);function Cn(Kn,Mn){const u=i("AutotagPage"),o=i("ExternalLinkIcon"),e=i("CodeGroupItem"),l=i("CodeGroup"),p=i("RouterLink");return d(),m("div",null,[g,s(u,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),n("p",null,[h,n("a",_,[v,s(o)]),y]),f,n("ul",null,[w,n("li",null,[x,j,R,S,n("a",T,[E,s(o)]),q,C,K]),M,O]),B,n("p",null,[D,I,n("a",G,[L,s(o)]),P,n("a",N,[Y,s(o)]),A,F,z,J,H]),V,s(l,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[U]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[W]),_:1}),s(e,{title:"Deno"},{default:t(()=>[Q]),_:1})]),_:1}),X,Z,s(l,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[$]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[nn]),_:1}),s(e,{title:"Deno"},{default:t(()=>[an]),_:1})]),_:1}),n("p",null,[sn,tn,en,s(p,{to:"/id/guide/middleware.html#middleware-stack"},{default:t(()=>[on]),_:1}),cn]),ln,un,s(l,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[pn]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[rn]),_:1}),s(e,{title:"Deno"},{default:t(()=>[kn]),_:1})]),_:1}),dn,mn,n("ul",null,[bn,n("li",null,[gn,n("a",hn,[_n,vn,yn,fn,wn,xn,jn,Rn,Sn,s(o)])]),n("li",null,[Tn,n("a",En,[qn,s(o)])])])])}const Dn=k(b,[["render",Cn],["__file","ratelimiter.html.vue"]]);export{Dn as default};
