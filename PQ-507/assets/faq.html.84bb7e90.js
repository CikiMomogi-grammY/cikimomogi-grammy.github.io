import{_ as h,r,o as l,c as u,b as o,a as t,w as a,d as e,e as i}from"./app.9837a88d.js";const c={},_=t("h1",{id:"faq",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#faq","aria-hidden":"true"},"#"),e(" FAQ")],-1),p=t("p",null,[e("Here is a collection of frequently asked questions regarding "),t("a",{href:"#why-am-i-getting-this-error"},"common errors"),e(" and "),t("a",{href:"#questions-about-deno"},"Deno things"),e(".")],-1),m=e("If this FAQ does not answer your question, you should also have a look at the "),f={href:"https://core.telegram.org/bots/faq",target:"_blank",rel:"noopener noreferrer"},b=e("Bot FAQ"),g=e(" written by the Telegram team."),y=t("h2",{id:"why-am-i-getting-this-error",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#why-am-i-getting-this-error","aria-hidden":"true"},"#"),e(" Why Am I Getting This Error?")],-1),w=t("h3",{id:"_400-bad-request-cannot-parse-entities",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_400-bad-request-cannot-parse-entities","aria-hidden":"true"},"#"),e(" 400 Bad Request: Cannot parse entities")],-1),k=e("You are sending a message with formatting, i.e. you\u2019re setting "),x=t("code",null,[e("parse"),t("wbr"),e("_mode")],-1),T=e(" when sending a message. However, your formatting is broken, so Telegram does not know how to parse it. You should re-read the "),q={href:"https://core.telegram.org/bots/api#formatting-options",target:"_blank",rel:"noopener noreferrer"},I=e("section about formatting"),v=e(" in the Telegram docs. The byte offset that is mentioned in the error message will tell you where exactly the error is in your string."),Y=t("div",{class:"custom-container tip"},[t("p",{class:"custom-container-title"},"Passing entities instead of formatting"),t("p",null,[e("You can pre-parse the entities for Telegram if you want, and specify "),t("code",null,"entities"),e(" when sending your message. Your message text could then be a regular string. That way, you don\u2019t have to worry about escaping weird characters. This may look like it needs more code, but in fact it is the far more reliable and fool-proof solution to this problem.")])],-1),j=t("h3",{id:"_401-unauthorized",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_401-unauthorized","aria-hidden":"true"},"#"),e(" 401 Unauthorized")],-1),A=e("Your bot token is wrong. Maybe you think it\u2019s right. It is not. Talk to "),D={href:"https://t.me/BotFather",target:"_blank",rel:"noopener noreferrer"},N=e("@Bot"),B=t("wbr",null,null,-1),E=e("Father"),F=e(" to see what your token is."),C=i('<h3 id="_403-forbidden-bot-was-blocked-by-the-user" tabindex="-1"><a class="header-anchor" href="#_403-forbidden-bot-was-blocked-by-the-user" aria-hidden="true">#</a> 403 Forbidden: bot was blocked by the user</h3><p>You probably tried to send a message to a user and then you ran into this issue.</p><p>When a user blocks your bot, you are no able to send messages to them or interact with them in any other way (except if your bot was invited to a group chat where the user is a member). Telegram does this to protect their users. You cannot do anything about it.</p><p>You can either:</p><ul><li>Handle the error and for example delete the user\u2019s data from your database.</li><li>Ignore the error.</li><li>Listen for <code>my<wbr>_chat<wbr>_member</code> updates via <code>bot<wbr>.on(&quot;my<wbr>_chat<wbr>_member&quot;)</code> in order to be notified when the user blocks your bot. Hint: Compare the <code>status</code> fields of the old and the new chat member.</li></ul><h3 id="_404-not-found" tabindex="-1"><a class="header-anchor" href="#_404-not-found" aria-hidden="true">#</a> 404 Not found</h3>',6),R=e("If this happens while starting your bot, then your bot token is wrong. Talk to "),z={href:"https://t.me/BotFather",target:"_blank",rel:"noopener noreferrer"},P=e("@Bot"),L=t("wbr",null,null,-1),H=e("Father"),S=e(" to see what your token is."),M=e("If your bot works fine most of the time, but then suddenly you\u2019re getting a 404, then you\u2019re doing something very funky. You can come ask us in the "),K={href:"https://t.me/grammyjs",target:"_blank",rel:"noopener noreferrer"},O=e("group chat"),Q=e(" (or the "),U={href:"https://t.me/grammyjs_ru",target:"_blank",rel:"noopener noreferrer"},V=e("Russian"),W=t("wbr",null,null,-1),G=e("-speaking group chat"),X=e(")."),J=t("h3",{id:"_409-conflict-terminated-by-other-getupdates-request",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_409-conflict-terminated-by-other-getupdates-request","aria-hidden":"true"},"#"),e(" 409 Conflict: terminated by other getUpdates request")],-1),Z=t("p",null,"You are accidentally running your bot twice on long polling. You can only run one instance of your bot.",-1),$=e("If you think that you only run your bot once, you can just revoke the bot token. That will stop all other instances. Talk to "),ee={href:"https://t.me/BotFather",target:"_blank",rel:"noopener noreferrer"},te=e("@Bot"),oe=t("wbr",null,null,-1),ne=e("Father"),se=e(" to do this."),re=i('<h3 id="_429-too-many-requests-retry-after-x" tabindex="-1"><a class="header-anchor" href="#_429-too-many-requests-retry-after-x" aria-hidden="true">#</a> 429: Too Many Requests: retry after X</h3><p>Congratulations! You ran into an error that is among the most difficult ones to fix.</p><p>There are two possible scenarios:</p><p><strong>One:</strong> Your bot does not have many users. In that case, you are just spamming the Telegram servers by sending too many requests. Solution: don\u2019t do that! You should seriously think about how to reduce the number of API calls substantially.</p><p><strong>Two:</strong> Your bot is getting very popular and it has a lot of users (hundreds of thousands). You have already made sure to use the minimum number of API calls for the most common operations of your bot, and <em>still</em> you\u2019re running into these errors (called flood wait).</p><p>There are a few things you can do:</p>',6),ae=e("Read "),ie=e("this article in the docs"),de=e(" to gain a basic understanding of the situation."),he=e("Use the "),le=t("code",null,[e("transformer"),t("wbr"),e("-throttler")],-1),ue=e(" plugin"),ce=e("."),_e=e("Use the "),pe=t("code",null,[e("auto"),t("wbr"),e("-retry")],-1),me=e(" plugin"),fe=e("."),be=e("Come ask us in the "),ge={href:"https://t.me/grammyjs",target:"_blank",rel:"noopener noreferrer"},ye=e("group chat"),we=e(" for help. We have experienced people there."),ke=t("li",null,"It is possible to ask Telegram to increase the limits, but this is very unlikely to happen if you did not do steps 1-3 first.",-1),xe=i('<h3 id="cannot-find-type-definition-file-for-node-fetch" tabindex="-1"><a class="header-anchor" href="#cannot-find-type-definition-file-for-node-fetch" aria-hidden="true">#</a> Cannot find type definition file for \u2018node-fetch\u2019</h3><p>This is the result of some missing type declarations.</p><p>The recommended way to fix this is to set <code>skip<wbr>Lib<wbr>Check</code> to <code>true</code> in your TypeScript compile options.</p><p>If you are sure that you need this option to be kept to <code>false</code>, you can instead install the missing type definitions by running <code>npm i <wbr>-D @types<wbr>/node<wbr>-fetch@2</code>.</p><h2 id="questions-about-deno" tabindex="-1"><a class="header-anchor" href="#questions-about-deno" aria-hidden="true">#</a> Questions About Deno</h2><h3 id="why-do-you-support-deno" tabindex="-1"><a class="header-anchor" href="#why-do-you-support-deno" aria-hidden="true">#</a> Why do you support Deno?</h3><p>Some important reasons why we like Deno more than Node.js:</p><ul><li>It\u2019s simpler and faster to get started.</li><li>The tooling is substantially better.</li><li>It natively executes TypeScript.</li><li>No need to maintain <code>package<wbr>.json</code> or <code>node<wbr>_modules</code>.</li><li>It has a reviewed standard library.</li></ul>',8),Te=e("Deno was founded by Ryan Dahl\u2014the same person that invented Node.js. He summarized his 10 regrets about Node.js in "),qe={href:"https://youtu.be/M3BM9TB-8yA",target:"_blank",rel:"noopener noreferrer"},Ie=e("this video"),ve=e("."),Ye=t("p",null,"grammY itself is Deno-first, and it is backported to support Node.js equally well.",-1);function je(Ae,De){const d=r("AutotagPage"),n=r("ExternalLinkIcon"),s=r("RouterLink");return l(),u("div",null,[_,o(d,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),p,t("p",null,[m,t("a",f,[b,o(n)]),g]),y,w,t("p",null,[k,x,T,t("a",q,[I,o(n)]),v]),Y,j,t("p",null,[A,t("a",D,[N,B,E,o(n)]),F]),C,t("p",null,[R,t("a",z,[P,L,H,o(n)]),S]),t("p",null,[M,t("a",K,[O,o(n)]),Q,t("a",U,[V,W,G,o(n)]),X]),J,Z,t("p",null,[$,t("a",ee,[te,oe,ne,o(n)]),se]),re,t("ol",null,[t("li",null,[ae,o(s,{to:"/advanced/flood.html"},{default:a(()=>[ie]),_:1}),de]),t("li",null,[he,o(s,{to:"/plugins/transformer-throttler.html"},{default:a(()=>[le,ue]),_:1}),ce]),t("li",null,[_e,o(s,{to:"/plugins/auto-retry.html"},{default:a(()=>[pe,me]),_:1}),fe]),t("li",null,[be,t("a",ge,[ye,o(n)]),we]),ke]),xe,t("blockquote",null,[t("p",null,[Te,t("a",qe,[Ie,o(n)]),ve])]),Ye])}const Be=h(c,[["render",je],["__file","faq.html.vue"]]);export{Be as default};
