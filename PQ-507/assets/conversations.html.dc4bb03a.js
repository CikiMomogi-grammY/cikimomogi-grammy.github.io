import{_ as r,r as u,o as k,c as d,b as s,a as n,w as t,d as a,e as o}from"./app.9837a88d.js";const m={},b=n("h1",{id:"percakapan-conversations",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#percakapan-conversations","aria-hidden":"true"},"#"),a(" Percakapan ("),n("code",null,"conversations"),a(")")],-1),g=n("p",null,"Membuat interaksi percakapan dengan mudah.",-1),v=n("h2",{id:"pengenalan",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pengenalan","aria-hidden":"true"},"#"),a(" Pengenalan")],-1),h=n("p",null,"Sebagian besar chat mengandung lebih dari satu pesan. (ya iyalah \u{1F644})",-1),y=n("p",null,[a("Contohnya, bot kamu sedang mengajukan sebuah pertanyaan lalu menunggu jawaban dari seorang user. Kegiatan tanya jawab tersebut bisa jadi dilakukan beberapa kali sehingga terjadi sebuah "),n("strong",null,"percakapan"),a(".")],-1),f=a("Seperti yang sudah kita pelajari di materi sebelumnya, "),w=a("middleware"),_=a(" hanya bisa memproses satu "),x=a("context object"),j=a(" untuk setiap handler. Artinya, setiap pesan yang masuk selalu diproses secara terpisah. Oleh sebab itu, melakukan sesuatu seperti \u201CPeriksa 3 pesan sebelumnya\u201D atau semacamnya sulit dilakukan."),C=o(`<p><strong>Plugin ini hadir untuk menyelesaikan permasalahan tersebut.</strong> Ia mampu membuat dan merangkai sebuah percakapan dengan cara yang sangat fleksibel.</p><p>Sebagian besar framework bot di luar sana mengharuskan kamu membuat object konfigurasi berskala besar dengan berbagai macam langkah, tahapan, mantra sihir, kayang dan hal-hal lain yang kamu miliki. Ini akan menghasilkan banyak sekali kode boilerplate yang membuatnya semakin sulit untuk dimengerti. <strong>Plugin ini tidak bekerja dengan cara seperti itu.</strong></p><p>Sebaliknya, dengan plugin ini, kamu hanya perlu membuat sebuah function JavaScript biasa yang menentukan bagaimana suatu percakapan akan berlangsung. Segera setelah bot dan user memulai percakapan, function tersebut akan dieksekusi statement demi statement.</p><p>(Sejujurnya, itu bukan cara kerja sebenarnya dari plugin ini. Tetapi akan jauh lebih mudah dibayangkan dengan cara seperti itu! Kenyataanya, function tersebut akan dieksekusi dengan cara yang sedikit berbeda. Kita akan membahasnya <a href="#menunggu-update">nanti</a>.)</p><h2 id="contoh-sederhana" tabindex="-1"><a class="header-anchor" href="#contoh-sederhana" aria-hidden="true">#</a> Contoh Sederhana</h2><p>Sebelum kita membahas lebih dalam bagaimana cara membuat percakapan, silahkan lihat bentuknya terlebih dahulu di contoh singkat JavaScript berikut:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">greeting</span><span class="token punctuation">(</span><span class="token parameter">conversation<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Halo! Siapa nama kamu?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> conversation<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Selamat datang di chat, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>message<span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Di percapakan tersebut, pertama-tama bot akan menyapa user lalu menanyakan nama mereka. Kemudian ia akan menunggu user tersebut mengirimkan namanya. Terakhir, bot akan menyambut user dengan menyebut nama mereka.</p><p>Mudah, bukan? Sekarang mari kita lihat cara pembuatannya!</p><h2 id="conversation-builder-function" tabindex="-1"><a class="header-anchor" href="#conversation-builder-function" aria-hidden="true">#</a> Conversation Builder Function</h2><p>Pertama-tama, mari import beberapa hal.</p>`,11),S=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"Conversation"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"ConversationFlavor"),n("span",{class:"token punctuation"},","),a(`
  conversations`),n("span",{class:"token punctuation"},","),a(`
  createConversation`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/conversations"'),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),M=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(`
  conversations`),n("span",{class:"token punctuation"},","),a(`
  createConversation`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/conversations"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),q=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"Conversation"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"ConversationFlavor"),n("span",{class:"token punctuation"},","),a(`
  conversations`),n("span",{class:"token punctuation"},","),a(`
  createConversation`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_conversations@v1.0.3/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=o(`<p>Sekarang, kita bisa mendefinisikan interface conversation.</p><p>Elemen utama sebuah conversation adalah sebuah function yang memiliki dua argument. Kita bisa menyebutnya sebagai <em>conversation builder function</em>.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">greeting</span><span class="token punctuation">(</span><span class="token parameter">conversation<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: buat percakapannya</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mari kita lihat apa sebenarnya kedua parameter tersebut.</p>`,4),T=n("strong",null,"Parameter kedua",-1),A=a(" tidak terlalu menarik, ia hanyalah sebuah context object biasa. Seperti biasanya, ia dinamai dengan "),P=n("code",null,"ctx",-1),K=a(" dan menggunakan "),B=a("custom context type"),F=a(" buatanmu (misalnya "),J=n("code",null,[a("My"),n("wbr"),a("Context")],-1),D=a("). Plugin conversations meng-export sebuah "),O=a("context flavor"),E=a(" bernama "),L=n("code",null,[a("Conversation"),n("wbr"),a("Flavor")],-1),N=a("."),R=n("strong",null,"Parameter pertama",-1),H=a(" adalah elemen utama dari plugin ini. Ia bisanya dinamakan dengan "),G=n("code",null,"conversation",-1),z=a(" dan memiliki type "),U=n("code",null,"Conversation",-1),$=a(" ("),Y={href:"https://doc.deno.land/https://deno.land/x/grammy_conversations/mod.ts/~/Conversation",target:"_blank",rel:"noopener noreferrer"},V=a("referensi API"),Q=a("). Ia berfungsi untuk mengontrol suatu percakapan, seperti menunggu input dari user, dsb. Type "),W=n("code",null,"Conversation",-1),X=a(" mengharapkan "),Z=a("custom context type"),nn=a(" kamu sebagai sebuah type parameter, sehingga kamu akan sering menggunakan "),an=n("code",null,[a("Conversation<My"),n("wbr"),a("Context>")],-1),sn=a("."),tn=o(`<p>Di TypeScript, conversation builder function-mu akan terlihat seperti ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyContext</span> <span class="token operator">=</span> Context <span class="token operator">&amp;</span> ConversationFlavor<span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyConversation</span> <span class="token operator">=</span> Conversation<span class="token operator">&lt;</span>MyContext<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">greeting</span><span class="token punctuation">(</span>conversation<span class="token operator">:</span> MyConversation<span class="token punctuation">,</span> ctx<span class="token operator">:</span> MyContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: buat percakapannya</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sekarang, kamu bisa menentukan alur dari percakapannya di dalam conversation builder function. Sebelum membahas fitur-fitur dari plugin ini, mari kita lihat satu contoh lain yang lebih kompleks dibandingkan dengan <a href="#contoh-sederhana">contoh sederhana</a> di atas.</p>`,3),en=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"movie"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Berapa banyak film favorit yang kamu punya?"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" count "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),a("form"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"number"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" movies"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"for"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),a(" i "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),a(" i "),n("span",{class:"token operator"},"<"),a(" count"),n("span",{class:"token punctuation"},";"),a(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Beritahu aku film yang ke-"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("i "),n("span",{class:"token operator"},"+"),a(),n("span",{class:"token number"},"1"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token keyword"},"const"),a(" titleCtx "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitFor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'":text"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    movies`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),a("titleCtx"),n("span",{class:"token punctuation"},"."),a("msg"),n("span",{class:"token punctuation"},"."),a("text"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Ini daftar film favorit kamu!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  movies`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a("movies"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),a("m"),n("span",{class:"token punctuation"},","),a(" i"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("i "),n("span",{class:"token operator"},"+"),a(),n("span",{class:"token number"},"1"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},". "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("m"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\\n"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),on=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"movie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Berapa banyak film favorit yang kamu punya?"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" count "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),a("form"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"number"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" movies "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"for"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),a(" i "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),a(" i "),n("span",{class:"token operator"},"<"),a(" count"),n("span",{class:"token punctuation"},";"),a(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Beritahu aku film yang ke-"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("i "),n("span",{class:"token operator"},"+"),a(),n("span",{class:"token number"},"1"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"!"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token keyword"},"const"),a(" titleCtx "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitFor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'":text"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    movies`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),a("titleCtx"),n("span",{class:"token punctuation"},"."),a("msg"),n("span",{class:"token punctuation"},"."),a("text"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Ini daftar film favorit kamu!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  movies`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a("movies"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("m"),n("span",{class:"token punctuation"},","),a(" i")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("i "),n("span",{class:"token operator"},"+"),a(),n("span",{class:"token number"},"1"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},". "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),a("m"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\\n"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),cn=n("p",null,"Bisakah kamu tebak bagaimana hasilnya?",-1),pn=n("h2",{id:"menginstal-dan-memasuki-sebuah-percakapan",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#menginstal-dan-memasuki-sebuah-percakapan","aria-hidden":"true"},"#"),a(" Menginstal dan Memasuki Sebuah Percakapan")],-1),un=a("Untuk menggunakan plugin conversations, kamu "),ln=n("strong",null,"diharuskan",-1),rn=a(" memasang "),kn=a("plugin session"),dn=a(". Selain itu, plugin conversations itu sendiri harus diinstal terlebih dahulu sebelum kamu menambahkan masing-masing percakapan ke bot."),mn=o(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Instal plugin session.</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">initial</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// untuk saat ini kembalikan object kosong</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Instal plugin conversation.</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">conversations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Selanjutnya, kamu bisa menginstal conversation builder function sebagai middleware di object bot kamu dengan cara membungkusnya di dalam <code>create<wbr>Conversation</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createConversation</span><span class="token punctuation">(</span>greeting<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Sekarang, karena conversation sudah ditambahkan ke bot, maka kamu bisa memasuki conversation tersebut dari handler manapun. Pastikan untuk menggunakan <code>await</code> untuk semua method di <code>ctx<wbr>.conversation</code> agar kode kamu bisa berjalan dengan baik.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>conversation<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token string">&quot;greeting&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Segera setelah user mengirim <code>/start</code> ke bot, conversation untuk handler tersebut akan dijalankan. Context object terkait akan diteruskan ke conversation builder function sebagai argumen kedua. Contohnya, jika kamu membuat conversation dengan <code>await ctx<wbr>.reply(ctx<wbr>.message<wbr>.text)</code>, ia akan memiliki update yang di dalamnya terdapat <code>/start</code>.</p><div class="custom-container tip"><p class="custom-container-title">Mengubah Conversation Identifier</p><p>Secara bawaan, kamu diharuskan mengisi nama function ke <code>ctx<wbr>.conversation<wbr>.enter()</code>. Jika kamu memilih untuk menggunakan identifier yang berbeda, kamu bisa melakukannya dengan cara seperti ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createConversation</span><span class="token punctuation">(</span>greeting<span class="token punctuation">,</span> <span class="token string">&quot;nama-baru&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Sehingga, kamu bisa memasuki conversation dengan cara seperti ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>conversation<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token string">&quot;nama-baru&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>Hasil akhir kode kamu kurang lebih terlihat seperti ini:</p>`,8),bn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" Context"),n("span",{class:"token punctuation"},","),a(" session "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"grammy"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"Conversation"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"ConversationFlavor"),n("span",{class:"token punctuation"},","),a(`
  conversations`),n("span",{class:"token punctuation"},","),a(`
  createConversation`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"@grammyjs/conversations"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyContext"),a(),n("span",{class:"token operator"},"="),a(" Context "),n("span",{class:"token operator"},"&"),a(" ConversationFlavor"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyConversation"),a(),n("span",{class:"token operator"},"="),a(" Conversation"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},[a("Bot"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token function-variable function"},"initial"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"conversations"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token doc-comment comment"},"/** Tentukan percakapannya */"),a(`
`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"greeting"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// TODO: buat percakapannya"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createConversation"),n("span",{class:"token punctuation"},"("),a("greeting"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"start"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},'// Masuk ke function "greeting" yang sudah kamu'),a(`
  `),n("span",{class:"token comment"},"// deklarasikan di atas (baris ke-18)"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"greeting"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),gn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" Context"),n("span",{class:"token punctuation"},","),a(" session "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"grammy"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(`
  conversations`),n("span",{class:"token punctuation"},","),a(`
  createConversation`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/conversations"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Bot"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token function-variable function"},"initial"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"conversations"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token doc-comment comment"},"/** Tentukan percakapannya */"),a(`
`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"greeting"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// TODO: buat percakapannya"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createConversation"),n("span",{class:"token punctuation"},"("),a("greeting"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"start"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},'// Masuk ke function "greeting" yang sudah kamu'),a(`
  `),n("span",{class:"token comment"},"// deklarasikan di atas (baris ke-13)"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"greeting"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),vn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(" Bot"),n("span",{class:"token punctuation"},","),a(" Context"),n("span",{class:"token punctuation"},","),a(" session "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy@v1.11.1/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"import"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"Conversation"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"ConversationFlavor"),n("span",{class:"token punctuation"},","),a(`
  conversations`),n("span",{class:"token punctuation"},","),a(`
  createConversation`),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token keyword"},"from"),a(),n("span",{class:"token string"},'"https://deno.land/x/grammy_conversations@v1.0.3/mod.ts"'),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyContext"),a(),n("span",{class:"token operator"},"="),a(" Context "),n("span",{class:"token operator"},"&"),a(" ConversationFlavor"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token keyword"},"type"),a(),n("span",{class:"token class-name"},"MyConversation"),a(),n("span",{class:"token operator"},"="),a(" Conversation"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token keyword"},"const"),a(" bot "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},[a("Bot"),n("span",{class:"token operator"},"<"),a("MyContext"),n("span",{class:"token operator"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"session"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token function-variable function"},"initial"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"conversations"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token doc-comment comment"},"/** Tentukan percakapannya */"),a(`
`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"greeting"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// TODO: buat percakapannya"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createConversation"),n("span",{class:"token punctuation"},"("),a("greeting"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"start"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},'// Masuk ke function "greeting" yang sudah kamu'),a(`
  `),n("span",{class:"token comment"},"// deklarasikan di atas (baris ke-18)"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"greeting"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),hn=n("h2",{id:"meninggalkan-sebuah-percakapan",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#meninggalkan-sebuah-percakapan","aria-hidden":"true"},"#"),a(" Meninggalkan Sebuah Percakapan")],-1),yn=n("p",null,[a("Percakapan akan terus berjalan hingga conversation builder function selesai melakukan tugasnya. Karena itu, kamu bisa meninggalkan sebuah percakapan cukup dengan menggunakan "),n("code",null,"return"),a(".")],-1),fn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"hiAndBye"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Halo! Dan selamat tinggal!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token comment"},"// Tinggalkan percakapan:"),a(`
  `),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),wn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"hiAndBye"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Halo! Dan selamat tinggal!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token comment"},"// Tinggalkan percakapan:"),a(`
  `),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_n=n("p",null,[a("(Iya\u2026 iya\u2026 Kami tahu menambahkan sebuah "),n("code",null,"return"),a(" di akhir function memang tidak terlalu bermanfaat, tetapi setidaknya kamu paham maksud yang kami sampaikan. \u{1F642})")],-1),xn=a("Kamu juga bisa meninggalkan percakapan dengan melempar sebuah error. Jangan lupa untuk "),jn=a("menginstal sebuah error handler"),Cn=a(" di bot kamu."),Sn=o("<p>Jika ingin menghentikan secara paksa sebuah percakapan yang sedang menunggu input dari user, kamu bisa menggunakan <code>await ctx<wbr>.conversation<wbr>.exit()</code>. Biasanya menggunakan <code>return</code> di function adalah cara yang lebih baik, tetapi ada kalanya di beberapa kondisi menggunakan <code>await ctx<wbr>.conversation<wbr>.exit()</code> jauh lebih nyaman. Selalu ingat untuk memanggil <code>await</code>.</p>",1),Mn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"movie"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// TODO: buat percakapannya"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Instal plugin conversations."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"conversations"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Keluar dari semua percakapan ketika command `cancel` dikirim"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"cancel"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Keluar."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Keluar dari percakapan `movie` ketika tombol `cancel`"),a(`
`),n("span",{class:"token comment"},"// di inline keyboard ditekan"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"callbackQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"cancel"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"movie"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"answerCallbackQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Keluar dari percakapan"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createConversation"),n("span",{class:"token punctuation"},"("),a("movie"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"movie"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"movie"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),qn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"movie"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// TODO: buat percakapannya"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token comment"},"// Instal plugin conversations."),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"conversations"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Keluar dari semua percakapan ketika command `cancel` dikirim"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"cancel"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Keluar."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

`),n("span",{class:"token comment"},"// Keluar dari percakapan `movie` ketika tombol `cancel` "),a(`
`),n("span",{class:"token comment"},"// di inline keyboard ditekan"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"callbackQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"cancel"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"movie"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"answerCallbackQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Keluar dari percakapan"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createConversation"),n("span",{class:"token punctuation"},"("),a("movie"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"command"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"movie"'),n("span",{class:"token punctuation"},","),a(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token operator"},"=>"),a(" ctx"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"movie"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),In=n("p",null,[a("Perlu dicatat bahwa urutan pemasangan akan berpengaruh. Kamu harus menginstal plugin conversations (lihat baris ke-6) sebelum memanggil "),n("code",null,[a("await ctx"),n("wbr"),a(".conversation"),n("wbr"),a(".exit()")]),a(". Selain itu, handler-handler yang menangani cancel juga harus diinstal sebelum conversation aslinya (lihat baris ke-21) ditambahkan.")],-1),Tn=n("h2",{id:"menunggu-update",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#menunggu-update","aria-hidden":"true"},"#"),a(" Menunggu Update")],-1),An=n("p",null,[a("Kamu bisa menyuruh "),n("code",null,"conversation"),a(" untuk menunggu update selanjutnya dari chat terkait.")],-1),Pn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForMe"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Tunggu update selanjutnya:"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" newContext "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Kn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForMe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Tunggu update selanjutnya:"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" newContext "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Bn=a("Sebuah update baru dapat terjadi karena adanya suatu event, diantaranya adalah pesan telah dikirim, tombol telah ditekan, pesan telah diubah, dan aksi-aksi lain yang dilakukan oleh user. Lihat daftar lengkapnya di "),Fn={href:"https://core.telegram.org/bots/api#update",target:"_blank",rel:"noopener noreferrer"},Jn=a("dokumentasi Telegram"),Dn=a("."),On=a("Biasanya, di luar plugin conversations, setiap update akan diproses oleh "),En=a("sistem middleware"),Ln=a(" bot. Oleh karena itu, bot kamu akan memproses update tersebut melalui context object yang telah diteruskan ke beberapa handler kamu."),Nn=n("p",null,[a("Sebaliknya, di plugin conversations, kamu akan memperoleh context object yang baru dari pemanggilan "),n("code",null,"wait"),a(". Sehingga, kamu bisa menangani masing-masing update dengan cara yang berbeda-beda berdasarkan object tersebut. Contohnya, kamu bisa mengecek pesan teks dengan cara seperti ini:")],-1),Rn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForText"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Tunggu update selanjutnya:"),a(`
  ctx `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token comment"},"// Periksa apakah update mengandung teks:"),a(`
  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("message"),n("span",{class:"token operator"},"?."),a("text"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// ..."),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Hn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForText"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Tunggu update selanjutnya:"),a(`
  ctx `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token comment"},"// Periksa apakah update mengandung teks:"),a(`
  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("message"),n("span",{class:"token operator"},"?."),a("text"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token comment"},"// ..."),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Gn=a("Selain itu, ada banyak method selain "),zn=n("code",null,"wait",-1),Un=a(" yang bisa kamu gunakan untuk menunggu update tertentu saja. Salah satunya adalah "),$n=n("code",null,[a("wait"),n("wbr"),a("For")],-1),Yn=a(" yang memanfaatkan sebuah "),Vn=a("filter query"),Qn=a(" untuk menunggu update yang cocok dengan query yang diberikan. Ini adalah kombinasi yang sempurna bila digunakan bersama "),Wn={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment",target:"_blank",rel:"noopener noreferrer"},Xn=a("object destructuring"),Zn=a(":"),na=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForText"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Tunggu update pesan teks selanjutnya:"),a(`
  `),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" msg"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(" text "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitFor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"message:text"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),aa=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForText"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token comment"},"// Tunggu update pesan teks selanjutnya:"),a(`
  `),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token literal-property property"},"msg"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(" text "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitFor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"message:text"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),sa=a("Lihat "),ta={href:"https://doc.deno.land/https://deno.land/x/grammy_conversations/mod.ts/~/ConversationHandle#wait",target:"_blank",rel:"noopener noreferrer"},ea=a("referensi API"),oa=a(" untuk melihat semua method yang serupa dengan "),ca=n("code",null,"wait",-1),ia=a("."),pa=o(`<h2 id="tiga-aturan-utama-conversations" tabindex="-1"><a class="header-anchor" href="#tiga-aturan-utama-conversations" aria-hidden="true">#</a> Tiga Aturan Utama Conversations</h2><p>Terdapat tiga aturan yang berlaku untuk semua kode yang ditulis di dalam sebuah conversation builder function. Kamu harus menaatinya supaya kodemu bisa berjalan dengan baik.</p><p>Gulir <a href="#bagaimana-cara-kerjanya">ke bawah</a> jika kamu penasaran <em>kenapa</em> aturan tersebut diterapkan dan proses apa yang sebenarnya dilakukan ketika kita memanggil <code>wait</code>.</p><h3 id="aturan-i-semua-side-effect-harus-dibungkus" tabindex="-1"><a class="header-anchor" href="#aturan-i-semua-side-effect-harus-dibungkus" aria-hidden="true">#</a> Aturan I: Semua Side-effect Harus Dibungkus</h3><p>Kode yang bergantung kepada sistem eksternal, seperti database, API, file atau sumber-sumber lain yang eksekusinya berubah-ubah, harus dibungkus di dalam pemanggilan <code>conversation<wbr>.external()</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// SALAH</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">externalApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// BENAR</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> conversation<span class="token punctuation">.</span><span class="token function">external</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">externalApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),ua=a("Ini termasuk pembacaan data maupun melakukan "),la={href:"https://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect",target:"_blank",rel:"noopener noreferrer"},ra=a("side"),ka=n("wbr",null,null,-1),da=a("-effect"),ma=a(" (misalnya menulis ke sebuah database)."),ba=o(`<div class="custom-container tip"><p class="custom-container-title">Serupa dengan React</p><p>Jika kamu familiar dengan React, kamu mungkin paham sebuah konsep yang serupa dengan <code>use<wbr>Effect</code>.</p></div><h3 id="aturan-ii-semua-perilaku-acak-harus-dibungkus" tabindex="-1"><a class="header-anchor" href="#aturan-ii-semua-perilaku-acak-harus-dibungkus" aria-hidden="true">#</a> Aturan II: Semua Perilaku Acak Harus Dibungkus</h3><p>Kode yang bergatung pada hal-hal acak atau nilai global yang dapat berubah, harus dibungkus semua aksesnya ke dalam pemanggilan <code>conversation<wbr>.external()</code>, atau bisa juga menggunakan function convenience <code>conversation<wbr>.random()</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// SALAH</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token comment">// BENAR</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>conversation<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="aturan-iii-gunakan-convenience-functions" tabindex="-1"><a class="header-anchor" href="#aturan-iii-gunakan-convenience-functions" aria-hidden="true">#</a> Aturan III: Gunakan Convenience Functions</h3><p>Plugin <code>conversation</code> memiliki banyak sekali function untuk memudahkan pekerjaan kamu. Kode kamu memang akan baik-baik saja meski tidak menggunakannya, namun ia akan menjadi lambat atau memiliki perilaku yang sulit diprediksi. Meski begitu, user kamu kemungkinan besar tidak akan menyadari perbedaanya.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \`sleep\` menggunakan \`conversation\` akan meningkatkan performa secara signifikan</span>
<span class="token keyword">await</span> conversation<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 detik</span>

<span class="token comment">// Hasil pencatatan debug menggunakan \`conversation\` jauh lebih mudah dibaca</span>
conversation<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),ga=a("Perlu diketahui bahwa kamu juga bisa melakukan hal-hal di atas melalui "),va=n("code",null,[a("conversation"),n("wbr"),a(".external()")],-1),ha=a(", tetapi akan jauh lebih mudah untuk menggunakan convenience functions ("),ya={href:"https://doc.deno.land/https://deno.land/x/grammy_conversations/mod.ts/~/ConversationHandle#Methods",target:"_blank",rel:"noopener noreferrer"},fa=a("referensi API"),wa=a(")."),_a=o(`<h2 id="variable-percabangan-dan-perulangan" tabindex="-1"><a class="header-anchor" href="#variable-percabangan-dan-perulangan" aria-hidden="true">#</a> Variable, Percabangan, dan Perulangan</h2><p>Sekarang kita akan memahami beberapa konsep yang sudah dipelajari di dunia pemrograman serta menerapkannya untuk menciptakan sebuah conversation yang bersih dan mudah dibaca.</p><p>Bayangkan semua kode di bawah ditulis di dalam sebuah conversation builder function.</p><p>Kamu bisa mendeklarasikan variable dan melakukan apapun kepadanya:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>
  <span class="token string">&quot;Kirim angka-angka favoritmu, pisahkan tiap angka dengan koma!&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> conversation<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum <span class="token operator">=</span> message<span class="token punctuation">.</span>text
  <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Jumlah dari angka-angka tersebut adalah: &quot;</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Percabangan juga bisa dilakukan:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Kirim sebuah foto!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> conversation<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>message<span class="token operator">?.</span>photo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Itu bukan foto! Aksi dibatalkan.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Serta perulangan:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">do</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Kirim sebuah foto!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx <span class="token operator">=</span> <span class="token keyword">await</span> conversation<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>message<span class="token operator">?.</span>text <span class="token operator">===</span> <span class="token string">&quot;/cancel&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Aksi dibatalkan!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">.</span>message<span class="token operator">?.</span>photo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="function-dan-recursion" tabindex="-1"><a class="header-anchor" href="#function-dan-recursion" aria-hidden="true">#</a> Function dan Recursion</h2><p>Kamu juga bisa membagi kode ke beberapa function lalu menggunakannya kembali. Berikut contoh captcha sederhana yang bisa dipakai berulang kali:</p>`,11),xa=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a(`
`),n("span",{class:"token string"},`"Buktikan kalau kamu manusia! \\
    Apa jawaban untuk kehidupan, alam semesta, dan semuanya?"`),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" message "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" message"),n("span",{class:"token operator"},"?."),a("text "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"42"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),ja=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a(`
`),n("span",{class:"token string"},`"Buktikan kalau kamu manusia! \\
    Apa jawaban untuk kehidupan, alam semesta, dan semuanya?"`),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" message "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" message"),n("span",{class:"token operator"},"?."),a("text "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"42"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Ca=n("p",null,[a("Ia akan mengembalikan nilai "),n("code",null,"true"),a(" jika user menjawab dengan benar atau "),n("code",null,"false"),a(" jika salah. Kamu sekarang bisa menggunakannya di conversation builder function seperti ini:")],-1),Sa=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"enterGroup"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" ok "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ok"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Selamat datang!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"else"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"banChatMember"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Ma=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"enterGroup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" ok "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ok"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Selamat datang!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"else"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"banChatMember"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),qa=o('<p>Perhatikan bagaimana function captcha di atas bisa digunakan kembali di berbagai tempat di kode kamu.</p><blockquote><p>Contoh sederhana di atas hanya digunakan untuk memberi gambaran cara kerja dari suatu function. Pada kenyataanya, kode tersebut tidak akan bekerja dengan baik karena ia asal menerima update baru tanpa memverifikasi apakah pesan berasal dari user yang sama atau tidak. Jika kamu ingin membuat sebuah captcha sungguhan, kamu bisa menggunakan <a href="#percakapan-paralel">percakapan paralel</a>.</p></blockquote><p>Kamu juga bisa membagi kode menjadi beberapa function, recursion, mutual recursion, generator, dan sebagainya. (Kamu cuma perlu memastikan function-function tersebut mengikuti <a href="#tiga-aturan-utama-conversations">ketiga aturan ini</a>.)</p><p>Error handling semestinya juga bisa digunakan di function kamu. Statement <code>try</code>/<code>catch</code> biasa juga dapat bekerja dengan baik di berbagai function. Lagi pula, conversations hanyalah sebuah JavaScript, jadi seharusnya tidak ada masalah.</p>',4),Ia=a("Kalau function conversation utama melempar sebuah error, maka error tersebut akan diteruskan ke "),Ta=a("mekanisme penanganan error"),Aa=a(" kamu."),Pa=n("h2",{id:"module-dan-class",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#module-dan-class","aria-hidden":"true"},"#"),a(" Module dan Class")],-1),Ka=n("p",null,[a("Normalnya, kamu bisa memindahkan function ke berbagai module. Dengan cara seperti itu, beberapa function bisa dibuat dan di-"),n("code",null,"export"),a(" di dalam satu file saja, kemudian digunakan kembali di file lain dengan cara di-"),n("code",null,"import"),a(".")],-1),Ba=n("p",null,"Kamu juga bisa membuat beberapa class:",-1),Fa=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"class"),a(),n("span",{class:"token class-name"},"Auth"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"public"),a(" token"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},";"),a(`

  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"private"),a(" conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),a(`

  `),n("span",{class:"token function"},"authenticate"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"const"),a(" link "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"getAuthLink"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},"// ambil link autentikasi dari sistem kamu"),a(`
    `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a(`
`),n("span",{class:"token string"},`"Buka link ini untuk mendapatkan sebuah token \\
      lalu kirim tokennya ke aku: "`),a(),n("span",{class:"token operator"},"+"),a(" link"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    ctx `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("token "),n("span",{class:"token operator"},"="),a(" ctx"),n("span",{class:"token punctuation"},"."),a("message"),n("span",{class:"token operator"},"?."),a("text"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`

  `),n("span",{class:"token function"},"isAuthenticated"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token keyword"},"this"),a(),n("span",{class:"token keyword"},"is"),a(" Auth "),n("span",{class:"token operator"},"&"),a(),n("span",{class:"token punctuation"},"{"),a(" token"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"string"),a(),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("token "),n("span",{class:"token operator"},"!=="),a(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"askForToken"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" auth "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Auth"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" auth"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"authenticate"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("auth"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"isAuthenticated"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"const"),a(" token "),n("span",{class:"token operator"},"="),a(" auth"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token comment"},"// lakukan sesuatu dengan tokennya"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Ja=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"class"),a(),n("span",{class:"token class-name"},"Auth"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"conversation"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("#conversation "),n("span",{class:"token operator"},"="),a(" conversation"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`

  `),n("span",{class:"token function"},"authenticate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"const"),a(" link "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token function"},"getAuthLink"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(),n("span",{class:"token comment"},"// ambil link autentikasi dari sistem kamu"),a(`
    `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a(`
`),n("span",{class:"token string"},`"Buka link ini untuk mendapatkan sebuah token \\
      lalu kirim tokennya ke aku: "`),a(),n("span",{class:"token operator"},"+"),a(" link"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    ctx `),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("#conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"wait"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("token "),n("span",{class:"token operator"},"="),a(" ctx"),n("span",{class:"token punctuation"},"."),a("message"),n("span",{class:"token operator"},"?."),a("text"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`

  `),n("span",{class:"token function"},"isAuthenticated"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),a("token "),n("span",{class:"token operator"},"!=="),a(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"askForToken"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" auth "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"new"),a(),n("span",{class:"token class-name"},"Auth"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" auth"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"authenticate"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("auth"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"isAuthenticated"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token keyword"},"const"),a(" token "),n("span",{class:"token operator"},"="),a(" auth"),n("span",{class:"token punctuation"},"."),a("token"),n("span",{class:"token punctuation"},";"),a(`
    `),n("span",{class:"token comment"},"// lakukan sesuatu dengan tokennya"),a(`
  `),n("span",{class:"token punctuation"},"}"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Da=o('<p>Kami tidak merekomendasikan kamu untuk melakukan cara di atas. Kode di atas hanyalah sebuah contoh untuk menunjukkan bagaimana kamu bisa memanfaatkan fleksibilitas JavaScript untuk membuat struktur kode kamu.</p><h2 id="form" tabindex="-1"><a class="header-anchor" href="#form" aria-hidden="true">#</a> Form</h2><blockquote><p>Catatan terjemahan: <code>form</code> disini artinya bentuk atau jenis (misal angka, teks, dll) bukan form untuk isian.</p></blockquote><p>Seperti yang sudah dijelaskan <a href="#menunggu-update">sebelumnya</a>, conversation handle memiliki beberapa function utilitas, misalnya <code>await conversation<wbr>.wait<wbr>For(&#39;message:<wbr>text&#39;)</code> yang hanya mengembalikan update berupa pesan teks.</p><p>Jika method-method tadi belum cukup, plugin conversations menyediakan beberapa function pembantu untuk membuat berbagai form menggunakan <code>conversation<wbr>.form</code>.</p>',5),Oa=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForMe"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Berapa umur kamu?"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" age"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token builtin"},"number"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),a("form"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"number"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Ea=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"waitForMe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Berapa umur kamu?"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" age "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),a("form"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"number"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),La=a("Seperti biasa, lihat "),Na={href:"https://doc.deno.land/https://deno.land/x/grammy_conversations/mod.ts/~/ConversationForm",target:"_blank",rel:"noopener noreferrer"},Ra=a("referensi API"),Ha=a(" untuk mengetahui method apa saja yang tersedia."),Ga=o('<h2 id="percakapan-paralel" tabindex="-1"><a class="header-anchor" href="#percakapan-paralel" aria-hidden="true">#</a> Percakapan Paralel</h2><p>Normalnya, plugin conversations bisa melakukan berbagai percakapan dari chat yang berbeda secara paralel.</p><p>Namun, jika bot kamu berada di sebuah chat grup, kemungkinan besar kamu ingin bot melakukan beberapa percakapan dengan user yang berbeda <em>di dalam chat yang sama</em>. Misalnya, kamu memiliki sebuah bot dengan fitur captcha yang aktif untuk setiap member yang baru bergabung ke grup. Jika dua member bergabung secara bersamaan, bot seharusnya mampu melakukan dua percakapan dengan mereka secara terpisah.</p><p>Itulah kenapa plugin conversation menyediakan cara agar kamu bisa membuat beberapa percakapan untuk setiap chat di waktu yang bersamaan. Contohnya, kita bisa memiliki lima percakapan yang berbeda dengan lima user baru dan di waktu yang sama melakukan percakapan dengan seorang admin mengenai pengaturan chat yang baru.</p><h3 id="bagaimana-cara-kerjanya" tabindex="-1"><a class="header-anchor" href="#bagaimana-cara-kerjanya" aria-hidden="true">#</a> Bagaimana Cara Kerjanya?</h3><p>Setiap update yang masuk akan diproses oleh salah satu dari beberapa percakapan yang aktif. Mirip dengan handle di middleware, percakapan-percakapan tadi akan dipanggil secara berurutan berdasarkan siapa yang lebih dulu dipasang. Jika sebuah percakapan dijalankan beberapa kali, ia akan dipanggil berdasarkan urutan kronologis.</p><p>Nah, setiap percakapan yang dipanggil tadi akan memutuskan apakah memproses update tersebut atau memanggil <code>await conversation<wbr>.skip()</code>. Jika memilih pilihan pertama, update tersebut akan dipakai selama conversation terkait memprosesnya. Sebaliknya, jika pilihan kedua dipilih, update tersebut akan ditolak dan diteruskan ke percakapan berikutnya. Jika tidak ada percakapan yang memproses update tersebut, control flow akan meneruskannya kembali ke sistem middleware yang kemudian akan ditangani oleh handler berikutnya.</p><p>Sehingga, kamu bisa memulai sebuah percakapan baru dari middleware biasa.</p><h3 id="cara-penggunaan" tabindex="-1"><a class="header-anchor" href="#cara-penggunaan" aria-hidden="true">#</a> Cara Penggunaan</h3><p>Dalam praktiknya, kamu tidak perlu memanggil <code>await conversation<wbr>.skip()</code> sama sekali. Sebaliknya, kamu cukup menggunakan <code>await conversation<wbr>.wait<wbr>From(user<wbr>Id)</code> untuk mengurus semuanya. Ini memungkinkan kamu untuk mengobrol ke satu user saja di dalam sebuah chat grup.</p><p>Sebagai contoh, mari kita implementasikan kembali contoh captcha di atas, tetapi kali ini kita gunakan di percakapan paralel.</p>',11),za=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("from "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a(`
    `),n("span",{class:"token string"},`"Buktikan kalau kamu manusia! \\
    Apa jawaban untuk kehidupan, alam semesta, dan semuanya?"`),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" message "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitFrom"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" message"),n("span",{class:"token operator"},"?."),a("text "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"42"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"enterGroup"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token operator"},":"),a(" MyConversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token operator"},":"),a(" MyContext"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" ok "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ok"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Selamat datang!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"else"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"banChatMember"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Ua=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("from "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token keyword"},"return"),a(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),a(`
    `),n("span",{class:"token string"},`"Buktikan kalau kamu manusia! \\
    Apa jawaban untuk kehidupan, alam semesta, dan semuanya?"`),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"const"),a(),n("span",{class:"token punctuation"},"{"),a(" message "),n("span",{class:"token punctuation"},"}"),a(),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(" conversation"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitFrom"),n("span",{class:"token punctuation"},"("),a("ctx"),n("span",{class:"token punctuation"},"."),a("from"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"return"),a(" message"),n("span",{class:"token operator"},"?."),a("text "),n("span",{class:"token operator"},"==="),a(),n("span",{class:"token string"},'"42"'),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`

`),n("span",{class:"token keyword"},"async"),a(),n("span",{class:"token keyword"},"function"),a(),n("span",{class:"token function"},"enterGroup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx")]),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token keyword"},"const"),a(" ok "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token keyword"},"await"),a(),n("span",{class:"token function"},"captcha"),n("span",{class:"token punctuation"},"("),a("conversation"),n("span",{class:"token punctuation"},","),a(" ctx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`

  `),n("span",{class:"token keyword"},"if"),a(),n("span",{class:"token punctuation"},"("),a("ok"),n("span",{class:"token punctuation"},")"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Selamat datang!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
  `),n("span",{class:"token keyword"},"else"),a(),n("span",{class:"token keyword"},"await"),a(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"banChatMember"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),$a=o(`<p>Perhatikan bagaimana kita menunggu pesan yang berasal dari user tertentu saja.</p><p>Sekarang kita bisa membuat handler sederhana yang akan membuat percakapan baru ketika member baru bergabung.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;chat_member&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>chatMember<span class="token punctuation">.</span>old_chat_member<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>chatMember<span class="token punctuation">.</span>new_chat_member<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;member&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>conversation<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token string">&quot;enterGroup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="memeriksa-percakapan-yang-sedang-aktif" tabindex="-1"><a class="header-anchor" href="#memeriksa-percakapan-yang-sedang-aktif" aria-hidden="true">#</a> Memeriksa Percakapan yang Sedang Aktif</h3><p>Kamu bisa melihat jumlah percakapan yang sedang aktif beserta identifier-nya.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> stats <span class="token operator">=</span> ctx<span class="token punctuation">.</span>conversation<span class="token punctuation">.</span>active<span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { &quot;enterGroup&quot;: 1 }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Ia akan ditampilkan dalam bentuk sebuah object yang berisi key berupa identifier dan jumlah percakapan yang sedang berlangsung untuk setiap identifier.</p><h2 id="bagaimana-cara-kerjanya-1" tabindex="-1"><a class="header-anchor" href="#bagaimana-cara-kerjanya-1" aria-hidden="true">#</a> Bagaimana Cara Kerjanya?</h2><blockquote><p>Masih ingat dengan <a href="#tiga-aturan-utama-conversations">tiga aturan</a> yang harus ditaati untuk kode yang berjalan di dalam conversation builder function? Sekarang kita akan mencari tahu <em>mengapa</em> aturan tersebut diterapkan.</p></blockquote><p>Sebelum membahas detail-detailnya, kita akan melihat terlebih dahulu konsep kerja dari plugin ini.</p><h3 id="bagaimana-cara-kerja-pemanggilan-wait" tabindex="-1"><a class="header-anchor" href="#bagaimana-cara-kerja-pemanggilan-wait" aria-hidden="true">#</a> Bagaimana Cara Kerja Pemanggilan <code>wait</code>?</h3><p>Mari kita ubah perspektif dan bertanya dari sudut pandang developer plugin ini. Bagaimana sebaiknya kita mengimplementasikan sebuah pemanggilan <code>wait</code> di dalam sebuah plugin?</p><p>Pendekatan sederhana untuk mengimplementasikan sebuah pemanggilan <code>wait</code> di plugin conversations adalah dengan membuat sebuah promise lalu menunggu hingga context object berikutnya tiba. Setelah itu, kita resolve promise-nya kemudian conversation bisa dilanjutkan kembali.</p><p>Sayangnya, pendekatan seperti itu adalah sebuah ide yang buruk karena alasan-alasan berikut:</p><p><strong>Data Loss.</strong> Bagaimana jika tiba-tiba server kamu crash ketika menunggu sebuah context object? Sudah pasti kamu akan kehilangan semua informasi state dari conversation yang sedang berlangsung. Singkatnya, bot \u201Clupa\u201D sudah sampai mana alur percakapannya terjadi, sehingga user harus memulainya dari awal. Ini adalah desain yang buruk dan merepotkan.</p><p><strong>Blocking.</strong> Jika pemanggilan <code>wait</code> menghalangi sampai update berikutnya tiba, berarti pemrosesan middleware tidak akan bisa diselesaikan hingga percakapan selesai seluruhnya.</p>`,16),Ya=n("li",null,"Untuk built-in polling, artinya update berikutnya tidak akan diproses sama sekali hingga update tersebut diselesaikan. Ini mengakibatkan bot kamu terhalangi selamanya.",-1),Va=a("Untuk "),Qa=a("grammY runner"),Wa=a(", bot tidak akan terhalangi. Tetapi, ketika memproses ribuan percakapan dari berbagai user secara paralel, ia akan mengonsumsi banyak sekali memory. Jika banyak user yang berhenti merespon, bot akan terjebak diantara banyak sekali percakapan."),Xa=a("Webhooks juga mempunyai "),Za=a("masalahnya sendiri"),ns=a(" karena middleware yang terus berjalan tanpa henti."),as=o(`<p><strong>State.</strong> Di infrastruktur serverless seperti cloud functions, kita tidak bisa memastikan instance yang sama memproses dua update dari user yang sama berturut-turut. Sehingga, jika kita membuat stateful conversation, bisa dipastikan ia tidak akan berjalan dengan baik karena middleware lain tiba-tiba dieksekusi sementara pemanggilan <code>wait</code> masih belum terselesaikan. Ini akan menimbulkan banyak kekacauan dan bug secara acak.</p><p>Dan masalah-masalah lainnya.</p><p>Oleh karena itu, plugin conversations melakukannya dengan cara yang berbeda. Benar-benar berbeda. Seperti yang telah dijabarkan di awal, <strong>Ia tidak akan membuat bot kamu menunggu <em>begitu saja</em></strong>, meski kita bisa saja memprogram conversations seolah-olah itu terjadi.</p><p>Plugin conversations akan memantau proses eksekusi function kamu. Ketika pemanggilan wait dilakukan, ia akan men-serialize state dari eksekusi tersebut ke dalam session, yang selanjutnya akan disimpan dengan aman di sebuah database. Ketika update selanjutnya tiba, ia akan memeriksa data session terlebih dahulu. Jika ternyata ia sedang ditengah-tengah sebuah percakapan, state dari ekseskusi tersebut akan di-deserialize, lalu conversation builder function akan mengulanginya kembali di titik di mana pemanggilan <code>wait</code> sebelumnya dilakukan. Kemudian ia akan melanjutkan kembali eksekusi function kamu seperti biasanya\u2014hingga pemanggilan <code>wait</code> selanjutnya dilakukan dan eksekusinya harus ditunda lagi.</p><p>Apa saja yang termasuk state eksekusi? State eksekusi terdiri atas tiga hal:</p><ol><li>Update yang masuk.</li><li>Pemanggilan keluar API.</li><li>Event dan pengaruh eksternal, seperti hal-hal acak ataupun pemanggilan ke beberapa API eksternal atau database.</li></ol><p>Apa maksudnya <em>mengulang kembali</em> di penjelasan di atas? Mengulang kembali artinya memanggil function dari awal secara teratur, tetapi ketika ia memanggil <code>wait</code> atau melakukan pemanggilan API, kita tidak melakukan aksi tersebut sama sekali. Sebaliknya, kita mengecek atau mencatat log posisi dari eksekusi sebelumnya serta nilai yang dikembalikan pada saat itu. Kemudian, kita menginjeksi nilai-nilai tersebut ke conversation builder function sehingga proses eksekusi terjadi begitu cepat\u2014hingga log kita benar-benar habis. Saat itu terjadi, kita kembali menggunakan mode eksekusi normal, yang mana kita berhenti menginjeksi nilai-nilai tadi dan beralih melakukan pemanggilan API yang sebenarnya.</p><p>Itulah kenapa plugin ini perlu memantau semua update yang masuk serta pemanggilan API Bot yang keluar (lihat poin 1 dan 2 di atas). Namun, ia tidak bisa mengontrol event yang terjadi dari luar, side-effect, atau hal acak. Sebagai contoh, kamu bisa melakukan ini:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Lakukan sesuatu</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// Lakukan sesuatu yang lain</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Dalam hal ini, ketika function dipanggil, ia akan berperilaku acak setiap waktu, sehingga dengan mengulang kembali function tersebut akan membuat semuanya berantakan. Itulah kenapa adanya poin ketiga di atas, dan diharuskan mengikuti <a href="#tiga-aturan-utama-conversations">tiga aturan utama</a>.</p><h3 id="bagaimana-cara-memotong-eksekusi-dari-suatu-function" tabindex="-1"><a class="header-anchor" href="#bagaimana-cara-memotong-eksekusi-dari-suatu-function" aria-hidden="true">#</a> Bagaimana Cara Memotong Eksekusi dari Suatu Function</h3>`,11),ss=a("Secara konsep, keyword "),ts=n("code",null,"async",-1),es=a(" dan "),os=n("code",null,"await",-1),cs=a(" memberi kita kontrol di thread mana akan dilakukan "),is={href:"https://en.wikipedia.org/wiki/Preemption_(computing)",target:"_blank",rel:"noopener noreferrer"},ps=a("preempted"),us=a(". Sehingga, jika seseorang memanggil "),ls=n("code",null,[a("await conversation"),n("wbr"),a(".wait()")],-1),rs=a(", yang mana adalah sebuah function dari library kita, kita diberi kuasa untuk me-preempt eksekusi tersebut."),ks=o(`<p>Secara konkret, rahasia utama yang membolehkan kita memotong eksekusi dari suatu function adalah sebuah <code>Promise</code> yang tidak pernah di-resolve.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// BOOM</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Jika kamu melakukan <code>await</code> ke promise tersebut di file JavaScript manapun, runtime kamu akan mati di saat itu juga. (Silahkan salin kode di atas ke dalam sebuah file lalu coba jalankan.)</p><p>Karena kita jelas tidak ingin mematikan runtime JS, maka kita perlu menangkapnya sekali lagi. Lantas, bagaimana cara kamu melakukannya? (Jangan ragu untuk memeriksa source code plugin ini jika masih belum tahu jawabannya)</p><h2 id="ringkasan-plugin" tabindex="-1"><a class="header-anchor" href="#ringkasan-plugin" aria-hidden="true">#</a> Ringkasan Plugin</h2>`,5),ds=n("li",null,[a("Nama: "),n("code",null,"conversations")],-1),ms=a("Sumber: "),bs={href:"https://github.com/grammyjs/conversations",target:"_blank",rel:"noopener noreferrer"},gs=a("https://"),vs=n("wbr",null,null,-1),hs=a("github"),ys=n("wbr",null,null,-1),fs=a(".com"),ws=n("wbr",null,null,-1),_s=a("/grammyjs"),xs=n("wbr",null,null,-1),js=a("/conversations"),Cs=a("Referensi: "),Ss={href:"https://doc.deno.land/https://deno.land/x/grammy_conversations/mod.ts",target:"_blank",rel:"noopener noreferrer"},Ms=o("https://<wbr>doc<wbr>.deno<wbr>.land<wbr>/https://<wbr>deno<wbr>.land<wbr>/x<wbr>/grammy<wbr>_conversations<wbr>/mod<wbr>.ts",23);function qs(Is,Ts){const l=u("AutotagPage"),i=u("RouterLink"),e=u("CodeGroupItem"),c=u("CodeGroup"),p=u("ExternalLinkIcon");return k(),d("div",null,[b,s(l,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),g,v,h,y,n("p",null,[f,s(i,{to:"/id/guide/middleware.html"},{default:t(()=>[w]),_:1}),_,s(i,{to:"/id/guide/context.html"},{default:t(()=>[x]),_:1}),j]),C,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[S]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[M]),_:1}),s(e,{title:"Deno"},{default:t(()=>[q]),_:1})]),_:1}),I,n("p",null,[T,A,P,K,s(i,{to:"/id/guide/context.html#memodifikasi-object-context"},{default:t(()=>[B]),_:1}),F,J,D,s(i,{to:"/id/guide/context.html#additive-context-flavor"},{default:t(()=>[O]),_:1}),E,L,N]),n("p",null,[R,H,G,z,U,$,n("a",Y,[V,s(p)]),Q,W,X,s(i,{to:"/id/guide/context.html#memodifikasi-object-context"},{default:t(()=>[Z]),_:1}),nn,an,sn]),tn,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[en]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[on]),_:1})]),_:1}),cn,pn,n("p",null,[un,ln,rn,s(i,{to:"/id/plugins/session.html"},{default:t(()=>[kn]),_:1}),dn]),mn,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[bn]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[gn]),_:1}),s(e,{title:"Deno"},{default:t(()=>[vn]),_:1})]),_:1}),hn,yn,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[fn]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[wn]),_:1})]),_:1}),_n,n("p",null,[xn,s(i,{to:"/id/guide/errors.html"},{default:t(()=>[jn]),_:1}),Cn]),Sn,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[Mn]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[qn]),_:1})]),_:1}),In,Tn,An,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[Pn]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[Kn]),_:1})]),_:1}),n("p",null,[Bn,n("a",Fn,[Jn,s(p)]),Dn]),n("p",null,[On,s(i,{to:"/id/guide/middleware.html"},{default:t(()=>[En]),_:1}),Ln]),Nn,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[Rn]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[Hn]),_:1})]),_:1}),n("p",null,[Gn,zn,Un,$n,Yn,s(i,{to:"/id/guide/filter-queries.html"},{default:t(()=>[Vn]),_:1}),Qn,n("a",Wn,[Xn,s(p)]),Zn]),s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[na]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[aa]),_:1})]),_:1}),n("p",null,[sa,n("a",ta,[ea,s(p)]),oa,ca,ia]),pa,n("p",null,[ua,n("a",la,[ra,ka,da,s(p)]),ma]),ba,n("p",null,[ga,va,ha,n("a",ya,[fa,s(p)]),wa]),_a,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[xa]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[ja]),_:1})]),_:1}),Ca,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[Sa]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[Ma]),_:1})]),_:1}),qa,n("p",null,[Ia,s(i,{to:"/id/guide/errors.html"},{default:t(()=>[Ta]),_:1}),Aa]),Pa,Ka,Ba,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[Fa]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[Ja]),_:1})]),_:1}),Da,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[Oa]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[Ea]),_:1})]),_:1}),n("p",null,[La,n("a",Na,[Ra,s(p)]),Ha]),Ga,s(c,null,{default:t(()=>[s(e,{title:"TypeScript",active:""},{default:t(()=>[za]),_:1}),s(e,{title:"JavaScript"},{default:t(()=>[Ua]),_:1})]),_:1}),$a,n("ul",null,[Ya,n("li",null,[Va,s(i,{to:"/id/plugins/runner.html"},{default:t(()=>[Qa]),_:1}),Wa]),n("li",null,[Xa,s(i,{to:"/id/guide/deployment-types.html#mengakhiri-request-webhook-tepat-waktu"},{default:t(()=>[Za]),_:1}),ns])]),as,n("p",null,[ss,ts,es,os,cs,n("a",is,[ps,s(p)]),us,ls,rs]),ks,n("ul",null,[ds,n("li",null,[ms,n("a",bs,[gs,vs,hs,ys,fs,ws,_s,xs,js,s(p)])]),n("li",null,[Cs,n("a",Ss,[Ms,s(p)])])])])}const Ps=r(m,[["render",qs],["__file","conversations.html.vue"]]);export{Ps as default};
