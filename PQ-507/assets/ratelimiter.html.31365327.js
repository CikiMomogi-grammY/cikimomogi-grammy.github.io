import{_ as p}from"./ratelimiter-role.f0e3b430.js";import{_ as d,r as c,o as m,c as k,b as a,a as n,w as e,d as s,e as i}from"./app.9837a88d.js";const b={},v=n("h1",{id:"usuarios-con-limite-de-velocidad-ratelimiter",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#usuarios-con-limite-de-velocidad-ratelimiter","aria-hidden":"true"},"#"),s(" Usuarios con l\xEDmite de velocidad ("),n("code",null,"ratelimiter"),s(")")],-1),g=s("ratelimiter es un middleware de limitaci\xF3n de tasa para los bots de Telegram hechos con los frameworks de bots grammY o "),_={href:"https://github.com/telegraf/telegraf",target:"_blank",rel:"noopener noreferrer"},h=s("Telegraf"),f=s(". En t\xE9rminos simples, es un plugin que te ayuda a desviar el spam pesado en tus bots. Para entender mejor ratelimiter, puedes echar un vistazo a la siguiente ilustraci\xF3n:"),y=i('<p><img src="'+p+'" alt="El papel de ratelimiter para desviar el spam"></p><h2 id="\xBFcomo-funciona-exactamente" tabindex="-1"><a class="header-anchor" href="#\xBFcomo-funciona-exactamente" aria-hidden="true">#</a> \xBFC\xF3mo funciona exactamente?</h2><p>En circunstancias normales, cada solicitud ser\xE1 procesada y respondida por su bot, lo que significa que hacer spam no ser\xE1 tan dif\xEDcil. \xA1Cada usuario puede enviar m\xFAltiples peticiones por segundo y tu script tiene que procesar cada petici\xF3n, pero \xBFc\xF3mo puedes detenerlo? con ratelimiter!</p><div class="custom-container warning"><p class="custom-container-title">Limitando los usuarios, no los servidores de Telegram.</p><p>Debes tener en cuenta que este paquete <strong>NO</strong> limita la tasa de solicitudes entrantes de los servidores de Telegram, en su lugar, rastrea las solicitudes entrantes por <code>from<wbr>.id</code> y las descarta a su llegada, por lo que no se a\xF1ade m\xE1s carga de procesamiento a tus servidores.</p></div><h2 id="personalizacion" tabindex="-1"><a class="header-anchor" href="#personalizacion" aria-hidden="true">#</a> Personalizaci\xF3n</h2><p>Este plugin expone 5 opciones personalizables:</p>',6),w=i("<li><code>time<wbr>Frame</code>: El intervalo de tiempo durante el cual se monitorizar\xE1n las peticiones (por defecto es <code>1000</code> ms).</li><li><code>limit</code>: El n\xFAmero de peticiones permitidas dentro de cada <code>time<wbr>Frame</code> (por defecto es <code>1</code>).</li>",2),x=n("code",null,[s("storage"),n("wbr"),s("Client")],-1),j=s(": El tipo de almacenamiento que se utilizar\xE1 para mantener un registro de los usuarios y sus peticiones. El valor por defecto es "),E=n("code",null,[s("MEMORY"),n("wbr"),s("_STORE")],-1),q=s(" que utiliza un "),R={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",target:"_blank",rel:"noopener noreferrer"},S=s("Mapa"),C=s(" en memoria, pero tambi\xE9n se puede pasar un cliente Redis (m\xE1s informaci\xF3n en "),T=n("a",{href:"#sobre-storageclient"},[s("About storage"),n("wbr"),s("Client")],-1),z=s(")."),P=n("li",null,[n("code",null,[s("on"),n("wbr"),s("Limit"),n("wbr"),s("Exceeded")]),s(": Una funci\xF3n que describe qu\xE9 hacer si el usuario excede el l\xEDmite (ignora las peticiones extra por defecto).")],-1),O=n("li",null,[n("code",null,[s("key"),n("wbr"),s("Generator")]),s(": Una funci\xF3n que devuelve una clave \xFAnica generada para cada usuario (utiliza "),n("code",null,[s("from"),n("wbr"),s(".id")]),s(" por defecto). Esta clave se utiliza para identificar al usuario, por lo que debe ser \xFAnica, espec\xEDfica del usuario y en formato de cadena.")],-1),L=n("h3",{id:"sobre-storageclient",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#sobre-storageclient","aria-hidden":"true"},"#"),s(" Sobre "),n("code",null,[s("storage"),n("wbr"),s("Client")])],-1),G=s("El "),M=n("code",null,[s("MEMORY"),n("wbr"),s("_STORE")],-1),I=s(" o el seguimiento en memoria es adecuado para la mayor\xEDa de los bots, sin embargo si implementas el clustering para tu bot no podr\xE1s utilizar el almacenamiento en memoria de forma efectiva. Por eso tambi\xE9n se proporciona la opci\xF3n Redis. Puedes pasar un cliente Redis desde "),N={href:"https://github.com/luin/ioredis",target:"_blank",rel:"noopener noreferrer"},D=s("ioredis"),Y=s(" o "),F={href:"https://deno.land/x/redis",target:"_blank",rel:"noopener noreferrer"},A=s("redis"),B=s(" en caso de que uses deno. En realidad, cualquier controlador de Redis que implemente los m\xE9todos "),J=n("code",null,"incr",-1),K=s(" y "),U=n("code",null,"pexpire",-1),V=s(" deber\xEDa funcionar bien. ratelimiter es agn\xF3stico al controlador."),H=i('<blockquote><p>Nota: Debe tener redis-server <strong>2.6.0</strong> y superior en su servidor para utilizar el cliente de almacenamiento Redis con ratelimiter. Las versiones anteriores de Redis no son compatibles.</p></blockquote><h2 id="como-utilizarlo" tabindex="-1"><a class="header-anchor" href="#como-utilizarlo" aria-hidden="true">#</a> C\xF3mo utilizarlo</h2><p>Hay dos maneras de utilizar ratelimiter:</p><ul><li>Aceptando los valores por defecto (<a href="#configuraci%C3%B3n-por-defecto">Configuraci\xF3n por defecto</a>).</li><li>Pasando un objeto personalizado que contenga sus ajustes (<a href="#configuraci%C3%B3n-manual">Configuraci\xF3n manual</a>).</li></ul><h3 id="configuracion-por-defecto" tabindex="-1"><a class="header-anchor" href="#configuracion-por-defecto" aria-hidden="true">#</a> Configuraci\xF3n por defecto</h3><p>Este fragmento demuestra la forma m\xE1s sencilla de utilizar ratelimiter, que es aceptar el comportamiento por defecto:</p>',6),W=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Limita el manejo de mensajes a un mensaje por segundo para cada usuario."),s(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Q=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Limita el manejo de mensajes a un mensaje por segundo para cada usuario."),s(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),X=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"https://deno.land/x/grammy_ratelimiter@v1.1.6/mod.ts"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Limita el manejo de mensajes a un mensaje por segundo para cada usuario."),s(`
bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Z=n("h3",{id:"configuracion-manual",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#configuracion-manual","aria-hidden":"true"},"#"),s(" Configuraci\xF3n manual")],-1),$=n("p",null,[s("Como se mencion\xF3 anteriormente, puedes pasar un objeto "),n("code",null,"Options"),s(" al m\xE9todo "),n("code",null,"limit()"),s(" para alterar el comportamiento del limitador.")],-1),nn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" Redis "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"ioredis"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" redis "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Redis"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Permitir que s\xF3lo se manejen 3 mensajes cada 2 segundos."),s(`
    timeFrame`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2000"),n("span",{class:"token punctuation"},","),s(`
    limit`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},'// "MEMORY_STORE" es el valor por defecto. Si no quieres usar Redis, no pases storageClient en absoluto.'),s(`
    storageClient`),n("span",{class:"token operator"},":"),s(" redis"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},"// Se llama cuando se supera el l\xEDmite."),s(`
    `),n("span",{class:"token function-variable function"},"onLimitExceeded"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"await"),s(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\xA1Por favor, abst\xE9ngase de enviar demasiadas solicitudes!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},'// Tenga en cuenta que la clave debe ser un n\xFAmero en formato de cadena como "123456789".'),s(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("from"),n("span",{class:"token operator"},"?."),s("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),sn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" Redis "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"ioredis"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" redis "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Redis"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Permitir que s\xF3lo se manejen 3 mensajes cada 2 segundos."),s(`
    `),n("span",{class:"token literal-property property"},"timeFrame"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2000"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"limit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},'// "MEMORY_STORE" es el valor por defecto. Si no quieres usar Redis, no pases storageClient en absoluto.'),s(`
    `),n("span",{class:"token literal-property property"},"storageClient"),n("span",{class:"token operator"},":"),s(" redis"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},"// Se llama cuando se supera el l\xEDmite."),s(`
    `),n("span",{class:"token function-variable function"},"onLimitExceeded"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"await"),s(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\xA1Por favor, abst\xE9ngase de enviar demasiadas solicitudes!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},'// Tenga en cuenta que la clave debe ser un n\xFAmero en formato de cadena como "123456789".'),s(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("from"),n("span",{class:"token operator"},"?."),s("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),an=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" connect "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"https://deno.land/x/redis/mod.ts"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"https://deno.land/x/grammy_ratelimiter@v1.1.6/mod.ts"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" redis "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"connect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Permitir que s\xF3lo se manejen 3 mensajes cada 2 segundos."),s(`
    timeFrame`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2000"),n("span",{class:"token punctuation"},","),s(`
    limit`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},'// "MEMORY_STORE" es el valor por defecto. Si no quieres usar Redis, no pases storageClient en absoluto.'),s(`
    storageClient`),n("span",{class:"token operator"},":"),s(" redis"),n("span",{class:"token punctuation"},","),s(`

    `),n("span",{class:"token comment"},"// Se llama cuando se supera el l\xEDmite."),s(`
    `),n("span",{class:"token function-variable function"},"onLimitExceeded"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"await"),s(" ctx"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"reply"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\xA1Por favor, abst\xE9ngase de enviar demasiadas solicitudes!"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},'// Tenga en cuenta que la clave debe ser un n\xFAmero en formato de cadena como "123456789".'),s(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("from"),n("span",{class:"token operator"},"?."),s("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),en=s("Si dicho usuario env\xEDa m\xE1s peticiones, el bot responde con "),tn=n("em",null,"Por favor, abst\xE9ngase de enviar demasiadas peticiones",-1),on=s(". Esa petici\xF3n no viajar\xE1 m\xE1s all\xE1 y muere inmediatamente ya que no llamamos a "),cn=s("next()"),ln=s(" en el middleware."),un=n("blockquote",null,[n("p",null,[s("Nota: Para evitar inundar los servidores de Telegram, "),n("code",null,[s("on"),n("wbr"),s("Limit"),n("wbr"),s("Exceeded")]),s(" s\xF3lo se ejecuta una vez en cada "),n("code",null,[s("time"),n("wbr"),s("Frame")]),s(".")])],-1),rn=n("p",null,"Otro caso de uso ser\xEDa limitar las peticiones entrantes de un chat en lugar de un usuario espec\xEDfico:",-1),pn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},";"),s(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token operator"},"?."),s("type "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"group"'),s(),n("span",{class:"token operator"},"||"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token operator"},"?."),s("type "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"supergroup"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},'// Tenga en cuenta que la clave debe ser un n\xFAmero en formato de cadena como "123456789".'),s(`
        `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token punctuation"},"."),s("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),dn=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@grammyjs/ratelimiter"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token operator"},"?."),s("type "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"group"'),s(),n("span",{class:"token operator"},"||"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token operator"},"?."),s("type "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"supergroup"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},'// Tenga en cuenta que la clave debe ser un n\xFAmero en formato de cadena como "123456789".'),s(`
        `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token punctuation"},"."),s("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),mn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" limit "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"https://deno.land/x/grammy_ratelimiter@v1.1.6/mod.ts"'),n("span",{class:"token punctuation"},";"),s(`

bot`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token function"},"limit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function-variable function"},"keyGenerator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token operator"},"?."),s("type "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"group"'),s(),n("span",{class:"token operator"},"||"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token operator"},"?."),s("type "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"supergroup"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},'// Tenga en cuenta que la clave debe ser un n\xFAmero en formato de cadena como "123456789".'),s(`
        `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("chat"),n("span",{class:"token punctuation"},"."),s("id"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),kn=n("p",null,[s("En este ejemplo, he utilizado "),n("code",null,[s("chat"),n("wbr"),s(".id")]),s(" como clave \xFAnica para la limitaci\xF3n de la tasa.")],-1),bn=n("h2",{id:"resumen-del-plugin",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#resumen-del-plugin","aria-hidden":"true"},"#"),s(" Resumen del plugin")],-1),vn=n("li",null,[s("Nombre: "),n("code",null,"ratelimitador")],-1),gn=s("Fuente: "),_n={href:"https://github.com/grammyjs/ratelimiter",target:"_blank",rel:"noopener noreferrer"},hn=s("https://"),fn=n("wbr",null,null,-1),yn=s("github"),wn=n("wbr",null,null,-1),xn=s(".com"),jn=n("wbr",null,null,-1),En=s("/grammyjs"),qn=n("wbr",null,null,-1),Rn=s("/ratelimiter"),Sn=s("Referencia: "),Cn={href:"https://doc.deno.land/https://deno.land/x/grammy_ratelimiter/mod.ts",target:"_blank",rel:"noopener noreferrer"},Tn=i("https://<wbr>doc<wbr>.deno<wbr>.land<wbr>/https://<wbr>deno<wbr>.land<wbr>/x<wbr>/grammy<wbr>_ratelimiter<wbr>/mod<wbr>.ts",23);function zn(Pn,On){const u=c("AutotagPage"),o=c("ExternalLinkIcon"),t=c("CodeGroupItem"),l=c("CodeGroup"),r=c("RouterLink");return m(),k("div",null,[v,a(u,{config:'[{"url":["/plugins"],"exclude":["console-time","middlewares","autoquote","guide","session","keyboard","/"],"tag":[{"template":"official","text":"OFFICIAL","desc":"This plugin is published and maintained by grammY","locale":{"es":{"text":"OFICIAL","desc":"Este plugin es publicado y mantenido por grammY"},"id":{"text":"RESMI","desc":"Plugin ini dipublikasi dan dikelola oleh grammY"},"zh":{"text":"\u5B98\u65B9\u7EF4\u62A4","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531grammY\u53D1\u5E03\u548C\u7EF4\u62A4\u7684"}}}]},{"url":["/plugins"],"include":["console-time","middlewares","autoquote"],"tag":[{"template":"thirdparty","text":"THIRD-PARTY","desc":"This plugin is maintained by third-party","locale":{"es":{"text":"DE TERCEROS","desc":"Este plugin es mantenido por terceros"},"id":{"text":"PIHAK KETIGA","desc":"Plugin ini dikelola oleh pihak ketiga"},"zh":{"text":"\u7B2C\u4E09\u65B9","desc":"\u8FD9\u4E2A\u63D2\u4EF6\u662F\u7531\u7B2C\u4E09\u65B9\u7EF4\u62A4\u7684"}}}]},{"url":["/hosting"],"exclude":["gcf","comparison"],"tag":[{"template":"deno","desc":"This setup is able to run Deno bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Deno"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Deno"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CDeno\u673A\u5668\u4EBA"}}}]},{"url":["/hosting"],"include":["heroku","vps"],"tag":[{"template":"nodejs","desc":"This setup is able to run Node.js bots","locale":{"es":{"desc":"Esta configuraci\xF3n es capaz de ejecutar bots Node.js"},"id":{"desc":"Konfigurasi ini dapat dijalankan di bot Node.js"},"zh":{"desc":"\u8FD9\u4E2A\u8BBE\u7F6E\u80FD\u591F\u8FD0\u884CNode.js\u673A\u5668\u4EBA"}}}]}]'}),n("p",null,[g,n("a",_,[h,a(o)]),f]),y,n("ul",null,[w,n("li",null,[x,j,E,q,n("a",R,[S,a(o)]),C,T,z]),P,O]),L,n("p",null,[G,M,I,n("a",N,[D,a(o)]),Y,n("a",F,[A,a(o)]),B,J,K,U,V]),H,a(l,null,{default:e(()=>[a(t,{title:"TypeScript",active:""},{default:e(()=>[W]),_:1}),a(t,{title:"JavaScript"},{default:e(()=>[Q]),_:1}),a(t,{title:"Deno"},{default:e(()=>[X]),_:1})]),_:1}),Z,$,a(l,null,{default:e(()=>[a(t,{title:"TypeScript",active:""},{default:e(()=>[nn]),_:1}),a(t,{title:"JavaScript"},{default:e(()=>[sn]),_:1}),a(t,{title:"Deno"},{default:e(()=>[an]),_:1})]),_:1}),n("p",null,[en,tn,on,a(r,{to:"/es/guide/middleware.html#the-middleware-stack"},{default:e(()=>[cn]),_:1}),ln]),un,rn,a(l,null,{default:e(()=>[a(t,{title:"TypeScript",active:""},{default:e(()=>[pn]),_:1}),a(t,{title:"JavaScript"},{default:e(()=>[dn]),_:1}),a(t,{title:"Deno"},{default:e(()=>[mn]),_:1})]),_:1}),kn,bn,n("ul",null,[vn,n("li",null,[gn,n("a",_n,[hn,fn,yn,wn,xn,jn,En,qn,Rn,a(o)])]),n("li",null,[Sn,n("a",Cn,[Tn,a(o)])])])])}const Mn=d(b,[["render",zn],["__file","ratelimiter.html.vue"]]);export{Mn as default};
