<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>互动菜单 (menu) | grammY</title><meta name="description" content="Telegram Bot 框架">
    <link rel="modulepreload" href="/PQ-507/assets/app.9a621f1c.js"><link rel="modulepreload" href="/PQ-507/assets/menu.html.952cf0b3.js"><link rel="modulepreload" href="/PQ-507/assets/menu.html.82df0500.js"><link rel="prefetch" href="/PQ-507/assets/index.html.0429b483.js"><link rel="prefetch" href="/PQ-507/assets/index.html.2401d292.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.820945fa.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.064205fe.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.992dcb0e.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.c404e72a.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.5a572dfa.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.fe634161.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.1e8ebd48.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.3e1cae77.js"><link rel="prefetch" href="/PQ-507/assets/index.html.fb39b504.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.4b7b6125.js"><link rel="prefetch" href="/PQ-507/assets/index.html.e45b3ea7.js"><link rel="prefetch" href="/PQ-507/assets/index.html.172886ab.js"><link rel="prefetch" href="/PQ-507/assets/api.html.d34afc0f.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.65923044.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.c2610c77.js"><link rel="prefetch" href="/PQ-507/assets/context.html.d7289dc7.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.346b4d4f.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.d567f2e9.js"><link rel="prefetch" href="/PQ-507/assets/files.html.5df1fdf3.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.ff3c15e1.js"><link rel="prefetch" href="/PQ-507/assets/games.html.ebb92d65.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.3aad9f5a.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.9fa5435e.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.d062e0ed.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.c32c1afb.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.864b515f.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.98a47251.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.94978e12.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.62be9a83.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.42eb8541.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.865cf776.js"><link rel="prefetch" href="/PQ-507/assets/index.html.564f39e8.js"><link rel="prefetch" href="/PQ-507/assets/index.html.cc711d93.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.936035a2.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.78a23988.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.12deb6e8.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.defb3bd5.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.3fa37598.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.c5bb9723.js"><link rel="prefetch" href="/PQ-507/assets/files.html.ef09f33a.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.ba582aa1.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.4a675f4a.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.cf9373cb.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.45cb69c6.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.5d3ef392.js"><link rel="prefetch" href="/PQ-507/assets/menu.html.44e9413f.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.ae18d713.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.c7127508.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.79f66dc2.js"><link rel="prefetch" href="/PQ-507/assets/router.html.a55dc37e.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.221bbb46.js"><link rel="prefetch" href="/PQ-507/assets/session.html.a3ebd553.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.42e1e9e7.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.3010fbb3.js"><link rel="prefetch" href="/PQ-507/assets/about.html.e9ce3575.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.5589e0a7.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.4a46d2bc.js"><link rel="prefetch" href="/PQ-507/assets/index.html.8d516f91.js"><link rel="prefetch" href="/PQ-507/assets/index.html.0ea21131.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.947cfd03.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.adb704f3.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.62700685.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.d9e32858.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.214116d2.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.17ebd1a5.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.b2cc831f.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.0d715264.js"><link rel="prefetch" href="/PQ-507/assets/index.html.655275db.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.4da510e2.js"><link rel="prefetch" href="/PQ-507/assets/index.html.b68e7c4e.js"><link rel="prefetch" href="/PQ-507/assets/api.html.864221a5.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.d83b67aa.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.0c654628.js"><link rel="prefetch" href="/PQ-507/assets/context.html.684cfc10.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.66bb2eb6.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.3bd197a1.js"><link rel="prefetch" href="/PQ-507/assets/files.html.b3f5719d.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.2fc848b9.js"><link rel="prefetch" href="/PQ-507/assets/games.html.ed2eeb11.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.bee7700c.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.3dd234a2.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.2c38a111.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.956472a4.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.62a530ba.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.63942683.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.dbb08649.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.3c9bdbf2.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.4095b80a.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.61f59ec6.js"><link rel="prefetch" href="/PQ-507/assets/index.html.d277051d.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.14415e0e.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.747c52ec.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.24250ac2.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.f30415bd.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.348212b4.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.2ff9e6f8.js"><link rel="prefetch" href="/PQ-507/assets/files.html.464300ec.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.28527bf9.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.cdc01534.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.29c64e37.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.b76bcf30.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.6c1187da.js"><link rel="prefetch" href="/PQ-507/assets/menu.html.359e334b.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.3fb3b18c.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.489521cc.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.2ce9adf0.js"><link rel="prefetch" href="/PQ-507/assets/router.html.3db48592.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.924a6d6a.js"><link rel="prefetch" href="/PQ-507/assets/session.html.bc00753b.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.07d2931a.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.17e46909.js"><link rel="prefetch" href="/PQ-507/assets/about.html.6acc59e5.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.19d2b82f.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.525026ef.js"><link rel="prefetch" href="/PQ-507/assets/index.html.c671af3a.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.890ba700.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.99fc87f0.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.93e739dc.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.a206407d.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.77f11b74.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.b0186def.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.431bf13f.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.76eb6336.js"><link rel="prefetch" href="/PQ-507/assets/index.html.629ca643.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.cea54aec.js"><link rel="prefetch" href="/PQ-507/assets/index.html.374cf0b5.js"><link rel="prefetch" href="/PQ-507/assets/api.html.a789ac69.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.a5f54cb2.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.f5bc337a.js"><link rel="prefetch" href="/PQ-507/assets/context.html.e94c9f2e.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.d3d220f8.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.cb531b7a.js"><link rel="prefetch" href="/PQ-507/assets/files.html.1cbd9c21.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.18865e77.js"><link rel="prefetch" href="/PQ-507/assets/games.html.019dc6f4.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.cdb13cc0.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.02267dd2.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.e8487eb7.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.beeb4db0.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.ece5207a.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.d91caeb1.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.bf1ad988.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.6bd0b496.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.2491b04c.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.455bb1d3.js"><link rel="prefetch" href="/PQ-507/assets/index.html.567ecd8c.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.0b549243.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.71f5a100.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.fa1f4413.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.e19c55a4.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.c30ab8ca.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.52bf46d1.js"><link rel="prefetch" href="/PQ-507/assets/files.html.98469a89.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.ffdcc7f5.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.381a5a51.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.f131977d.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.d9b0fa07.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.19037e93.js"><link rel="prefetch" href="/PQ-507/assets/menu.html.b4a2a971.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.8d7d84ce.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.c84f7014.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.ba826745.js"><link rel="prefetch" href="/PQ-507/assets/router.html.93c48d0c.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.166cbeba.js"><link rel="prefetch" href="/PQ-507/assets/session.html.fe8e3213.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.97e4d1f0.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.55bf320d.js"><link rel="prefetch" href="/PQ-507/assets/about.html.4abcfa07.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.8ed17bd9.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.0dd6c2c4.js"><link rel="prefetch" href="/PQ-507/assets/index.html.45898178.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.75afc00d.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.71e88b3b.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.afa5db3b.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.b70254e4.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.2858f460.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.ae951df2.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.d2ff17dd.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.6f5b57b6.js"><link rel="prefetch" href="/PQ-507/assets/index.html.74522b16.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.24e682eb.js"><link rel="prefetch" href="/PQ-507/assets/index.html.9de295a7.js"><link rel="prefetch" href="/PQ-507/assets/api.html.8ed7866f.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.7afbeb28.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.131d044b.js"><link rel="prefetch" href="/PQ-507/assets/context.html.f1f04579.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.6efb3c25.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.0c95dbb6.js"><link rel="prefetch" href="/PQ-507/assets/files.html.c53a8155.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.dab2ea34.js"><link rel="prefetch" href="/PQ-507/assets/games.html.60a32e8c.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.7d3308dc.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.c644e6f2.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.2b2e7021.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.8e8a095a.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.65d3d0d9.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.ec616321.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.8a35f9f5.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.eebfbbd1.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.b2bd9634.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.a01c8a3d.js"><link rel="prefetch" href="/PQ-507/assets/index.html.f9a366b7.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.9a2e5f4e.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.3d2bcb91.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.d5692cab.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.3cc2e9f1.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.720733fe.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.3cad2c19.js"><link rel="prefetch" href="/PQ-507/assets/files.html.18980803.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.6d51903a.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.6086fd79.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.d799a6e4.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.49c4ade0.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.9ccac385.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.edc26c7e.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.17765e1f.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.354f2b64.js"><link rel="prefetch" href="/PQ-507/assets/router.html.72a4369c.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.c9417859.js"><link rel="prefetch" href="/PQ-507/assets/session.html.79028198.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.08a45480.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.3837fb8a.js"><link rel="prefetch" href="/PQ-507/assets/about.html.41287b90.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.162bdf02.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.abba6af1.js"><link rel="prefetch" href="/PQ-507/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/PQ-507/assets/index.html.bb2aaaf1.js"><link rel="prefetch" href="/PQ-507/assets/index.html.cd0ef313.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.b47c9392.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.9e979b52.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.92f0e378.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.3a10f4cf.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.d8b36b3b.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.17e8b497.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.0d37d930.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.101387c3.js"><link rel="prefetch" href="/PQ-507/assets/index.html.1b33fbb9.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.398809e9.js"><link rel="prefetch" href="/PQ-507/assets/index.html.862379ae.js"><link rel="prefetch" href="/PQ-507/assets/index.html.657dfdda.js"><link rel="prefetch" href="/PQ-507/assets/api.html.b30b32dd.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.f9f9b659.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.a5287ee1.js"><link rel="prefetch" href="/PQ-507/assets/context.html.c0b13940.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.53ec4d2b.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.73f971ed.js"><link rel="prefetch" href="/PQ-507/assets/files.html.db3883c7.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.c6a8d946.js"><link rel="prefetch" href="/PQ-507/assets/games.html.fe0ca77c.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.d84b072f.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.d478fa03.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.aaffd866.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.ead1adde.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.bc528738.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.5dbabde6.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.c371de9a.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.bc3f4d58.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.880cd40e.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.f202dd41.js"><link rel="prefetch" href="/PQ-507/assets/index.html.4c267e02.js"><link rel="prefetch" href="/PQ-507/assets/index.html.095cb5d8.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.040a940b.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.b49d6550.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.b9c3af17.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.b0e958f8.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.25247163.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.fcb0f9fa.js"><link rel="prefetch" href="/PQ-507/assets/files.html.1896704c.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.c0a9e31a.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.baf93bd4.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.1b959603.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.7d745312.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.d8cc5bf2.js"><link rel="prefetch" href="/PQ-507/assets/menu.html.2ab5d511.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.0ea02702.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.3ade7c3a.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.a51df23a.js"><link rel="prefetch" href="/PQ-507/assets/router.html.9e6e3e37.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.0cfd7a7a.js"><link rel="prefetch" href="/PQ-507/assets/session.html.61ade3da.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.62f0bb3e.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.4d5447d8.js"><link rel="prefetch" href="/PQ-507/assets/about.html.d364b2ad.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.f916e28f.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.d8745589.js"><link rel="prefetch" href="/PQ-507/assets/index.html.32763ed0.js"><link rel="prefetch" href="/PQ-507/assets/index.html.b83f0540.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.63b8ae85.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.26cf2a72.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.90fcc09a.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.c93b597b.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.0661b729.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.f83d0918.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.efcb99eb.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.2c97f9f6.js"><link rel="prefetch" href="/PQ-507/assets/index.html.6da01bb7.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.3c4ea88c.js"><link rel="prefetch" href="/PQ-507/assets/index.html.53d93165.js"><link rel="prefetch" href="/PQ-507/assets/api.html.b1c0ec83.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.bd12d8c5.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.b4e11421.js"><link rel="prefetch" href="/PQ-507/assets/context.html.5a67e58c.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.d58a738e.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.8892adde.js"><link rel="prefetch" href="/PQ-507/assets/files.html.cac44e5e.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.a0eda641.js"><link rel="prefetch" href="/PQ-507/assets/games.html.6b1811e3.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.a0241642.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.c4d3c552.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.ba49b4b7.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.a3999a91.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.ae8ca8cc.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.ab914b93.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.a8d8bb4e.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.34347047.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.959977d2.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.7a9f1041.js"><link rel="prefetch" href="/PQ-507/assets/index.html.a95078c6.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.3e003c0d.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.28c3a1f1.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.4b5f939f.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.e2771cac.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.232806fd.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.95340a80.js"><link rel="prefetch" href="/PQ-507/assets/files.html.1baf75f2.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.66d8b1e4.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.537afe6e.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.2cc8218b.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.8280d209.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.13e2179b.js"><link rel="prefetch" href="/PQ-507/assets/menu.html.d7f22cd2.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.1173042d.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.c40c34dc.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.87b4066f.js"><link rel="prefetch" href="/PQ-507/assets/router.html.07875b3f.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.2833faca.js"><link rel="prefetch" href="/PQ-507/assets/session.html.573f5c39.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.1af9c786.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.51ef5ec4.js"><link rel="prefetch" href="/PQ-507/assets/about.html.361d2099.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.b18fa2b7.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.4f47bfe5.js"><link rel="prefetch" href="/PQ-507/assets/index.html.a540f094.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.16d13785.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.4dabc1ce.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.f0e2e047.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.9c21f70f.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.4392fe69.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.62f89338.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.89c09125.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.1d525ed2.js"><link rel="prefetch" href="/PQ-507/assets/index.html.4669faba.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.4ff31969.js"><link rel="prefetch" href="/PQ-507/assets/index.html.aaa3b13a.js"><link rel="prefetch" href="/PQ-507/assets/api.html.d7ba9c47.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.783be127.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.de9f3557.js"><link rel="prefetch" href="/PQ-507/assets/context.html.1283ddd2.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.44743e06.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.96897ada.js"><link rel="prefetch" href="/PQ-507/assets/files.html.34fcf896.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.aff29df3.js"><link rel="prefetch" href="/PQ-507/assets/games.html.c05ecf0a.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.3b38b81d.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.48b53341.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.5628c16e.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.654e1e6f.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.0ebeba5f.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.516719f4.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.ceafcd54.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.258bd6ea.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.180a92a2.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.48766c56.js"><link rel="prefetch" href="/PQ-507/assets/index.html.f56d9854.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.6004b4f2.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.e65e3768.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.6264da2f.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.d6fd1c57.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.e275e266.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.1ee5bb19.js"><link rel="prefetch" href="/PQ-507/assets/files.html.e4d3f175.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.f5c57a34.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.3f8c9659.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.72d3d687.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.ca3e005b.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.4043a667.js"><link rel="prefetch" href="/PQ-507/assets/menu.html.16bfed4c.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.cbc405df.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.4fa3e928.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.89abe789.js"><link rel="prefetch" href="/PQ-507/assets/router.html.8b05ceb8.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.66289036.js"><link rel="prefetch" href="/PQ-507/assets/session.html.b81cfa28.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.8fc5ac73.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.c33803d9.js"><link rel="prefetch" href="/PQ-507/assets/about.html.c621333c.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.de12989a.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.7a89f6e5.js"><link rel="prefetch" href="/PQ-507/assets/index.html.87464ab5.js"><link rel="prefetch" href="/PQ-507/assets/deployment.html.6b242a21.js"><link rel="prefetch" href="/PQ-507/assets/flood.html.9459f7e4.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.42164eac.js"><link rel="prefetch" href="/PQ-507/assets/proxy.html.b1405e4e.js"><link rel="prefetch" href="/PQ-507/assets/reliability.html.b31f4d56.js"><link rel="prefetch" href="/PQ-507/assets/scaling.html.07a5b5c4.js"><link rel="prefetch" href="/PQ-507/assets/structuring.html.2e77cdd6.js"><link rel="prefetch" href="/PQ-507/assets/transformers.html.1ec17c41.js"><link rel="prefetch" href="/PQ-507/assets/index.html.12dbc109.js"><link rel="prefetch" href="/PQ-507/assets/examples.html.f42e37e1.js"><link rel="prefetch" href="/PQ-507/assets/index.html.2c9f047a.js"><link rel="prefetch" href="/PQ-507/assets/api.html.b8d2960d.js"><link rel="prefetch" href="/PQ-507/assets/basics.html.c0e38fc1.js"><link rel="prefetch" href="/PQ-507/assets/commands.html.898e06e1.js"><link rel="prefetch" href="/PQ-507/assets/context.html.4cfb5b13.js"><link rel="prefetch" href="/PQ-507/assets/deployment-types.html.9f353de9.js"><link rel="prefetch" href="/PQ-507/assets/errors.html.c1f33a26.js"><link rel="prefetch" href="/PQ-507/assets/files.html.3b1db6c7.js"><link rel="prefetch" href="/PQ-507/assets/filter-queries.html.ccbdea1b.js"><link rel="prefetch" href="/PQ-507/assets/games.html.c9666460.js"><link rel="prefetch" href="/PQ-507/assets/getting-started.html.9c0c02bf.js"><link rel="prefetch" href="/PQ-507/assets/inline-queries.html.38411603.js"><link rel="prefetch" href="/PQ-507/assets/introduction.html.c2cbef57.js"><link rel="prefetch" href="/PQ-507/assets/middleware.html.b370995e.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.4de360b8.js"><link rel="prefetch" href="/PQ-507/assets/deno-deploy.html.e626de11.js"><link rel="prefetch" href="/PQ-507/assets/gcf.html.357f2329.js"><link rel="prefetch" href="/PQ-507/assets/heroku.html.3f1f0f8c.js"><link rel="prefetch" href="/PQ-507/assets/supabase.html.a9e314e1.js"><link rel="prefetch" href="/PQ-507/assets/vps.html.3c7980f0.js"><link rel="prefetch" href="/PQ-507/assets/index.html.4004fd7c.js"><link rel="prefetch" href="/PQ-507/assets/auto-retry.html.ccf7621d.js"><link rel="prefetch" href="/PQ-507/assets/autoquote.html.30db83da.js"><link rel="prefetch" href="/PQ-507/assets/command-filter.html.5dd32884.js"><link rel="prefetch" href="/PQ-507/assets/console-time.html.013cfb37.js"><link rel="prefetch" href="/PQ-507/assets/conversations.html.e1ff0a90.js"><link rel="prefetch" href="/PQ-507/assets/emoji.html.00e60e5f.js"><link rel="prefetch" href="/PQ-507/assets/files.html.32ecacf9.js"><link rel="prefetch" href="/PQ-507/assets/fluent.html.23b3094f.js"><link rel="prefetch" href="/PQ-507/assets/guide.html.fa949fe0.js"><link rel="prefetch" href="/PQ-507/assets/hydrate.html.e60546c6.js"><link rel="prefetch" href="/PQ-507/assets/i18n.html.b0cf7073.js"><link rel="prefetch" href="/PQ-507/assets/keyboard.html.ee38f2be.js"><link rel="prefetch" href="/PQ-507/assets/middlewares.html.f0ec689d.js"><link rel="prefetch" href="/PQ-507/assets/parse-mode.html.2080b3b8.js"><link rel="prefetch" href="/PQ-507/assets/ratelimiter.html.e0c88408.js"><link rel="prefetch" href="/PQ-507/assets/router.html.317f37da.js"><link rel="prefetch" href="/PQ-507/assets/runner.html.040a42d0.js"><link rel="prefetch" href="/PQ-507/assets/session.html.3737fcd4.js"><link rel="prefetch" href="/PQ-507/assets/stateless-question.html.bae80d5c.js"><link rel="prefetch" href="/PQ-507/assets/transformer-throttler.html.f68372dc.js"><link rel="prefetch" href="/PQ-507/assets/about.html.db7b4d84.js"><link rel="prefetch" href="/PQ-507/assets/comparison.html.ffbf46d8.js"><link rel="prefetch" href="/PQ-507/assets/faq.html.b2025cdb.js"><link rel="prefetch" href="/PQ-507/assets/404.html.3a4c4ea6.js"><link rel="prefetch" href="/PQ-507/assets/AutotagMenu.601d5126.js"><link rel="prefetch" href="/PQ-507/assets/AutotagPage.5fd15934.js"><link rel="prefetch" href="/PQ-507/assets/Tag.a0c414b3.js"><link rel="prefetch" href="/PQ-507/assets/TagGroup.6a73fe2a.js">
    <link rel="stylesheet" href="/PQ-507/assets/style.8698b780.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/PQ-507/zh/" class=""><img class="logo" src="/PQ-507/Y.png" alt="grammY"><span class="site-name can-hide">grammY</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!-- Start inject --><!--[--><div class="navbar-item"><a href="/PQ-507/zh/guide/" class="" aria-label="基础"><!--[--><!--]--><!-- Start inject --><span>基础 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="了解"><span class="title">了解</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="了解"><span class="title">了解</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/" class="" aria-label="概述"><!--[--><!--]--><!-- Start inject --><span>概述 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/introduction.html" class="" aria-label="简介"><!--[--><!--]--><!-- Start inject --><span>简介 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/getting-started.html" class="" aria-label="入门"><!--[--><!--]--><!-- Start inject --><span>入门 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/basics.html" class="" aria-label="发送和接收消息"><!--[--><!--]--><!-- Start inject --><span>发送和接收消息 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/context.html" class="" aria-label="上下文"><!--[--><!--]--><!-- Start inject --><span>上下文 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/api.html" class="" aria-label="Bot API"><!--[--><!--]--><!-- Start inject --><span>Bot API <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/filter-queries.html" class="" aria-label="Filter 查询与 bot.on()"><!--[--><!--]--><!-- Start inject --><span>Filter 查询与 bot.on() <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/commands.html" class="" aria-label="Commands"><!--[--><!--]--><!-- Start inject --><span>Commands <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/middleware.html" class="" aria-label="中间件"><!--[--><!--]--><!-- Start inject --><span>中间件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/errors.html" class="" aria-label="错误处理"><!--[--><!--]--><!-- Start inject --><span>错误处理 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/inline-queries.html" class="" aria-label="Inline Queries"><!--[--><!--]--><!-- Start inject --><span>Inline Queries <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/files.html" class="" aria-label="文件管理"><!--[--><!--]--><!-- Start inject --><span>文件管理 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/games.html" class="" aria-label="游戏"><!--[--><!--]--><!-- Start inject --><span>游戏 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/deployment-types.html" class="" aria-label="长轮询 vs. Webhooks"><!--[--><!--]--><!-- Start inject --><span>长轮询 vs. Webhooks <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>进阶 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/" class="" aria-label="概述"><!--[--><!--]--><!-- Start inject --><span>概述 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/middleware.html" class="" aria-label="重构中间件"><!--[--><!--]--><!-- Start inject --><span>重构中间件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/structuring.html" class="" aria-label="I: 代码组织"><!--[--><!--]--><!-- Start inject --><span>I: 代码组织 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/scaling.html" class="" aria-label="II: 高负载"><!--[--><!--]--><!-- Start inject --><span>II: 高负载 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/reliability.html" class="" aria-label="III: 可靠性"><!--[--><!--]--><!-- Start inject --><span>III: 可靠性 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/flood.html" class="" aria-label="IV: 流量限制"><!--[--><!--]--><!-- Start inject --><span>IV: 流量限制 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/transformers.html" class="" aria-label="Bot API Transformers"><!--[--><!--]--><!-- Start inject --><span>Bot API Transformers <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/proxy.html" class="" aria-label="代理支持"><!--[--><!--]--><!-- Start inject --><span>代理支持 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/deployment.html" class="" aria-label="部署"><!--[--><!--]--><!-- Start inject --><span>部署 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="插件"><span class="title">插件</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="插件"><span class="title">插件</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>简介 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/" class="" aria-label="关于插件"><!--[--><!--]--><!-- Start inject --><span>关于插件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/guide.html" class="" aria-label="如何编写一个插件"><!--[--><!--]--><!-- Start inject --><span>如何编写一个插件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>内置插件 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/session.html" class="" aria-label="会话与数据储存"><!--[--><!--]--><!-- Start inject --><span>会话与数据储存 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/keyboard.html" class="" aria-label="Inline 与自定义 Keyboards"><!--[--><!--]--><!-- Start inject --><span>Inline 与自定义 Keyboards <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>官方维护 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/conversations.html" class="" aria-label="对话 (conversations)"><!--[--><!--]--><!-- Start inject --><span>对话 (conversations) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/PQ-507/zh/plugins/menu.html" class="router-link-active router-link-exact-active router-link-active" aria-label="互动菜单 (menu)"><!--[--><!--]--><!-- Start inject --><span>互动菜单 (menu) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/stateless-question.html" class="" aria-label="无状态问题 (stateless-question)"><!--[--><!--]--><!-- Start inject --><span>无状态问题 (stateless-question) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/runner.html" class="" aria-label="并发 (runner)"><!--[--><!--]--><!-- Start inject --><span>并发 (runner) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)"><!--[--><!--]--><!-- Start inject --><span>Hydration (hydrate) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/auto-retry.html" class="" aria-label="重试 API 请求 (auto-retry)"><!--[--><!--]--><!-- Start inject --><span>重试 API 请求 (auto-retry) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/transformer-throttler.html" class="" aria-label="流量控制 (transformer-throttler)"><!--[--><!--]--><!-- Start inject --><span>流量控制 (transformer-throttler) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/ratelimiter.html" class="" aria-label="限制用户速率 (ratelimiter)"><!--[--><!--]--><!-- Start inject --><span>限制用户速率 (ratelimiter) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/files.html" class="" aria-label="文件助手 (files)"><!--[--><!--]--><!-- Start inject --><span>文件助手 (files) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/i18n.html" class="" aria-label="国际化 (i18n)"><!--[--><!--]--><!-- Start inject --><span>国际化 (i18n) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/fluent.html" class="" aria-label="国际化 (fluent)"><!--[--><!--]--><!-- Start inject --><span>国际化 (fluent) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/router.html" class="" aria-label="路由器 (router)"><!--[--><!--]--><!-- Start inject --><span>路由器 (router) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/emoji.html" class="" aria-label="Emoji (emoji)"><!--[--><!--]--><!-- Start inject --><span>Emoji (emoji) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/parse-mode.html" class="" aria-label="解析模式 (parse-mode)"><!--[--><!--]--><!-- Start inject --><span>解析模式 (parse-mode) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>第三方 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/console-time.html" class="" aria-label="调试时输出日志"><!--[--><!--]--><!-- Start inject --><span>调试时输出日志 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/middlewares.html" class="" aria-label="有用的中间件"><!--[--><!--]--><!-- Start inject --><span>有用的中间件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/autoquote.html" class="" aria-label="自动引用"><!--[--><!--]--><!-- Start inject --><span>自动引用 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/#创建你自己的插件" class="" aria-label="[等待你的 PR!]"><!--[--><!--]--><!-- Start inject --><span>[等待你的 PR!] <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="示例"><span class="title">示例</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="示例"><span class="title">示例</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>示例 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY"><!--[--><!--]--><!-- Start inject --><span>Awesome grammY <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="示例 Bots 仓库"><!--[--><!--]--><!-- Start inject --><span>示例 Bots 仓库 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="资源"><span class="title">资源</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="资源"><span class="title">资源</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>grammY <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/resources/about.html" class="" aria-label="关于 grammY"><!--[--><!--]--><!-- Start inject --><span>关于 grammY <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（英语）"><!--[--><!--]--><!-- Start inject --><span>社区聊天（英语） <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（俄语）"><!--[--><!--]--><!-- Start inject --><span>社区聊天（俄语） <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="咨询"><!--[--><!--]--><!-- Start inject --><span>咨询 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter"><!--[--><!--]--><!-- Start inject --><span>Twitter <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/resources/faq.html" class="" aria-label="FAQ"><!--[--><!--]--><!-- Start inject --><span>FAQ <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/resources/comparison.html" class="" aria-label="与其他框架的比较"><!--[--><!--]--><!-- Start inject --><span>与其他框架的比较 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Telegram <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="面向开发者的介绍"><!--[--><!--]--><!-- Start inject --><span>面向开发者的介绍 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ"><!--[--><!--]--><!-- Start inject --><span>Bots FAQ <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API 概览"><!--[--><!--]--><!-- Start inject --><span>Bot API 概览 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Updates 示例"><!--[--><!--]--><!-- Start inject --><span>Updates 示例 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="托管服务"><span class="title">托管服务</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="托管服务"><span class="title">托管服务</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>总览 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/comparison.html" class="" aria-label="对比"><!--[--><!--]--><!-- Start inject --><span>对比 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>教程 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/deno-deploy.html" class="" aria-label="Deno Deploy"><!--[--><!--]--><!-- Start inject --><span>Deno Deploy <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/supabase.html" class="" aria-label="Supabase Edge Functions"><!--[--><!--]--><!-- Start inject --><span>Supabase Edge Functions <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/heroku.html" class="" aria-label="Heroku"><!--[--><!--]--><!-- Start inject --><span>Heroku <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/gcf.html" class="" aria-label="Google Cloud Functions"><!--[--><!--]--><!-- Start inject --><span>Google Cloud Functions <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/vps.html" class="" aria-label="Virtual Private Server"><!--[--><!--]--><!-- Start inject --><span>Virtual Private Server <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API 参考"><!--[--><!--]--><!-- Start inject --><span>API 参考 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><a href="/PQ-507/plugins/menu.html" class="" aria-label="English"><!--[--><!--]--><!-- Start inject --><span>English <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/PQ-507/es/plugins/menu.html" class="" aria-label="Español"><!--[--><!--]--><!-- Start inject --><span>Español <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/PQ-507/id/plugins/menu.html" class="" aria-label="Indonesia"><!--[--><!--]--><!-- Start inject --><span>Indonesia <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/PQ-507/zh/plugins/menu.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--><!-- Start inject --><span>简体中文 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--><!-- Start inject --><span>GitHub <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></div><!--]--><!-- End of inject --></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!-- Start inject --><!--[--><div class="navbar-item"><a href="/PQ-507/zh/guide/" class="" aria-label="基础"><!--[--><!--]--><!-- Start inject --><span>基础 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="了解"><span class="title">了解</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="了解"><span class="title">了解</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/" class="" aria-label="概述"><!--[--><!--]--><!-- Start inject --><span>概述 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/introduction.html" class="" aria-label="简介"><!--[--><!--]--><!-- Start inject --><span>简介 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/getting-started.html" class="" aria-label="入门"><!--[--><!--]--><!-- Start inject --><span>入门 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/basics.html" class="" aria-label="发送和接收消息"><!--[--><!--]--><!-- Start inject --><span>发送和接收消息 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/context.html" class="" aria-label="上下文"><!--[--><!--]--><!-- Start inject --><span>上下文 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/api.html" class="" aria-label="Bot API"><!--[--><!--]--><!-- Start inject --><span>Bot API <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/filter-queries.html" class="" aria-label="Filter 查询与 bot.on()"><!--[--><!--]--><!-- Start inject --><span>Filter 查询与 bot.on() <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/commands.html" class="" aria-label="Commands"><!--[--><!--]--><!-- Start inject --><span>Commands <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/middleware.html" class="" aria-label="中间件"><!--[--><!--]--><!-- Start inject --><span>中间件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/errors.html" class="" aria-label="错误处理"><!--[--><!--]--><!-- Start inject --><span>错误处理 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/inline-queries.html" class="" aria-label="Inline Queries"><!--[--><!--]--><!-- Start inject --><span>Inline Queries <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/files.html" class="" aria-label="文件管理"><!--[--><!--]--><!-- Start inject --><span>文件管理 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/games.html" class="" aria-label="游戏"><!--[--><!--]--><!-- Start inject --><span>游戏 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/guide/deployment-types.html" class="" aria-label="长轮询 vs. Webhooks"><!--[--><!--]--><!-- Start inject --><span>长轮询 vs. Webhooks <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>进阶 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/" class="" aria-label="概述"><!--[--><!--]--><!-- Start inject --><span>概述 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/middleware.html" class="" aria-label="重构中间件"><!--[--><!--]--><!-- Start inject --><span>重构中间件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/structuring.html" class="" aria-label="I: 代码组织"><!--[--><!--]--><!-- Start inject --><span>I: 代码组织 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/scaling.html" class="" aria-label="II: 高负载"><!--[--><!--]--><!-- Start inject --><span>II: 高负载 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/reliability.html" class="" aria-label="III: 可靠性"><!--[--><!--]--><!-- Start inject --><span>III: 可靠性 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/flood.html" class="" aria-label="IV: 流量限制"><!--[--><!--]--><!-- Start inject --><span>IV: 流量限制 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/transformers.html" class="" aria-label="Bot API Transformers"><!--[--><!--]--><!-- Start inject --><span>Bot API Transformers <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/proxy.html" class="" aria-label="代理支持"><!--[--><!--]--><!-- Start inject --><span>代理支持 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/advanced/deployment.html" class="" aria-label="部署"><!--[--><!--]--><!-- Start inject --><span>部署 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="插件"><span class="title">插件</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="插件"><span class="title">插件</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>简介 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/" class="" aria-label="关于插件"><!--[--><!--]--><!-- Start inject --><span>关于插件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/guide.html" class="" aria-label="如何编写一个插件"><!--[--><!--]--><!-- Start inject --><span>如何编写一个插件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>内置插件 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/session.html" class="" aria-label="会话与数据储存"><!--[--><!--]--><!-- Start inject --><span>会话与数据储存 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/keyboard.html" class="" aria-label="Inline 与自定义 Keyboards"><!--[--><!--]--><!-- Start inject --><span>Inline 与自定义 Keyboards <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>官方维护 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/conversations.html" class="" aria-label="对话 (conversations)"><!--[--><!--]--><!-- Start inject --><span>对话 (conversations) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/PQ-507/zh/plugins/menu.html" class="router-link-active router-link-exact-active router-link-active" aria-label="互动菜单 (menu)"><!--[--><!--]--><!-- Start inject --><span>互动菜单 (menu) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/stateless-question.html" class="" aria-label="无状态问题 (stateless-question)"><!--[--><!--]--><!-- Start inject --><span>无状态问题 (stateless-question) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/runner.html" class="" aria-label="并发 (runner)"><!--[--><!--]--><!-- Start inject --><span>并发 (runner) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/hydrate.html" class="" aria-label="Hydration (hydrate)"><!--[--><!--]--><!-- Start inject --><span>Hydration (hydrate) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/auto-retry.html" class="" aria-label="重试 API 请求 (auto-retry)"><!--[--><!--]--><!-- Start inject --><span>重试 API 请求 (auto-retry) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/transformer-throttler.html" class="" aria-label="流量控制 (transformer-throttler)"><!--[--><!--]--><!-- Start inject --><span>流量控制 (transformer-throttler) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/ratelimiter.html" class="" aria-label="限制用户速率 (ratelimiter)"><!--[--><!--]--><!-- Start inject --><span>限制用户速率 (ratelimiter) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/files.html" class="" aria-label="文件助手 (files)"><!--[--><!--]--><!-- Start inject --><span>文件助手 (files) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/i18n.html" class="" aria-label="国际化 (i18n)"><!--[--><!--]--><!-- Start inject --><span>国际化 (i18n) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/fluent.html" class="" aria-label="国际化 (fluent)"><!--[--><!--]--><!-- Start inject --><span>国际化 (fluent) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/router.html" class="" aria-label="路由器 (router)"><!--[--><!--]--><!-- Start inject --><span>路由器 (router) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/emoji.html" class="" aria-label="Emoji (emoji)"><!--[--><!--]--><!-- Start inject --><span>Emoji (emoji) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/parse-mode.html" class="" aria-label="解析模式 (parse-mode)"><!--[--><!--]--><!-- Start inject --><span>解析模式 (parse-mode) <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>第三方 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/console-time.html" class="" aria-label="调试时输出日志"><!--[--><!--]--><!-- Start inject --><span>调试时输出日志 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/middlewares.html" class="" aria-label="有用的中间件"><!--[--><!--]--><!-- Start inject --><span>有用的中间件 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/autoquote.html" class="" aria-label="自动引用"><!--[--><!--]--><!-- Start inject --><span>自动引用 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/plugins/#创建你自己的插件" class="" aria-label="[等待你的 PR!]"><!--[--><!--]--><!-- Start inject --><span>[等待你的 PR!] <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="示例"><span class="title">示例</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="示例"><span class="title">示例</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>示例 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/awesome-grammY" rel="noopener noreferrer" target="_blank" aria-label="Awesome grammY"><!--[--><!--]--><!-- Start inject --><span>Awesome grammY <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/grammyjs/examples" rel="noopener noreferrer" target="_blank" aria-label="示例 Bots 仓库"><!--[--><!--]--><!-- Start inject --><span>示例 Bots 仓库 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="资源"><span class="title">资源</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="资源"><span class="title">资源</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>grammY <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/resources/about.html" class="" aria-label="关于 grammY"><!--[--><!--]--><!-- Start inject --><span>关于 grammY <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（英语）"><!--[--><!--]--><!-- Start inject --><span>社区聊天（英语） <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_ru" rel="noopener noreferrer" target="_blank" aria-label="社区聊天（俄语）"><!--[--><!--]--><!-- Start inject --><span>社区聊天（俄语） <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://t.me/grammyjs_news" rel="noopener noreferrer" target="_blank" aria-label="咨询"><!--[--><!--]--><!-- Start inject --><span>咨询 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://twitter.com/grammy_js" rel="noopener noreferrer" target="_blank" aria-label="Twitter"><!--[--><!--]--><!-- Start inject --><span>Twitter <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/resources/faq.html" class="" aria-label="FAQ"><!--[--><!--]--><!-- Start inject --><span>FAQ <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/resources/comparison.html" class="" aria-label="与其他框架的比较"><!--[--><!--]--><!-- Start inject --><span>与其他框架的比较 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Telegram <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots" rel="noopener noreferrer" target="_blank" aria-label="面向开发者的介绍"><!--[--><!--]--><!-- Start inject --><span>面向开发者的介绍 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/faq" rel="noopener noreferrer" target="_blank" aria-label="Bots FAQ"><!--[--><!--]--><!-- Start inject --><span>Bots FAQ <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/api" rel="noopener noreferrer" target="_blank" aria-label="Bot API 概览"><!--[--><!--]--><!-- Start inject --><span>Bot API 概览 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="external-link" href="https://core.telegram.org/bots/webhooks#testing-your-bot-with-updates" rel="noopener noreferrer" target="_blank" aria-label="Updates 示例"><!--[--><!--]--><!-- Start inject --><span>Updates 示例 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="托管服务"><span class="title">托管服务</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="托管服务"><span class="title">托管服务</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>总览 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/comparison.html" class="" aria-label="对比"><!--[--><!--]--><!-- Start inject --><span>对比 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>教程 <!----><!----></span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/deno-deploy.html" class="" aria-label="Deno Deploy"><!--[--><!--]--><!-- Start inject --><span>Deno Deploy <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/supabase.html" class="" aria-label="Supabase Edge Functions"><!--[--><!--]--><!-- Start inject --><span>Supabase Edge Functions <div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/heroku.html" class="" aria-label="Heroku"><!--[--><!--]--><!-- Start inject --><span>Heroku <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/gcf.html" class="" aria-label="Google Cloud Functions"><!--[--><!--]--><!-- Start inject --><span>Google Cloud Functions <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/PQ-507/zh/hosting/vps.html" class="" aria-label="Virtual Private Server"><!--[--><!--]--><!-- Start inject --><span>Virtual Private Server <div class="tag-group" style=""><!--[--><!--[--><!----><!----><!--]--><!--]--></div><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><a class="external-link" href="https://doc.deno.land/https://deno.land/x/grammy/mod.ts" rel="noopener noreferrer" target="_blank" aria-label="API 参考"><!--[--><!--]--><!-- Start inject --><span>API 参考 <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><!-- Sstart inject--><!----><!----><!-- End of inject --><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><!-- Start inject --><!----><!-- End of Inject --><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!-- Start inject --><!--[--><li class="navbar-dropdown-item"><a href="/PQ-507/plugins/menu.html" class="" aria-label="English"><!--[--><!--]--><!-- Start inject --><span>English <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/PQ-507/es/plugins/menu.html" class="" aria-label="Español"><!--[--><!--]--><!-- Start inject --><span>Español <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/PQ-507/id/plugins/menu.html" class="" aria-label="Indonesia"><!--[--><!--]--><!-- Start inject --><span>Indonesia <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/PQ-507/zh/plugins/menu.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--><!-- Start inject --><span>简体中文 <!----><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a></li><!--]--><!-- End of inject --></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/grammyjs/grammY" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--><!-- Start inject --><span>GitHub <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></div><!--]--><!-- End of inject --></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">互动菜单 (menu) <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="简介"><!--[--><!--]--><!-- Start inject --><span>简介 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#添加按钮" class="router-link-active router-link-exact-active sidebar-item" aria-label="添加按钮"><!--[--><!--]--><!-- Start inject --><span>添加按钮 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#发送菜单" class="router-link-active router-link-exact-active sidebar-item" aria-label="发送菜单"><!--[--><!--]--><!-- Start inject --><span>发送菜单 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#动态标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态标签"><!--[--><!--]--><!-- Start inject --><span>动态标签 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#更新或关闭菜单" class="router-link-active router-link-exact-active sidebar-item" aria-label="更新或关闭菜单"><!--[--><!--]--><!-- Start inject --><span>更新或关闭菜单 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#菜单之间的导航" class="router-link-active router-link-exact-active sidebar-item" aria-label="菜单之间的导航"><!--[--><!--]--><!-- Start inject --><span>菜单之间的导航 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#payloads" class="router-link-active router-link-exact-active sidebar-item" aria-label="Payloads"><!--[--><!--]--><!-- Start inject --><span>Payloads <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#动态范围" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态范围"><!--[--><!--]--><!-- Start inject --><span>动态范围 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#手动回复-callback-查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="手动回复 Callback 查询"><!--[--><!--]--><!-- Start inject --><span>手动回复 Callback 查询 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#过时的菜单和指纹" class="router-link-active router-link-exact-active sidebar-item" aria-label="过时的菜单和指纹"><!--[--><!--]--><!-- Start inject --><span>过时的菜单和指纹 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#它是如何工作的" class="router-link-active router-link-exact-active sidebar-item" aria-label="它是如何工作的"><!--[--><!--]--><!-- Start inject --><span>它是如何工作的 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/PQ-507/zh/plugins/menu.html#插件概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="插件概述"><!--[--><!--]--><!-- Start inject --><span>插件概述 <!--v-if--><!--v-if--></span><!-- End of inject --><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="互动菜单-menu" tabindex="-1"><a class="header-anchor" href="#互动菜单-menu" aria-hidden="true">#</a> 互动菜单 (<code>menu</code>)</h1><div class="tag-group" style=""><!--[--><!--[--><!----><!--]--><!--]--></div><p>轻松地创建一个互动菜单。</p><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介" aria-hidden="true">#</a> 简介</h2><p>一个 inline keyboard 是一条消息下面的按钮数组。 grammY 有一个 <a href="/PQ-507/zh/plugins/keyboard.html#inline-keyboards" class="">内置插件</a> 可以创建基本的 inline keybaords。</p><p>这个菜单插件将这个想法更进一步，让你能够在聊天里创建精美的菜单。 它们可以有交互的按钮，多个页面之间的导航，以及更多。</p><p>这里是一个简单的例子，不言自明。</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TypeScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">JavaScript</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Deno</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;grammy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@grammyjs/menu&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 bot。</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个简单的菜单。</span>
<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;my-menu-identifier&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;You pressed A!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;You pressed B!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使其具有互动性。</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发送菜单。</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Check out this menu:&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> menu <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Bot <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;grammy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Menu <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@grammyjs/menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 bot。</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个简单的菜单。</span>
<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;my-menu-identifier&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;You pressed A!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;You pressed B!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使其具有互动性。</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发送菜单。</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Check out this menu:&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">reply_markup</span><span class="token operator">:</span> menu <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Bot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://deno.land/x/grammy@v1.11.1/mod.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://deno.land/x/grammy_menu@v1.1.2/mod.ts&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 bot。</span>
<span class="token keyword">const</span> bot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bot</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个简单的菜单。</span>
<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;my-menu-identifier&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;You pressed A!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;You pressed B!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使其具有互动性。</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发送菜单。</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Check out this menu:&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> menu <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><blockquote><p>请确保在其他中间件之前安装所有菜单，特别是在使用回调查询数据的中间件之前。</p></blockquote><p>当然，如果你使用 <a href="/PQ-507/zh/guide/context.html#%E5%AE%9A%E5%88%B6%E4%BD%A0%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E5%AF%B9%E8%B1%A1" class="">自定义的上下文类型</a>，你也可以传递给 <code>Menu</code>。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu<span class="token operator">&lt;</span>MyContext<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="添加按钮" tabindex="-1"><a class="header-anchor" href="#添加按钮" aria-hidden="true">#</a> 添加按钮</h2><p>菜单插件会像 <a href="/PQ-507/zh/plugins/keyboard.html#inline-keyboards" class="">inline keyboard 插件</a> 一样布局你的键盘。 <code>Inline<wbr>Keyboard</code> 类替换为 <code>Menu</code> 类。</p><p>下面是一个菜单的例子，它有四个按钮，按钮的布局是 1-2-1。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;movements&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Forward!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Left!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Right!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Backwards!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>text</code> 来添加新的文本按钮。 你可以传递一个标签和一个处理函数。</p><p>使用 <code>row</code> 来结束当前行，并将所有后续按钮添加到新的一行。</p><p>还有许多可用的按钮类型，例如打开 URL。 请查看 <a href="https://doc.deno.land/https://deno.land/x/grammy_menu/mod.ts/~/MenuRange" target="_blank" rel="noopener noreferrer">这个插件的 API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，以及 <a href="https://core.telegram.org/bots/api#inlinekeyboardbutton" target="_blank" rel="noopener noreferrer">Telegram Bot API 参考<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 了解更多关于 <code>Inline<wbr>Keyboard<wbr>Button</code>。</p><h2 id="发送菜单" tabindex="-1"><a class="header-anchor" href="#发送菜单" aria-hidden="true">#</a> 发送菜单</h2><p>你必须先安装一个菜单，然后才能发送它。 这样它就可以互动了。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>你现在可以直接传递菜单作为 <code>reply<wbr>_markup</code> 发送消息。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;menu&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Here is your menu&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> menu <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="动态标签" tabindex="-1"><a class="header-anchor" href="#动态标签" aria-hidden="true">#</a> 动态标签</h2><p>当你在按钮上放置标签字符串时，你也可以传递一个函数 <code>(ctx:<wbr> Context) <wbr>=<wbr>&gt; string</code> 来在获取按钮上的动态标签。 这个函数可能是也可能不是 <code>async</code> 的（即异步）。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 创建一个带有用户名字的按钮，按下后会向他们问好。</span>
<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;greet-me&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Greet </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>from<span class="token operator">?.</span>first_name <span class="token operator">??</span> <span class="token string">&quot;me&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 动态标签</span>
    <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>from<span class="token punctuation">.</span>first_name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 处理函数</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由这样的函数生成的字符串被称为 <em>动态字符串</em>。 动态字符串是诸如切换按钮的理想选择。</p><p>请注意，你必须在你的按钮发生变化时，更新菜单。 调用 <code>ctx<wbr>.menu<wbr>.update()</code> 来确保你的菜单会被重新渲染。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 已启用通知的用户标识符集合。</span>
<span class="token keyword">const</span> notifications <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">toggleNotifications</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>notifications<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> notifications<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> notifications<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;toggle&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>from <span class="token operator">&amp;&amp;</span> notifications<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>from<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;🔔&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;🔕&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">toggleNotifications</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>from<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span>menu<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 更新菜单！</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">储存数据</p><p>上面的例子展示了如何使用菜单插件。 将用户设置储存在一个 <code>Set</code> 对象中并不是一个好主意，因为这样当你停止服务器时所有的数据都会丢失。</p><p>相反，如果你想储存数据，请考虑使用数据库或 <a href="/PQ-507/zh/plugins/session.html" class="">会话插件</a>。</p></div><h2 id="更新或关闭菜单" tabindex="-1"><a class="header-anchor" href="#更新或关闭菜单" aria-hidden="true">#</a> 更新或关闭菜单</h2><p>当按钮处理函数被调用时，在 <code>ctx<wbr>.menu</code> 上会有一些有用的函数。</p><p>如果你想重新渲染菜单，你可以调用 <code>ctx<wbr>.menu<wbr>.update()</code>。 这只会在你安装在你的菜单上的处理函数中生效。 当从其他中间件调用时，它将不会生效，因为它不能确定应该更新 <em>哪个</em> 菜单。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onMenuOutdated<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 按钮标签为当前时间</span>
    <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>menu<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 点击按钮时更新时间</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>on<wbr>Menu<wbr>Outdated</code> 的目的 <a href="#%E8%BF%87%E6%97%B6%E7%9A%84%E8%8F%9C%E5%8D%95%E5%92%8C%E6%8C%87%E7%BA%B9">如下</a>。 你可以暂时忽略它。</p></blockquote><p>你也可以通过编辑相应的消息来自动更新菜单。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
    <span class="token string">&quot;What&#39;s the time?&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">editMessageText</span><span class="token punctuation">(</span><span class="token string">&quot;It is&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>菜单将自动检测你想要编辑消息的文本，并利用这个机会来更新按钮。 因此，你可以通过自动更新菜单来避免显式调用 <code>ctx<wbr>.menu<wbr>.update()</code>。</p><p>调用 <code>ctx<wbr>.menu<wbr>.update()</code> 不会立即更新菜单。 相反，它只设置了一个标志并在中间件执行期间更新它。 这个叫做 <em>懒更新</em>。 如果你稍后编辑了消息本身，插件可以使用相同的 API 调用来更新按钮。 这是非常高效的，并且它确保了消息和 keyboard 同时被更新。</p><p>当然，如果你调用了 <code>ctx<wbr>.menu<wbr>.update()</code> 但是你没有编辑消息，菜单插件会在中间件执行完成之前自动更新按钮。</p><p>你可以使用 <code>ctx<wbr>.menu<wbr>.update({ immediate:<wbr> true })</code> 来强制更新菜单。 请注意，<code>ctx<wbr>.menu<wbr>.update()</code> 将会返回一个 Promise，所以你需要使用 <code>await</code>！ 使用 <code>immediate</code> 标志也可以用于所有你可以在 <code>ctx<wbr>.menu</code> 上调用的操作。 这只在必要时使用。</p><p>如果你想关闭菜单，请调用 <code>ctx<wbr>.menu<wbr>.close()</code>。 同样，这也是懒惰地执行的。</p><h2 id="菜单之间的导航" tabindex="-1"><a class="header-anchor" href="#菜单之间的导航" aria-hidden="true">#</a> 菜单之间的导航</h2><p>你可以很容易地创建多个页面，并且在它们之间导航。 每个页面都有自己的 <code>Menu</code> 实例。 <code>submenu</code> 按钮是一个让你导航到其他页面的按钮。 向后导航是通过 <code>back</code> 按钮完成的。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;root-menu&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">submenu</span><span class="token punctuation">(</span><span class="token string">&quot;Credits&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;credits-menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;credits-menu&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Show Credits&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Powered by grammY&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token string">&quot;Go Back&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这两个按钮可以接受中间件处理函数，以便你可以响应导航事件。</p><p>你也可以使用 <code>ctx<wbr>.menu<wbr>.nav()</code> 来手动导航。 这个函数接受菜单标识字符串，并且将懒惰地执行导航。 类似地，向后导航通过 <code>ctx<wbr>.menu<wbr>.back()</code> 进行。</p><p>接下来，你需要将菜单实例连接起来，通过注册一个在另一个上。 将菜单注册到另一个菜单中，会自动设置它们的层级关系。正在注册的菜单是父菜单，注册的菜单是子菜单。 下面，<code>main</code> 是 <code>settings</code> 的父菜单，除非你显式地指定了另一个父菜单。 在向后导航时，将使用父级菜单。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 注册设置菜单到主菜单。</span>
main<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>settings<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 可选择设置不同的父级。</span>
main<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>settings<span class="token punctuation">,</span> <span class="token string">&quot;back-from-settings-menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以注册任意多个菜单，并且可以嵌套任意深度。 菜单标识可以让你快速跳转到任何页面。</p><p><strong>你只需要给你的嵌套菜单设置一个交互即可。</strong> 例如，只需要传递根菜单给 <code>bot<wbr>.use</code>。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 如果你已经有了这个：</span>
main<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>settings<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 请这样做：</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 请不要这样做：</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>settings<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>你可以创建多个独立的菜单并且使它们都可以交互。</strong> 例如，如果你创建了两个不相关的菜单，并且你不需要在它们之间导航，那么你应该独立地安装这两个菜单。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 如果你有像这样的独立菜单：</span>
<span class="token keyword">const</span> menuA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;menu-a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> menuB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;menu-b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 你可以这样做：</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menuA<span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menuB<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="payloads" tabindex="-1"><a class="header-anchor" href="#payloads" aria-hidden="true">#</a> Payloads</h2><p>你可以将短文本 payload 与所有文本按钮和导航按钮一起存储。 当相应的处理程序被调用时，payload 将在 <code>ctx<wbr>.match</code> 中可用。 这是非常有用的，因为它让你可以在菜单中存储一些数据。</p><blockquote><p>Payloads 不能用来实际存储任何大量的数据。 你能存储的唯一的东西是通常小于 50 字节的短字符串，例如索引或标识符。 如果你真的想存储用户数据，例如文件标识符，URL 或其他东西，你应该使用 <a href="/PQ-507/zh/plugins/session.html" class="">会话</a>。</p></blockquote><p>这里是一个记住当前时间的菜单的例子。 其他用例可能是，例如，存储分页菜单的索引。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">generatePayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;store-current-time-in-payload&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">&quot;终止！&quot;</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> generatePayload <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 给用户5秒钟的时间来撤销。</span>
      <span class="token keyword">const</span> text <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">Number</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>match<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">5000</span>
        <span class="token operator">?</span> <span class="token string">&quot;该操作被成功取消。&quot;</span>
        <span class="token operator">:</span> <span class="token string">&quot;太晚了！你的猫咪视频已经在网上疯传了。&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

bot<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>
bot<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;publish&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;视频将被发送。你有 5 秒钟时间来撤销它。&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    reply_markup<span class="token operator">:</span> menu<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Payloads 也能和动态范围一起使用。</p><h2 id="动态范围" tabindex="-1"><a class="header-anchor" href="#动态范围" aria-hidden="true">#</a> 动态范围</h2><p>到目前为止，我们只看到了如何动态地改变按钮上的文本。 你也可以动态地调整菜单的结构，以便在任何时候添加和删除按钮。</p><div class="custom-container danger"><p class="custom-container-title">不要在信息处理过程中改变菜单</p><p>你不能在信息处理过程中创建或更改菜单。 所有菜单必须在你的机器人开始之前完全创建和注册。 这意味着你不能在你的 bot 的处理程序中使用 <code>new Menu(&quot;id&quot;)</code>。 你不能在你的 bot 的处理程序中调用 <code>menu<wbr>.text</code> 或类似的东西。</p><p>在你的 bot 运行时，添加新的菜单会导致内存泄漏。 你的 bot 将会变得更慢，并且最终崩溃。</p><p>但是你可以使用本节中描述的动态范围来自定义菜单。 你可以通过它们任意地改变现有的菜单实例，所以它们同样的强大。</p></div><p>你可以让一部分按钮在运行时动态生成（或者全部）。 我们把这部分菜单称为 <em>动态范围</em>。 换句话说，你可以通过一个工厂函数在菜单被渲染时创建一个按钮，而不是直接在菜单上定义按钮。 在这个函数里创建动态范围的最简单方法是使用这个插件提供的 <code>Menu<wbr>Range</code> 类。 <code>Menu<wbr>Range</code> 为你提供了菜单的所有功能，但是它没有标识符，并且不能被注册。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;dynamic&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

menu
  <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;About&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://grammy.dev/plugins/menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 动态生成一部分菜单！</span>
    <span class="token keyword">const</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MenuRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      range
        <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You chose </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> range<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;Cancel&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">deleteMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你传递给 <code>dynamic</code> 的范围构造器可以是 <code>async</code>，所以你甚至可以在返回新的菜单范围之前从 API 或数据库读取数据。 <strong>在许多情况下，根据 <a href="/PQ-507/zh/plugins/session.html" class="">会话</a>数据生成一个动态范围是有意义的。</strong></p><p>范围构造器的第一个参数是上下文对象。 （在上面的例子中，没有指定这一点。）</p><p>你可以选择在 <code>ctx</code> 后面接收一个新的 <code>Menu<wbr>Range</code> 实例。 如果你喜欢的话，你可以修改它而不是返回你自己的实例。 下面是你如何使用范围构建器函数的两个参数。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>menu<span class="token punctuation">.</span><span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> range<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> text <span class="token keyword">of</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    range <span class="token comment">// 不需要 `new MenuRange()` 或者 `return`</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你的工厂函数以某种方式工作是很重要的，否则你的菜单可能会出现奇怪的行为，甚至抛出错误。 由于菜单总是 <a href="#%E5%AE%83%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84">渲染两次</a>（一次是当菜单被发送时，另一次是当按钮被按下时），你需要确保：</p><ol><li><strong>你在建立动态范围的函数中没有任何副作用。</strong> 不要发送消息。 不要写入会话数据。 不要改变函数之外的任何变量。 请查看 <a href="https://zh.wikipedia.org/wiki/%E5%89%AF%E4%BD%9C%E7%94%A8_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)" target="_blank" rel="noopener noreferrer">维基百科上的副作用<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</li><li><strong>你的函数是稳定的</strong>，也就是说，它不依赖于随机性、当前时间或其他快速变化的数据源。 它必须在第一次和第二次渲染菜单时生成相同的按钮。 否则，菜单插件无法将正确的处理程序与按下的按钮匹配。 而是，它会 <a href="#%E8%BF%87%E6%97%B6%E7%9A%84%E8%8F%9C%E5%8D%95%E5%92%8C%E6%8C%87%E7%BA%B9">检测</a> 你的菜单已经过期，并且拒绝调用处理程序。</li></ol><h2 id="手动回复-callback-查询" tabindex="-1"><a class="header-anchor" href="#手动回复-callback-查询" aria-hidden="true">#</a> 手动回复 Callback 查询</h2><p>这个插件会自动调用 <code>answer<wbr>Callback<wbr>Query</code> 来处理自己的按钮。 你可以设置 <code>auto<wbr>Answer:<wbr> false</code> 来禁用这个功能。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAnswer<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>现在你必须自己调用 <code>answer<wbr>Callback<wbr>Query</code>。 这允许你传递展示给用户的自定义消息。</p><h2 id="过时的菜单和指纹" tabindex="-1"><a class="header-anchor" href="#过时的菜单和指纹" aria-hidden="true">#</a> 过时的菜单和指纹</h2><p>假设你有一个菜单，其中用户可以开关通知，比如在<a href="#%E5%8A%A8%E6%80%81%E6%A0%87%E7%AD%BE">上面</a>的例子中。 现在，如果用户发送 <code>/settings</code> 两次，他们将会得到相同的菜单两次。 但是，改变第一个消息中的通知设置将不会更新第二个消息！</p><p>很明显，我们不能在聊天中跟踪所有设置消息，并在整个聊天历史中更新所有菜单。 你需要使用很多 API 调用来实现这个，以至于 Telegram 会限制你的 bot。 你还需要大量存储来记住所有聊天中的每个菜单的所有消息标识符。 这是不现实的。</p><p>解决这个问题的办法是，在执行任何操作之前检查菜单是否过时。 这样，只有当用户真正开始点击菜单上的按钮时，我们才会更新过时的菜单。 菜单插件会自动为你处理这个问题，所以你不需要担心它。</p><p>你可以精确地配置当检测到过时菜单时会发生什么。 默认情况下，用户将会看到一条消息&quot;菜单已过时，请重试！&quot;，并且菜单将会被更新。 你可以在配置中的 <code>on<wbr>Menu<wbr>Outdated</code> 下定义自定义行为。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 自定义消息</span>
<span class="token keyword">const</span> menu0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onMenuOutdated<span class="token operator">:</span> <span class="token string">&quot;Updated, try now.&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 自定义处理函数</span>
<span class="token keyword">const</span> menu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onMenuOutdated</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">answerCallbackQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&quot;Here is a fresh menu&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> reply_markup<span class="token operator">:</span> menu1 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 完全禁用过时检测（可能运行错误的按钮处理程序）。</span>
<span class="token keyword">const</span> menu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onMenuOutdated<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们有一个检测菜单是否过时的技巧。 我们认为，如果：</p><ul><li>菜单的形状发生了变化（行数或任意一行中按钮的数量）。</li><li>被按下的按钮的行/列位置超出范围。</li><li>被按下的按钮上的标签改变了。</li><li>被按下的按钮不包含处理程序。</li></ul><p>有可能会出现这种情况，你的菜单可能会改变，但是上面的所有东西都保持不变。</p><p>也有可能你的菜单根本没有改变（即处理程序的行为没有发生变化），即使上面的技巧地表明菜单已经过时。 这两种情况对大多数 bot 来说都不太可能发生，但如果你创建的菜单是这种情况，你应该使用指纹功能。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">ident</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回一个字符串，当且仅当你的菜单发生显著变化</span>
  <span class="token comment">// 以至于它应该被认为过时时，该字符串才会改变。</span>
  <span class="token keyword">return</span> ctx<span class="token punctuation">.</span>session<span class="token punctuation">.</span>myStateIdentifier<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token function-variable function">fingerprint</span><span class="token operator">:</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">ident</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>指纹字符串将取代上面的技巧。 这样，你可以确保过时的菜单总是被检测到。</p><h2 id="它是如何工作的" tabindex="-1"><a class="header-anchor" href="#它是如何工作的" aria-hidden="true">#</a> 它是如何工作的</h2><p>这个插件完全不需要存储任何数据。 这对于有百万用户的大型机器人来说非常重要。 保存所有菜单的状态会占用太多内存。</p><p>当你创建菜单对象并通过 <code>register</code> 调用链接它们时，实际上没有菜单被构建。 相反，菜单插件将记住如何根据你的操作构建新的菜单。 每当一个菜单被发送时，它将重放这些操作以渲染你的菜单。 这包括布局所有动态范围和生成所有动态标签。 一旦菜单被发送，渲染的按钮数组将被忘记。</p><p>当一个菜单被发送时，每个按钮都包含一个回调查询，它将存储：</p><ul><li>菜单标识符。</li><li>按钮的行/列位置。</li><li>一个可选的 payload。</li><li>一个指纹标志，它存储了是否在菜单中使用了指纹。</li><li>一个4字节的哈希，用于编码指纹或菜单布局和按钮标签。</li></ul><p>当一个按钮被按下时，回调查询将被发送到 bot。</p><p>这样，我们可以确定哪个菜单中哪个按钮被按下。 一个菜单只有在以下情况下才会处理按钮的按下：</p><ul><li>匹配菜单标识符。</li><li>行/列位置已经指定。</li><li>存在指纹标志。</li></ul><p>当用户按下一个菜单按钮时，我们需要找到在菜单渲染时被添加到这个按钮的处理程序。 因此，我们只需要再次渲染旧的菜单。 然而，这次，我们不需要完整的布局，我们只需要菜单的结构和一个特定的按钮。 因此，菜单插件将执行一个简单的渲染以获得更高的效率。 换句话说，菜单将只被部分渲染。</p><p>一旦再次知道被按下的按钮（并且我们已经检查了菜单没有<a href="#%E8%BF%87%E6%97%B6%E7%9A%84%E8%8F%9C%E5%8D%95%E5%92%8C%E6%8C%87%E7%BA%B9">过时</a>），我们将调用处理程序。</p><p>在内部，菜单插件大量使用了 <a href="/PQ-507/zh/advanced/transformers.html" class="">API Transformer 函数</a>，例如，以快速渲染出正在运行的菜单。</p><p>当你在一个大型层次结构中注册菜单以导航时，它们实际上不存储这些引用。 在内部，所有这个结构的菜单都被添加到同一个大型池中，并且这个池在所有包含的实例中共享。 每个菜单都对索引中的每个其他菜单负责，并且它们可以互相处理和渲染。 （大多数情况下，只有根菜单被传递给 <code>bot<wbr>.use</code> 并且接收所有 update。 在这种情况下，这个实例将负责整个的池。） 因此，你能够在任意的菜单之间无限制地浏览，并且这个更新处理可以在 <a href="https://en.wikipedia.org/wiki/Time_complexity#Constant_time" target="_blank" rel="noopener noreferrer"><code>O(1)</code> 时间复杂度<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>中发生，因为不需要在层次结构中搜索到正确的菜单来处理按钮点击。</p><h2 id="插件概述" tabindex="-1"><a class="header-anchor" href="#插件概述" aria-hidden="true">#</a> 插件概述</h2><ul><li>名字：<code>menu</code></li><li>源码：<a href="https://github.com/grammyjs/menu" target="_blank" rel="noopener noreferrer">https://<wbr>github<wbr>.com<wbr>/grammyjs<wbr>/menu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>参考：<a href="https://doc.deno.land/https://deno.land/x/grammy_menu/mod.ts" target="_blank" rel="noopener noreferrer">https://<wbr>doc<wbr>.deno<wbr>.land<wbr>/https://<wbr>deno<wbr>.land<wbr>/x<wbr>/grammy<wbr>_menu<wbr>/mod<wbr>.ts<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/grammyjs/website/edit/main/site/docs/zh/plugins/menu.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页！"><!--[--><!--]--><!-- Start inject --><span>在 GitHub 上编辑此页！ <!----><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></span><!-- End of inject --><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">最近更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: shtrog@gmail.com">KnorpelSenf</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 643089849@qq.com">WingLim</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: git.fytyt@aleeas.com">Ciki Momogi</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: ez@roj.im">Roj</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: winglim@qq.com">WingLim</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: habemuscode@protonmail.com">Habemuscode</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: rojserbest@gmail.com">Roj</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--[--><hr class="my-divider"><footer class="my-footer footer"> Based on commit <code><a href="https://github.com/grammyjs/website/pull/507/commits/f4ff0858f173903577a806a526eecd15c748321c" target="_blank">f4ff0858f173903577a806a526eecd15c748321c</a></code></footer><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/PQ-507/assets/app.9a621f1c.js" defer></script>
  </body>
</html>
